function ip(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in e)){const a=Object.getOwnPropertyDescriptor(r,l);a&&Object.defineProperty(e,l,a.get?a:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function cp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lm={exports:{}},to={},Im={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nl=Symbol.for("react.element"),dp=Symbol.for("react.portal"),up=Symbol.for("react.fragment"),mp=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),fp=Symbol.for("react.provider"),pp=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),vp=Symbol.for("react.memo"),yp=Symbol.for("react.lazy"),Wd=Symbol.iterator;function bp(e){return e===null||typeof e!="object"?null:(e=Wd&&e[Wd]||e["@@iterator"],typeof e=="function"?e:null)}var jm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Om=Object.assign,Am={};function fs(e,t,n){this.props=e,this.context=t,this.refs=Am,this.updater=n||jm}fs.prototype.isReactComponent={};fs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Um(){}Um.prototype=fs.prototype;function Rc(e,t,n){this.props=e,this.context=t,this.refs=Am,this.updater=n||jm}var Mc=Rc.prototype=new Um;Mc.constructor=Rc;Om(Mc,fs.prototype);Mc.isPureReactComponent=!0;var Xd=Array.isArray,Bm=Object.prototype.hasOwnProperty,zc={current:null},Fm={key:!0,ref:!0,__self:!0,__source:!0};function Dm(e,t,n){var r,l={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Bm.call(t,r)&&!Fm.hasOwnProperty(r)&&(l[r]=t[r]);var c=arguments.length-2;if(c===1)l.children=n;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];l.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)l[r]===void 0&&(l[r]=c[r]);return{$$typeof:Nl,type:e,key:a,ref:i,props:l,_owner:zc.current}}function Np(e,t){return{$$typeof:Nl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nl}function wp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Yd=/\/+/g;function Uo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wp(""+e.key):t.toString(36)}function oa(e,t,n,r,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Nl:case dp:i=!0}}if(i)return i=e,l=l(i),e=r===""?"."+Uo(i,0):r,Xd(l)?(n="",e!=null&&(n=e.replace(Yd,"$&/")+"/"),oa(l,t,n,"",function(u){return u})):l!=null&&(Lc(l)&&(l=Np(l,n+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Yd,"$&/")+"/")+e)),t.push(l)),1;if(i=0,r=r===""?".":r+":",Xd(e))for(var c=0;c<e.length;c++){a=e[c];var d=r+Uo(a,c);i+=oa(a,t,n,d,l)}else if(d=bp(e),typeof d=="function")for(e=d.call(e),c=0;!(a=e.next()).done;)a=a.value,d=r+Uo(a,c++),i+=oa(a,t,n,d,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Hl(e,t,n){if(e==null)return e;var r=[],l=0;return oa(e,r,"","",function(a){return t.call(n,a,l++)}),r}function kp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ht={current:null},ia={transition:null},Sp={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:ia,ReactCurrentOwner:zc};function Hm(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Hl,forEach:function(e,t,n){Hl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hl(e,function(){t++}),t},toArray:function(e){return Hl(e,function(t){return t})||[]},only:function(e){if(!Lc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=fs;xe.Fragment=up;xe.Profiler=hp;xe.PureComponent=Rc;xe.StrictMode=mp;xe.Suspense=xp;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sp;xe.act=Hm;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Om({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=zc.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Bm.call(t,d)&&!Fm.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:Nl,type:e.type,key:l,ref:a,props:r,_owner:i}};xe.createContext=function(e){return e={$$typeof:pp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fp,_context:e},e.Consumer=e};xe.createElement=Dm;xe.createFactory=function(e){var t=Dm.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:gp,render:e}};xe.isValidElement=Lc;xe.lazy=function(e){return{$$typeof:yp,_payload:{_status:-1,_result:e},_init:kp}};xe.memo=function(e,t){return{$$typeof:vp,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=ia.transition;ia.transition={};try{e()}finally{ia.transition=t}};xe.unstable_act=Hm;xe.useCallback=function(e,t){return ht.current.useCallback(e,t)};xe.useContext=function(e){return ht.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return ht.current.useDeferredValue(e)};xe.useEffect=function(e,t){return ht.current.useEffect(e,t)};xe.useId=function(){return ht.current.useId()};xe.useImperativeHandle=function(e,t,n){return ht.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return ht.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return ht.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return ht.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return ht.current.useReducer(e,t,n)};xe.useRef=function(e){return ht.current.useRef(e)};xe.useState=function(e){return ht.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return ht.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return ht.current.useTransition()};xe.version="18.3.1";Im.exports=xe;var h=Im.exports;const Cp=cp(h),_p=ip({__proto__:null,default:Cp},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=h,$p=Symbol.for("react.element"),Pp=Symbol.for("react.fragment"),Tp=Object.prototype.hasOwnProperty,Rp=Ep.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mp={key:!0,ref:!0,__self:!0,__source:!0};function Vm(e,t,n){var r,l={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Tp.call(t,r)&&!Mp.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:$p,type:e,key:a,ref:i,props:l,_owner:Rp.current}}to.Fragment=Pp;to.jsx=Vm;to.jsxs=Vm;Lm.exports=to;var Ic=Lm.exports;const wt=Ic.Fragment,s=Ic.jsx,o=Ic.jsxs;var wi={},Wm={exports:{}},Pt={},Xm={exports:{}},Ym={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,te){var re=A.length;A.push(te);e:for(;0<re;){var ae=re-1>>>1,de=A[ae];if(0<l(de,te))A[ae]=te,A[re]=de,re=ae;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var te=A[0],re=A.pop();if(re!==te){A[0]=re;e:for(var ae=0,de=A.length,Ne=de>>>1;ae<Ne;){var Ce=2*(ae+1)-1,M=A[Ce],W=Ce+1,Y=A[W];if(0>l(M,re))W<de&&0>l(Y,M)?(A[ae]=Y,A[W]=re,ae=W):(A[ae]=M,A[Ce]=re,ae=Ce);else if(W<de&&0>l(Y,re))A[ae]=Y,A[W]=re,ae=W;else break e}}return te}function l(A,te){var re=A.sortIndex-te.sortIndex;return re!==0?re:A.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var d=[],u=[],v=1,y=null,b=3,C=!1,f=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(A){for(var te=n(u);te!==null;){if(te.callback===null)r(u);else if(te.startTime<=A)r(u),te.sortIndex=te.expirationTime,t(d,te);else break;te=n(u)}}function S(A){if(N=!1,p(A),!f)if(n(d)!==null)f=!0,G(R);else{var te=n(u);te!==null&&X(S,te.startTime-A)}}function R(A,te){f=!1,N&&(N=!1,x(T),T=-1),C=!0;var re=b;try{for(p(te),y=n(d);y!==null&&(!(y.expirationTime>te)||A&&!B());){var ae=y.callback;if(typeof ae=="function"){y.callback=null,b=y.priorityLevel;var de=ae(y.expirationTime<=te);te=e.unstable_now(),typeof de=="function"?y.callback=de:y===n(d)&&r(d),p(te)}else r(d);y=n(d)}if(y!==null)var Ne=!0;else{var Ce=n(u);Ce!==null&&X(S,Ce.startTime-te),Ne=!1}return Ne}finally{y=null,b=re,C=!1}}var g=!1,$=null,T=-1,q=5,L=-1;function B(){return!(e.unstable_now()-L<q)}function Z(){if($!==null){var A=e.unstable_now();L=A;var te=!0;try{te=$(!0,A)}finally{te?se():(g=!1,$=null)}}else g=!1}var se;if(typeof m=="function")se=function(){m(Z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,V=U.port2;U.port1.onmessage=Z,se=function(){V.postMessage(null)}}else se=function(){_(Z,0)};function G(A){$=A,g||(g=!0,se())}function X(A,te){T=_(function(){A(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){f||C||(f=!0,G(R))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(A){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var re=b;b=te;try{return A()}finally{b=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,te){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var re=b;b=A;try{return te()}finally{b=re}},e.unstable_scheduleCallback=function(A,te,re){var ae=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ae+re:ae):re=ae,A){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=re+de,A={id:v++,callback:te,priorityLevel:A,startTime:re,expirationTime:de,sortIndex:-1},re>ae?(A.sortIndex=re,t(u,A),n(d)===null&&A===n(u)&&(N?(x(T),T=-1):N=!0,X(S,re-ae))):(A.sortIndex=de,t(d,A),f||C||(f=!0,G(R))),A},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(A){var te=b;return function(){var re=b;b=te;try{return A.apply(this,arguments)}finally{b=re}}}})(Ym);Xm.exports=Ym;var zp=Xm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp=h,$t=zp;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Km=new Set,Js={};function $r(e,t){as(e,t),as(e+"Capture",t)}function as(e,t){for(Js[e]=t,e=0;e<t.length;e++)Km.add(t[e])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ki=Object.prototype.hasOwnProperty,Ip=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kd={},Qd={};function jp(e){return ki.call(Qd,e)?!0:ki.call(Kd,e)?!1:Ip.test(e)?Qd[e]=!0:(Kd[e]=!0,!1)}function Op(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ap(e,t,n,r){if(t===null||typeof t>"u"||Op(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,n,r,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var jc=/[\-:]([a-z])/g;function Oc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jc,Oc);Je[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jc,Oc);Je[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jc,Oc);Je[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ac(e,t,n,r){var l=Je.hasOwnProperty(t)?Je[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ap(t,n,l,r)&&(n=null),r||l===null?jp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var En=Lp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vl=Symbol.for("react.element"),Fr=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),Uc=Symbol.for("react.strict_mode"),Si=Symbol.for("react.profiler"),Qm=Symbol.for("react.provider"),qm=Symbol.for("react.context"),Bc=Symbol.for("react.forward_ref"),Ci=Symbol.for("react.suspense"),_i=Symbol.for("react.suspense_list"),Fc=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),Gm=Symbol.for("react.offscreen"),qd=Symbol.iterator;function Es(e){return e===null||typeof e!="object"?null:(e=qd&&e[qd]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,Bo;function Os(e){if(Bo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bo=t&&t[1]||""}return`
`+Bo+e}var Fo=!1;function Do(e,t){if(!e||Fo)return"";Fo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var l=u.stack.split(`
`),a=r.stack.split(`
`),i=l.length-1,c=a.length-1;1<=i&&0<=c&&l[i]!==a[c];)c--;for(;1<=i&&0<=c;i--,c--)if(l[i]!==a[c]){if(i!==1||c!==1)do if(i--,c--,0>c||l[i]!==a[c]){var d=`
`+l[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=c);break}}}finally{Fo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Os(e):""}function Up(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=Do(e.type,!1),e;case 11:return e=Do(e.type.render,!1),e;case 1:return e=Do(e.type,!0),e;default:return""}}function Ei(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dr:return"Fragment";case Fr:return"Portal";case Si:return"Profiler";case Uc:return"StrictMode";case Ci:return"Suspense";case _i:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qm:return(e.displayName||"Context")+".Consumer";case Qm:return(e._context.displayName||"Context")+".Provider";case Bc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fc:return t=e.displayName||null,t!==null?t:Ei(e.type)||"Memo";case In:t=e._payload,e=e._init;try{return Ei(e(t))}catch{}}return null}function Bp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ei(t);case 8:return t===Uc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fp(e){var t=Jm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wl(e){e._valueTracker||(e._valueTracker=Fp(e))}function Zm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $i(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Jn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eh(e,t){t=t.checked,t!=null&&Ac(e,"checked",t,!1)}function Pi(e,t){eh(e,t);var n=Jn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ti(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ti(e,t.type,Jn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ti(e,t,n){(t!=="number"||ka(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var As=Array.isArray;function Zr(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Ri(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(As(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Jn(n)}}function th(e,t){var n=Jn(t.value),r=Jn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function eu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xl,rh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xl=Xl||document.createElement("div"),Xl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dp=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(e){Dp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fs[t]=Fs[e]})});function sh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fs.hasOwnProperty(e)&&Fs[e]?(""+t).trim():t+"px"}function lh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=sh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Hp=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zi(e,t){if(t){if(Hp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Li(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function Dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ji=null,es=null,ts=null;function tu(e){if(e=Sl(e)){if(typeof ji!="function")throw Error(D(280));var t=e.stateNode;t&&(t=ao(t),ji(e.stateNode,e.type,t))}}function ah(e){es?ts?ts.push(e):ts=[e]:es=e}function oh(){if(es){var e=es,t=ts;if(ts=es=null,tu(e),t)for(e=0;e<t.length;e++)tu(t[e])}}function ih(e,t){return e(t)}function ch(){}var Ho=!1;function dh(e,t,n){if(Ho)return e(t,n);Ho=!0;try{return ih(e,t,n)}finally{Ho=!1,(es!==null||ts!==null)&&(ch(),oh())}}function el(e,t){var n=e.stateNode;if(n===null)return null;var r=ao(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Oi=!1;if(wn)try{var $s={};Object.defineProperty($s,"passive",{get:function(){Oi=!0}}),window.addEventListener("test",$s,$s),window.removeEventListener("test",$s,$s)}catch{Oi=!1}function Vp(e,t,n,r,l,a,i,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(v){this.onError(v)}}var Ds=!1,Sa=null,Ca=!1,Ai=null,Wp={onError:function(e){Ds=!0,Sa=e}};function Xp(e,t,n,r,l,a,i,c,d){Ds=!1,Sa=null,Vp.apply(Wp,arguments)}function Yp(e,t,n,r,l,a,i,c,d){if(Xp.apply(this,arguments),Ds){if(Ds){var u=Sa;Ds=!1,Sa=null}else throw Error(D(198));Ca||(Ca=!0,Ai=u)}}function Pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nu(e){if(Pr(e)!==e)throw Error(D(188))}function Kp(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var a=l.alternate;if(a===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return nu(l),e;if(a===r)return nu(l),t;a=a.sibling}throw Error(D(188))}if(n.return!==r.return)n=l,r=a;else{for(var i=!1,c=l.child;c;){if(c===n){i=!0,n=l,r=a;break}if(c===r){i=!0,r=l,n=a;break}c=c.sibling}if(!i){for(c=a.child;c;){if(c===n){i=!0,n=a,r=l;break}if(c===r){i=!0,r=a,n=l;break}c=c.sibling}if(!i)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function mh(e){return e=Kp(e),e!==null?hh(e):null}function hh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hh(e);if(t!==null)return t;e=e.sibling}return null}var fh=$t.unstable_scheduleCallback,ru=$t.unstable_cancelCallback,Qp=$t.unstable_shouldYield,qp=$t.unstable_requestPaint,Ae=$t.unstable_now,Gp=$t.unstable_getCurrentPriorityLevel,Hc=$t.unstable_ImmediatePriority,ph=$t.unstable_UserBlockingPriority,_a=$t.unstable_NormalPriority,Jp=$t.unstable_LowPriority,gh=$t.unstable_IdlePriority,no=null,on=null;function Zp(e){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(no,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:ng,eg=Math.log,tg=Math.LN2;function ng(e){return e>>>=0,e===0?32:31-(eg(e)/tg|0)|0}var Yl=64,Kl=4194304;function Us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ea(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var c=i&~l;c!==0?r=Us(c):(a&=i,a!==0&&(r=Us(a)))}else i=n&~l,i!==0?r=Us(i):a!==0&&(r=Us(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kt(t),l=1<<n,r|=e[n],t&=~l;return r}function rg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Kt(a),c=1<<i,d=l[i];d===-1?(!(c&n)||c&r)&&(l[i]=rg(c,t)):d<=t&&(e.expiredLanes|=c),a&=~c}}function Ui(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xh(){var e=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),e}function Vo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=n}function lg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Kt(n),a=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~a}}function Vc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var Se=0;function vh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yh,Wc,bh,Nh,wh,Bi=!1,Ql=[],Dn=null,Hn=null,Vn=null,tl=new Map,nl=new Map,On=[],ag="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function su(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":tl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(t.pointerId)}}function Ps(e,t,n,r,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},t!==null&&(t=Sl(t),t!==null&&Wc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function og(e,t,n,r,l){switch(t){case"focusin":return Dn=Ps(Dn,e,t,n,r,l),!0;case"dragenter":return Hn=Ps(Hn,e,t,n,r,l),!0;case"mouseover":return Vn=Ps(Vn,e,t,n,r,l),!0;case"pointerover":var a=l.pointerId;return tl.set(a,Ps(tl.get(a)||null,e,t,n,r,l)),!0;case"gotpointercapture":return a=l.pointerId,nl.set(a,Ps(nl.get(a)||null,e,t,n,r,l)),!0}return!1}function kh(e){var t=pr(e.target);if(t!==null){var n=Pr(t);if(n!==null){if(t=n.tag,t===13){if(t=uh(n),t!==null){e.blockedOn=t,wh(e.priority,function(){bh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ca(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ii=r,n.target.dispatchEvent(r),Ii=null}else return t=Sl(n),t!==null&&Wc(t),e.blockedOn=n,!1;t.shift()}return!0}function lu(e,t,n){ca(e)&&n.delete(t)}function ig(){Bi=!1,Dn!==null&&ca(Dn)&&(Dn=null),Hn!==null&&ca(Hn)&&(Hn=null),Vn!==null&&ca(Vn)&&(Vn=null),tl.forEach(lu),nl.forEach(lu)}function Ts(e,t){e.blockedOn===t&&(e.blockedOn=null,Bi||(Bi=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,ig)))}function rl(e){function t(l){return Ts(l,e)}if(0<Ql.length){Ts(Ql[0],e);for(var n=1;n<Ql.length;n++){var r=Ql[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Dn!==null&&Ts(Dn,e),Hn!==null&&Ts(Hn,e),Vn!==null&&Ts(Vn,e),tl.forEach(t),nl.forEach(t),n=0;n<On.length;n++)r=On[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<On.length&&(n=On[0],n.blockedOn===null);)kh(n),n.blockedOn===null&&On.shift()}var ns=En.ReactCurrentBatchConfig,$a=!0;function cg(e,t,n,r){var l=Se,a=ns.transition;ns.transition=null;try{Se=1,Xc(e,t,n,r)}finally{Se=l,ns.transition=a}}function dg(e,t,n,r){var l=Se,a=ns.transition;ns.transition=null;try{Se=4,Xc(e,t,n,r)}finally{Se=l,ns.transition=a}}function Xc(e,t,n,r){if($a){var l=Fi(e,t,n,r);if(l===null)ei(e,t,r,Pa,n),su(e,r);else if(og(l,e,t,n,r))r.stopPropagation();else if(su(e,r),t&4&&-1<ag.indexOf(e)){for(;l!==null;){var a=Sl(l);if(a!==null&&yh(a),a=Fi(e,t,n,r),a===null&&ei(e,t,r,Pa,n),a===l)break;l=a}l!==null&&r.stopPropagation()}else ei(e,t,r,null,n)}}var Pa=null;function Fi(e,t,n,r){if(Pa=null,e=Dc(r),e=pr(e),e!==null)if(t=Pr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pa=e,null}function Sh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gp()){case Hc:return 1;case ph:return 4;case _a:case Jp:return 16;case gh:return 536870912;default:return 16}default:return 16}}var Un=null,Yc=null,da=null;function Ch(){if(da)return da;var e,t=Yc,n=t.length,r,l="value"in Un?Un.value:Un.textContent,a=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===l[a-r];r++);return da=l.slice(e,1<r?1-r:void 0)}function ua(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ql(){return!0}function au(){return!1}function Tt(e){function t(n,r,l,a,i){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ql:au,this.isPropagationStopped=au,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),t}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=Tt(ps),kl=Ie({},ps,{view:0,detail:0}),ug=Tt(kl),Wo,Xo,Rs,ro=Ie({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(Wo=e.screenX-Rs.screenX,Xo=e.screenY-Rs.screenY):Xo=Wo=0,Rs=e),Wo)},movementY:function(e){return"movementY"in e?e.movementY:Xo}}),ou=Tt(ro),mg=Ie({},ro,{dataTransfer:0}),hg=Tt(mg),fg=Ie({},kl,{relatedTarget:0}),Yo=Tt(fg),pg=Ie({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),gg=Tt(pg),xg=Ie({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vg=Tt(xg),yg=Ie({},ps,{data:0}),iu=Tt(yg),bg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ng={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wg[e])?!!t[e]:!1}function Qc(){return kg}var Sg=Ie({},kl,{key:function(e){if(e.key){var t=bg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ua(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ng[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qc,charCode:function(e){return e.type==="keypress"?ua(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ua(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cg=Tt(Sg),_g=Ie({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=Tt(_g),Eg=Ie({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qc}),$g=Tt(Eg),Pg=Ie({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tg=Tt(Pg),Rg=Ie({},ro,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mg=Tt(Rg),zg=[9,13,27,32],qc=wn&&"CompositionEvent"in window,Hs=null;wn&&"documentMode"in document&&(Hs=document.documentMode);var Lg=wn&&"TextEvent"in window&&!Hs,_h=wn&&(!qc||Hs&&8<Hs&&11>=Hs),du=String.fromCharCode(32),uu=!1;function Eh(e,t){switch(e){case"keyup":return zg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $h(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hr=!1;function Ig(e,t){switch(e){case"compositionend":return $h(t);case"keypress":return t.which!==32?null:(uu=!0,du);case"textInput":return e=t.data,e===du&&uu?null:e;default:return null}}function jg(e,t){if(Hr)return e==="compositionend"||!qc&&Eh(e,t)?(e=Ch(),da=Yc=Un=null,Hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _h&&t.locale!=="ko"?null:t.data;default:return null}}var Og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Og[e.type]:t==="textarea"}function Ph(e,t,n,r){ah(r),t=Ta(t,"onChange"),0<t.length&&(n=new Kc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vs=null,sl=null;function Ag(e){Bh(e,0)}function so(e){var t=Xr(e);if(Zm(t))return e}function Ug(e,t){if(e==="change")return t}var Th=!1;if(wn){var Ko;if(wn){var Qo="oninput"in document;if(!Qo){var hu=document.createElement("div");hu.setAttribute("oninput","return;"),Qo=typeof hu.oninput=="function"}Ko=Qo}else Ko=!1;Th=Ko&&(!document.documentMode||9<document.documentMode)}function fu(){Vs&&(Vs.detachEvent("onpropertychange",Rh),sl=Vs=null)}function Rh(e){if(e.propertyName==="value"&&so(sl)){var t=[];Ph(t,sl,e,Dc(e)),dh(Ag,t)}}function Bg(e,t,n){e==="focusin"?(fu(),Vs=t,sl=n,Vs.attachEvent("onpropertychange",Rh)):e==="focusout"&&fu()}function Fg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return so(sl)}function Dg(e,t){if(e==="click")return so(t)}function Hg(e,t){if(e==="input"||e==="change")return so(t)}function Vg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:Vg;function ll(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!ki.call(t,l)||!Gt(e[l],t[l]))return!1}return!0}function pu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gu(e,t){var n=pu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pu(n)}}function Mh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zh(){for(var e=window,t=ka();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ka(e.document)}return t}function Gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wg(e){var t=zh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Mh(n.ownerDocument.documentElement,n)){if(r!==null&&Gc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,a=Math.min(r.start,l);r=r.end===void 0?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=gu(n,a);var i=gu(n,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xg=wn&&"documentMode"in document&&11>=document.documentMode,Vr=null,Di=null,Ws=null,Hi=!1;function xu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hi||Vr==null||Vr!==ka(r)||(r=Vr,"selectionStart"in r&&Gc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ws&&ll(Ws,r)||(Ws=r,r=Ta(Di,"onSelect"),0<r.length&&(t=new Kc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vr)))}function Gl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wr={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},qo={},Lh={};wn&&(Lh=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function lo(e){if(qo[e])return qo[e];if(!Wr[e])return e;var t=Wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Lh)return qo[e]=t[n];return e}var Ih=lo("animationend"),jh=lo("animationiteration"),Oh=lo("animationstart"),Ah=lo("transitionend"),Uh=new Map,vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(e,t){Uh.set(e,t),$r(t,[e])}for(var Go=0;Go<vu.length;Go++){var Jo=vu[Go],Yg=Jo.toLowerCase(),Kg=Jo[0].toUpperCase()+Jo.slice(1);er(Yg,"on"+Kg)}er(Ih,"onAnimationEnd");er(jh,"onAnimationIteration");er(Oh,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(Ah,"onTransitionEnd");as("onMouseEnter",["mouseout","mouseover"]);as("onMouseLeave",["mouseout","mouseover"]);as("onPointerEnter",["pointerout","pointerover"]);as("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function yu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Yp(r,t,void 0,e),e.currentTarget=null}function Bh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var c=r[i],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==a&&l.isPropagationStopped())break e;yu(l,c,u),a=d}else for(i=0;i<r.length;i++){if(c=r[i],d=c.instance,u=c.currentTarget,c=c.listener,d!==a&&l.isPropagationStopped())break e;yu(l,c,u),a=d}}}if(Ca)throw e=Ai,Ca=!1,Ai=null,e}function Pe(e,t){var n=t[Ki];n===void 0&&(n=t[Ki]=new Set);var r=e+"__bubble";n.has(r)||(Fh(t,e,2,!1),n.add(r))}function Zo(e,t,n){var r=0;t&&(r|=4),Fh(n,e,r,t)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function al(e){if(!e[Jl]){e[Jl]=!0,Km.forEach(function(n){n!=="selectionchange"&&(Qg.has(n)||Zo(n,!1,e),Zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jl]||(t[Jl]=!0,Zo("selectionchange",!1,t))}}function Fh(e,t,n,r){switch(Sh(t)){case 1:var l=cg;break;case 4:l=dg;break;default:l=Xc}n=l.bind(null,t,n,e),l=void 0,!Oi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function ei(e,t,n,r,l){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var c=r.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===l||d.nodeType===8&&d.parentNode===l))return;i=i.return}for(;c!==null;){if(i=pr(c),i===null)return;if(d=i.tag,d===5||d===6){r=a=i;continue e}c=c.parentNode}}r=r.return}dh(function(){var u=a,v=Dc(n),y=[];e:{var b=Uh.get(e);if(b!==void 0){var C=Kc,f=e;switch(e){case"keypress":if(ua(n)===0)break e;case"keydown":case"keyup":C=Cg;break;case"focusin":f="focus",C=Yo;break;case"focusout":f="blur",C=Yo;break;case"beforeblur":case"afterblur":C=Yo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=$g;break;case Ih:case jh:case Oh:C=gg;break;case Ah:C=Tg;break;case"scroll":C=ug;break;case"wheel":C=Mg;break;case"copy":case"cut":case"paste":C=vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=cu}var N=(t&4)!==0,_=!N&&e==="scroll",x=N?b!==null?b+"Capture":null:b;N=[];for(var m=u,p;m!==null;){p=m;var S=p.stateNode;if(p.tag===5&&S!==null&&(p=S,x!==null&&(S=el(m,x),S!=null&&N.push(ol(m,S,p)))),_)break;m=m.return}0<N.length&&(b=new C(b,f,null,n,v),y.push({event:b,listeners:N}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",b&&n!==Ii&&(f=n.relatedTarget||n.fromElement)&&(pr(f)||f[kn]))break e;if((C||b)&&(b=v.window===v?v:(b=v.ownerDocument)?b.defaultView||b.parentWindow:window,C?(f=n.relatedTarget||n.toElement,C=u,f=f?pr(f):null,f!==null&&(_=Pr(f),f!==_||f.tag!==5&&f.tag!==6)&&(f=null)):(C=null,f=u),C!==f)){if(N=ou,S="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(N=cu,S="onPointerLeave",x="onPointerEnter",m="pointer"),_=C==null?b:Xr(C),p=f==null?b:Xr(f),b=new N(S,m+"leave",C,n,v),b.target=_,b.relatedTarget=p,S=null,pr(v)===u&&(N=new N(x,m+"enter",f,n,v),N.target=p,N.relatedTarget=_,S=N),_=S,C&&f)t:{for(N=C,x=f,m=0,p=N;p;p=Ur(p))m++;for(p=0,S=x;S;S=Ur(S))p++;for(;0<m-p;)N=Ur(N),m--;for(;0<p-m;)x=Ur(x),p--;for(;m--;){if(N===x||x!==null&&N===x.alternate)break t;N=Ur(N),x=Ur(x)}N=null}else N=null;C!==null&&bu(y,b,C,N,!1),f!==null&&_!==null&&bu(y,_,f,N,!0)}}e:{if(b=u?Xr(u):window,C=b.nodeName&&b.nodeName.toLowerCase(),C==="select"||C==="input"&&b.type==="file")var R=Ug;else if(mu(b))if(Th)R=Hg;else{R=Fg;var g=Bg}else(C=b.nodeName)&&C.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(R=Dg);if(R&&(R=R(e,u))){Ph(y,R,n,v);break e}g&&g(e,b,u),e==="focusout"&&(g=b._wrapperState)&&g.controlled&&b.type==="number"&&Ti(b,"number",b.value)}switch(g=u?Xr(u):window,e){case"focusin":(mu(g)||g.contentEditable==="true")&&(Vr=g,Di=u,Ws=null);break;case"focusout":Ws=Di=Vr=null;break;case"mousedown":Hi=!0;break;case"contextmenu":case"mouseup":case"dragend":Hi=!1,xu(y,n,v);break;case"selectionchange":if(Xg)break;case"keydown":case"keyup":xu(y,n,v)}var $;if(qc)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Hr?Eh(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(_h&&n.locale!=="ko"&&(Hr||T!=="onCompositionStart"?T==="onCompositionEnd"&&Hr&&($=Ch()):(Un=v,Yc="value"in Un?Un.value:Un.textContent,Hr=!0)),g=Ta(u,T),0<g.length&&(T=new iu(T,e,null,n,v),y.push({event:T,listeners:g}),$?T.data=$:($=$h(n),$!==null&&(T.data=$)))),($=Lg?Ig(e,n):jg(e,n))&&(u=Ta(u,"onBeforeInput"),0<u.length&&(v=new iu("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:u}),v.data=$))}Bh(y,t)})}function ol(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ta(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=el(e,n),a!=null&&r.unshift(ol(e,a,l)),a=el(e,t),a!=null&&r.push(ol(e,a,l))),e=e.return}return r}function Ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bu(e,t,n,r,l){for(var a=t._reactName,i=[];n!==null&&n!==r;){var c=n,d=c.alternate,u=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&u!==null&&(c=u,l?(d=el(n,a),d!=null&&i.unshift(ol(n,d,c))):l||(d=el(n,a),d!=null&&i.push(ol(n,d,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var qg=/\r\n?/g,Gg=/\u0000|\uFFFD/g;function Nu(e){return(typeof e=="string"?e:""+e).replace(qg,`
`).replace(Gg,"")}function Zl(e,t,n){if(t=Nu(t),Nu(e)!==t&&n)throw Error(D(425))}function Ra(){}var Vi=null,Wi=null;function Xi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yi=typeof setTimeout=="function"?setTimeout:void 0,Jg=typeof clearTimeout=="function"?clearTimeout:void 0,wu=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof wu<"u"?function(e){return wu.resolve(null).then(e).catch(ex)}:Yi;function ex(e){setTimeout(function(){throw e})}function ti(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),rl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);rl(t)}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ku(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gs=Math.random().toString(36).slice(2),an="__reactFiber$"+gs,il="__reactProps$"+gs,kn="__reactContainer$"+gs,Ki="__reactEvents$"+gs,tx="__reactListeners$"+gs,nx="__reactHandles$"+gs;function pr(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[kn]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ku(e);e!==null;){if(n=e[an])return n;e=ku(e)}return t}e=n,n=e.parentNode}return null}function Sl(e){return e=e[an]||e[kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function ao(e){return e[il]||null}var Qi=[],Yr=-1;function tr(e){return{current:e}}function Te(e){0>Yr||(e.current=Qi[Yr],Qi[Yr]=null,Yr--)}function Ee(e,t){Yr++,Qi[Yr]=e.current,e.current=t}var Zn={},at=tr(Zn),vt=tr(!1),Nr=Zn;function os(e,t){var n=e.type.contextTypes;if(!n)return Zn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in n)l[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function yt(e){return e=e.childContextTypes,e!=null}function Ma(){Te(vt),Te(at)}function Su(e,t,n){if(at.current!==Zn)throw Error(D(168));Ee(at,t),Ee(vt,n)}function Dh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(D(108,Bp(e)||"Unknown",l));return Ie({},n,r)}function za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zn,Nr=at.current,Ee(at,e),Ee(vt,vt.current),!0}function Cu(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Dh(e,t,Nr),r.__reactInternalMemoizedMergedChildContext=e,Te(vt),Te(at),Ee(at,e)):Te(vt),Ee(vt,n)}var xn=null,oo=!1,ni=!1;function Hh(e){xn===null?xn=[e]:xn.push(e)}function rx(e){oo=!0,Hh(e)}function nr(){if(!ni&&xn!==null){ni=!0;var e=0,t=Se;try{var n=xn;for(Se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}xn=null,oo=!1}catch(l){throw xn!==null&&(xn=xn.slice(e+1)),fh(Hc,nr),l}finally{Se=t,ni=!1}}return null}var Kr=[],Qr=0,La=null,Ia=0,zt=[],Lt=0,wr=null,vn=1,yn="";function mr(e,t){Kr[Qr++]=Ia,Kr[Qr++]=La,La=e,Ia=t}function Vh(e,t,n){zt[Lt++]=vn,zt[Lt++]=yn,zt[Lt++]=wr,wr=e;var r=vn;e=yn;var l=32-Kt(r)-1;r&=~(1<<l),n+=1;var a=32-Kt(t)+l;if(30<a){var i=l-l%5;a=(r&(1<<i)-1).toString(32),r>>=i,l-=i,vn=1<<32-Kt(t)+l|n<<l|r,yn=a+e}else vn=1<<a|n<<l|r,yn=e}function Jc(e){e.return!==null&&(mr(e,1),Vh(e,1,0))}function Zc(e){for(;e===La;)La=Kr[--Qr],Kr[Qr]=null,Ia=Kr[--Qr],Kr[Qr]=null;for(;e===wr;)wr=zt[--Lt],zt[Lt]=null,yn=zt[--Lt],zt[Lt]=null,vn=zt[--Lt],zt[Lt]=null}var _t=null,Ct=null,Re=!1,Yt=null;function Wh(e,t){var n=It(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _u(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,Ct=Wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wr!==null?{id:vn,overflow:yn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=It(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,_t=e,Ct=null,!0):!1;default:return!1}}function qi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gi(e){if(Re){var t=Ct;if(t){var n=t;if(!_u(e,t)){if(qi(e))throw Error(D(418));t=Wn(n.nextSibling);var r=_t;t&&_u(e,t)?Wh(r,n):(e.flags=e.flags&-4097|2,Re=!1,_t=e)}}else{if(qi(e))throw Error(D(418));e.flags=e.flags&-4097|2,Re=!1,_t=e}}}function Eu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function ea(e){if(e!==_t)return!1;if(!Re)return Eu(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xi(e.type,e.memoizedProps)),t&&(t=Ct)){if(qi(e))throw Xh(),Error(D(418));for(;t;)Wh(e,t),t=Wn(t.nextSibling)}if(Eu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ct=Wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=_t?Wn(e.stateNode.nextSibling):null;return!0}function Xh(){for(var e=Ct;e;)e=Wn(e.nextSibling)}function is(){Ct=_t=null,Re=!1}function ed(e){Yt===null?Yt=[e]:Yt.push(e)}var sx=En.ReactCurrentBatchConfig;function Ms(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var l=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var c=l.refs;i===null?delete c[a]:c[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function ta(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $u(e){var t=e._init;return t(e._payload)}function Yh(e){function t(x,m){if(e){var p=x.deletions;p===null?(x.deletions=[m],x.flags|=16):p.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function r(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function l(x,m){return x=Qn(x,m),x.index=0,x.sibling=null,x}function a(x,m,p){return x.index=p,e?(p=x.alternate,p!==null?(p=p.index,p<m?(x.flags|=2,m):p):(x.flags|=2,m)):(x.flags|=1048576,m)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,m,p,S){return m===null||m.tag!==6?(m=ci(p,x.mode,S),m.return=x,m):(m=l(m,p),m.return=x,m)}function d(x,m,p,S){var R=p.type;return R===Dr?v(x,m,p.props.children,S,p.key):m!==null&&(m.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===In&&$u(R)===m.type)?(S=l(m,p.props),S.ref=Ms(x,m,p),S.return=x,S):(S=va(p.type,p.key,p.props,null,x.mode,S),S.ref=Ms(x,m,p),S.return=x,S)}function u(x,m,p,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=di(p,x.mode,S),m.return=x,m):(m=l(m,p.children||[]),m.return=x,m)}function v(x,m,p,S,R){return m===null||m.tag!==7?(m=br(p,x.mode,S,R),m.return=x,m):(m=l(m,p),m.return=x,m)}function y(x,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ci(""+m,x.mode,p),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vl:return p=va(m.type,m.key,m.props,null,x.mode,p),p.ref=Ms(x,null,m),p.return=x,p;case Fr:return m=di(m,x.mode,p),m.return=x,m;case In:var S=m._init;return y(x,S(m._payload),p)}if(As(m)||Es(m))return m=br(m,x.mode,p,null),m.return=x,m;ta(x,m)}return null}function b(x,m,p,S){var R=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return R!==null?null:c(x,m,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Vl:return p.key===R?d(x,m,p,S):null;case Fr:return p.key===R?u(x,m,p,S):null;case In:return R=p._init,b(x,m,R(p._payload),S)}if(As(p)||Es(p))return R!==null?null:v(x,m,p,S,null);ta(x,p)}return null}function C(x,m,p,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(p)||null,c(m,x,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vl:return x=x.get(S.key===null?p:S.key)||null,d(m,x,S,R);case Fr:return x=x.get(S.key===null?p:S.key)||null,u(m,x,S,R);case In:var g=S._init;return C(x,m,p,g(S._payload),R)}if(As(S)||Es(S))return x=x.get(p)||null,v(m,x,S,R,null);ta(m,S)}return null}function f(x,m,p,S){for(var R=null,g=null,$=m,T=m=0,q=null;$!==null&&T<p.length;T++){$.index>T?(q=$,$=null):q=$.sibling;var L=b(x,$,p[T],S);if(L===null){$===null&&($=q);break}e&&$&&L.alternate===null&&t(x,$),m=a(L,m,T),g===null?R=L:g.sibling=L,g=L,$=q}if(T===p.length)return n(x,$),Re&&mr(x,T),R;if($===null){for(;T<p.length;T++)$=y(x,p[T],S),$!==null&&(m=a($,m,T),g===null?R=$:g.sibling=$,g=$);return Re&&mr(x,T),R}for($=r(x,$);T<p.length;T++)q=C($,x,T,p[T],S),q!==null&&(e&&q.alternate!==null&&$.delete(q.key===null?T:q.key),m=a(q,m,T),g===null?R=q:g.sibling=q,g=q);return e&&$.forEach(function(B){return t(x,B)}),Re&&mr(x,T),R}function N(x,m,p,S){var R=Es(p);if(typeof R!="function")throw Error(D(150));if(p=R.call(p),p==null)throw Error(D(151));for(var g=R=null,$=m,T=m=0,q=null,L=p.next();$!==null&&!L.done;T++,L=p.next()){$.index>T?(q=$,$=null):q=$.sibling;var B=b(x,$,L.value,S);if(B===null){$===null&&($=q);break}e&&$&&B.alternate===null&&t(x,$),m=a(B,m,T),g===null?R=B:g.sibling=B,g=B,$=q}if(L.done)return n(x,$),Re&&mr(x,T),R;if($===null){for(;!L.done;T++,L=p.next())L=y(x,L.value,S),L!==null&&(m=a(L,m,T),g===null?R=L:g.sibling=L,g=L);return Re&&mr(x,T),R}for($=r(x,$);!L.done;T++,L=p.next())L=C($,x,T,L.value,S),L!==null&&(e&&L.alternate!==null&&$.delete(L.key===null?T:L.key),m=a(L,m,T),g===null?R=L:g.sibling=L,g=L);return e&&$.forEach(function(Z){return t(x,Z)}),Re&&mr(x,T),R}function _(x,m,p,S){if(typeof p=="object"&&p!==null&&p.type===Dr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Vl:e:{for(var R=p.key,g=m;g!==null;){if(g.key===R){if(R=p.type,R===Dr){if(g.tag===7){n(x,g.sibling),m=l(g,p.props.children),m.return=x,x=m;break e}}else if(g.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===In&&$u(R)===g.type){n(x,g.sibling),m=l(g,p.props),m.ref=Ms(x,g,p),m.return=x,x=m;break e}n(x,g);break}else t(x,g);g=g.sibling}p.type===Dr?(m=br(p.props.children,x.mode,S,p.key),m.return=x,x=m):(S=va(p.type,p.key,p.props,null,x.mode,S),S.ref=Ms(x,m,p),S.return=x,x=S)}return i(x);case Fr:e:{for(g=p.key;m!==null;){if(m.key===g)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(x,m.sibling),m=l(m,p.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=di(p,x.mode,S),m.return=x,x=m}return i(x);case In:return g=p._init,_(x,m,g(p._payload),S)}if(As(p))return f(x,m,p,S);if(Es(p))return N(x,m,p,S);ta(x,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(x,m.sibling),m=l(m,p),m.return=x,x=m):(n(x,m),m=ci(p,x.mode,S),m.return=x,x=m),i(x)):n(x,m)}return _}var cs=Yh(!0),Kh=Yh(!1),ja=tr(null),Oa=null,qr=null,td=null;function nd(){td=qr=Oa=null}function rd(e){var t=ja.current;Te(ja),e._currentValue=t}function Ji(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rs(e,t){Oa=e,td=qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xt=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(td!==e)if(e={context:e,memoizedValue:t,next:null},qr===null){if(Oa===null)throw Error(D(308));qr=e,Oa.dependencies={lanes:0,firstContext:e}}else qr=qr.next=e;return t}var gr=null;function sd(e){gr===null?gr=[e]:gr.push(e)}function Qh(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,sd(t)):(n.next=l.next,l.next=n),t.interleaved=n,Sn(e,r)}function Sn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function ld(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Sn(e,n)}return l=r.interleaved,l===null?(t.next=t,sd(r)):(t.next=l.next,l.next=t),r.interleaved=t,Sn(e,n)}function ma(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vc(e,n)}}function Pu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?l=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?l=a=t:a=a.next=t}else l=a=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Aa(e,t,n,r){var l=e.updateQueue;jn=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var d=c,u=d.next;d.next=null,i===null?a=u:i.next=u,i=d;var v=e.alternate;v!==null&&(v=v.updateQueue,c=v.lastBaseUpdate,c!==i&&(c===null?v.firstBaseUpdate=u:c.next=u,v.lastBaseUpdate=d))}if(a!==null){var y=l.baseState;i=0,v=u=d=null,c=a;do{var b=c.lane,C=c.eventTime;if((r&b)===b){v!==null&&(v=v.next={eventTime:C,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var f=e,N=c;switch(b=t,C=n,N.tag){case 1:if(f=N.payload,typeof f=="function"){y=f.call(C,y,b);break e}y=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=N.payload,b=typeof f=="function"?f.call(C,y,b):f,b==null)break e;y=Ie({},y,b);break e;case 2:jn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,b=l.effects,b===null?l.effects=[c]:b.push(c))}else C={eventTime:C,lane:b,tag:c.tag,payload:c.payload,callback:c.callback,next:null},v===null?(u=v=C,d=y):v=v.next=C,i|=b;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;b=c,c=b.next,b.next=null,l.lastBaseUpdate=b,l.shared.pending=null}}while(1);if(v===null&&(d=y),l.baseState=d,l.firstBaseUpdate=u,l.lastBaseUpdate=v,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);Sr|=i,e.lanes=i,e.memoizedState=y}}function Tu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(D(191,l));l.call(r)}}}var Cl={},cn=tr(Cl),cl=tr(Cl),dl=tr(Cl);function xr(e){if(e===Cl)throw Error(D(174));return e}function ad(e,t){switch(Ee(dl,t),Ee(cl,e),Ee(cn,Cl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mi(t,e)}Te(cn),Ee(cn,t)}function ds(){Te(cn),Te(cl),Te(dl)}function Gh(e){xr(dl.current);var t=xr(cn.current),n=Mi(t,e.type);t!==n&&(Ee(cl,e),Ee(cn,n))}function od(e){cl.current===e&&(Te(cn),Te(cl))}var ze=tr(0);function Ua(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ri=[];function id(){for(var e=0;e<ri.length;e++)ri[e]._workInProgressVersionPrimary=null;ri.length=0}var ha=En.ReactCurrentDispatcher,si=En.ReactCurrentBatchConfig,kr=0,Le=null,He=null,Xe=null,Ba=!1,Xs=!1,ul=0,lx=0;function nt(){throw Error(D(321))}function cd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function dd(e,t,n,r,l,a){if(kr=a,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=e===null||e.memoizedState===null?cx:dx,e=n(r,l),Xs){a=0;do{if(Xs=!1,ul=0,25<=a)throw Error(D(301));a+=1,Xe=He=null,t.updateQueue=null,ha.current=ux,e=n(r,l)}while(Xs)}if(ha.current=Fa,t=He!==null&&He.next!==null,kr=0,Xe=He=Le=null,Ba=!1,t)throw Error(D(300));return e}function ud(){var e=ul!==0;return ul=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Le.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function At(){if(He===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Xe===null?Le.memoizedState:Xe.next;if(t!==null)Xe=t,He=e;else{if(e===null)throw Error(D(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?Le.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function ml(e,t){return typeof t=="function"?t(e):t}function li(e){var t=At(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=He,l=r.baseQueue,a=n.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}r.baseQueue=l=a,n.pending=null}if(l!==null){a=l.next,r=r.baseState;var c=i=null,d=null,u=a;do{var v=u.lane;if((kr&v)===v)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var y={lane:v,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=y,i=r):d=d.next=y,Le.lanes|=v,Sr|=v}u=u.next}while(u!==null&&u!==a);d===null?i=r:d.next=c,Gt(r,t.memoizedState)||(xt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do a=l.lane,Le.lanes|=a,Sr|=a,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ai(e){var t=At(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,a=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);Gt(a,t.memoizedState)||(xt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Jh(){}function Zh(e,t){var n=Le,r=At(),l=t(),a=!Gt(r.memoizedState,l);if(a&&(r.memoizedState=l,xt=!0),r=r.queue,md(n0.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,hl(9,t0.bind(null,n,r,l,t),void 0,null),Ye===null)throw Error(D(349));kr&30||e0(n,t,l)}return l}function e0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function t0(e,t,n,r){t.value=n,t.getSnapshot=r,r0(t)&&s0(e)}function n0(e,t,n){return n(function(){r0(t)&&s0(e)})}function r0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch{return!0}}function s0(e){var t=Sn(e,1);t!==null&&Qt(t,e,1,-1)}function Ru(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:e},t.queue=e,e=e.dispatch=ix.bind(null,Le,e),[t.memoizedState,e]}function hl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function l0(){return At().memoizedState}function fa(e,t,n,r){var l=ln();Le.flags|=e,l.memoizedState=hl(1|t,n,void 0,r===void 0?null:r)}function io(e,t,n,r){var l=At();r=r===void 0?null:r;var a=void 0;if(He!==null){var i=He.memoizedState;if(a=i.destroy,r!==null&&cd(r,i.deps)){l.memoizedState=hl(t,n,a,r);return}}Le.flags|=e,l.memoizedState=hl(1|t,n,a,r)}function Mu(e,t){return fa(8390656,8,e,t)}function md(e,t){return io(2048,8,e,t)}function a0(e,t){return io(4,2,e,t)}function o0(e,t){return io(4,4,e,t)}function i0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function c0(e,t,n){return n=n!=null?n.concat([e]):null,io(4,4,i0.bind(null,t,e),n)}function hd(){}function d0(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function u0(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function m0(e,t,n){return kr&21?(Gt(n,t)||(n=xh(),Le.lanes|=n,Sr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=n)}function ax(e,t){var n=Se;Se=n!==0&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{Se=n,si.transition=r}}function h0(){return At().memoizedState}function ox(e,t,n){var r=Kn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},f0(e))p0(t,n);else if(n=Qh(e,t,n,r),n!==null){var l=ut();Qt(n,e,r,l),g0(n,t,r)}}function ix(e,t,n){var r=Kn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(f0(e))p0(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,c=a(i,n);if(l.hasEagerState=!0,l.eagerState=c,Gt(c,i)){var d=t.interleaved;d===null?(l.next=l,sd(t)):(l.next=d.next,d.next=l),t.interleaved=l;return}}catch{}finally{}n=Qh(e,t,l,r),n!==null&&(l=ut(),Qt(n,e,r,l),g0(n,t,r))}}function f0(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function p0(e,t){Xs=Ba=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function g0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vc(e,n)}}var Fa={readContext:Ot,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},cx={readContext:Ot,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Mu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,fa(4194308,4,i0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fa(4194308,4,e,t)},useInsertionEffect:function(e,t){return fa(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ox.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:Ru,useDebugValue:hd,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=Ru(!1),t=e[0];return e=ax.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,l=ln();if(Re){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ye===null)throw Error(D(349));kr&30||e0(r,t,n)}l.memoizedState=n;var a={value:n,getSnapshot:t};return l.queue=a,Mu(n0.bind(null,r,a,e),[e]),r.flags|=2048,hl(9,t0.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ln(),t=Ye.identifierPrefix;if(Re){var n=yn,r=vn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ul++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dx={readContext:Ot,useCallback:d0,useContext:Ot,useEffect:md,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:u0,useReducer:li,useRef:l0,useState:function(){return li(ml)},useDebugValue:hd,useDeferredValue:function(e){var t=At();return m0(t,He.memoizedState,e)},useTransition:function(){var e=li(ml)[0],t=At().memoizedState;return[e,t]},useMutableSource:Jh,useSyncExternalStore:Zh,useId:h0,unstable_isNewReconciler:!1},ux={readContext:Ot,useCallback:d0,useContext:Ot,useEffect:md,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:u0,useReducer:ai,useRef:l0,useState:function(){return ai(ml)},useDebugValue:hd,useDeferredValue:function(e){var t=At();return He===null?t.memoizedState=e:m0(t,He.memoizedState,e)},useTransition:function(){var e=ai(ml)[0],t=At().memoizedState;return[e,t]},useMutableSource:Jh,useSyncExternalStore:Zh,useId:h0,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Zi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var co={isMounted:function(e){return(e=e._reactInternals)?Pr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),l=Kn(e),a=bn(r,l);a.payload=t,n!=null&&(a.callback=n),t=Xn(e,a,l),t!==null&&(Qt(t,e,l,r),ma(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),l=Kn(e),a=bn(r,l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Xn(e,a,l),t!==null&&(Qt(t,e,l,r),ma(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=Kn(e),l=bn(n,r);l.tag=2,t!=null&&(l.callback=t),t=Xn(e,l,r),t!==null&&(Qt(t,e,r,n),ma(t,e,r))}};function zu(e,t,n,r,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!ll(n,r)||!ll(l,a):!0}function x0(e,t,n){var r=!1,l=Zn,a=t.contextType;return typeof a=="object"&&a!==null?a=Ot(a):(l=yt(t)?Nr:at.current,r=t.contextTypes,a=(r=r!=null)?os(e,l):Zn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=co,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function Lu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&co.enqueueReplaceState(t,t.state,null)}function ec(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},ld(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=Ot(a):(a=yt(t)?Nr:at.current,l.context=os(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Zi(e,t,a,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&co.enqueueReplaceState(l,l.state,null),Aa(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do n+=Up(r),r=r.return;while(r);var l=n}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function oi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mx=typeof WeakMap=="function"?WeakMap:Map;function v0(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ha||(Ha=!0,uc=r),tc(e,t)},n}function y0(e,t,n){n=bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){tc(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){tc(e,t),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Iu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mx;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=_x.bind(null,e,t,n),t.then(e,e))}function ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ou(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,Xn(n,t,1))),n.lanes|=1),e)}var hx=En.ReactCurrentOwner,xt=!1;function dt(e,t,n,r){t.child=e===null?Kh(t,null,n,r):cs(t,e.child,n,r)}function Au(e,t,n,r,l){n=n.render;var a=t.ref;return rs(t,l),r=dd(e,t,n,r,a,l),n=ud(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Cn(e,t,l)):(Re&&n&&Jc(t),t.flags|=1,dt(e,t,r,l),t.child)}function Uu(e,t,n,r,l){if(e===null){var a=n.type;return typeof a=="function"&&!Nd(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,b0(e,t,a,r,l)):(e=va(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:ll,n(i,r)&&e.ref===t.ref)return Cn(e,t,l)}return t.flags|=1,e=Qn(a,r),e.ref=t.ref,e.return=t,t.child=e}function b0(e,t,n,r,l){if(e!==null){var a=e.memoizedProps;if(ll(a,r)&&e.ref===t.ref)if(xt=!1,t.pendingProps=r=a,(e.lanes&l)!==0)e.flags&131072&&(xt=!0);else return t.lanes=e.lanes,Cn(e,t,l)}return nc(e,t,n,r,l)}function N0(e,t,n){var r=t.pendingProps,l=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Jr,St),St|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(Jr,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ee(Jr,St),St|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ee(Jr,St),St|=r;return dt(e,t,l,n),t.child}function w0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nc(e,t,n,r,l){var a=yt(n)?Nr:at.current;return a=os(t,a),rs(t,l),n=dd(e,t,n,r,a,l),r=ud(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Cn(e,t,l)):(Re&&r&&Jc(t),t.flags|=1,dt(e,t,n,l),t.child)}function Bu(e,t,n,r,l){if(yt(n)){var a=!0;za(t)}else a=!1;if(rs(t,l),t.stateNode===null)pa(e,t),x0(t,n,r),ec(t,n,r,l),r=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var d=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=yt(n)?Nr:at.current,u=os(t,u));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==r||d!==u)&&Lu(t,i,r,u),jn=!1;var b=t.memoizedState;i.state=b,Aa(t,r,i,l),d=t.memoizedState,c!==r||b!==d||vt.current||jn?(typeof v=="function"&&(Zi(t,n,v,r),d=t.memoizedState),(c=jn||zu(t,n,c,r,b,d,u))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),i.props=r,i.state=d,i.context=u,r=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,qh(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Wt(t.type,c),i.props=u,y=t.pendingProps,b=i.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ot(d):(d=yt(n)?Nr:at.current,d=os(t,d));var C=n.getDerivedStateFromProps;(v=typeof C=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==y||b!==d)&&Lu(t,i,r,d),jn=!1,b=t.memoizedState,i.state=b,Aa(t,r,i,l);var f=t.memoizedState;c!==y||b!==f||vt.current||jn?(typeof C=="function"&&(Zi(t,n,C,r),f=t.memoizedState),(u=jn||zu(t,n,u,r,b,f,d)||!1)?(v||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,f,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,f,d)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=d,r=u):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),r=!1)}return rc(e,t,n,r,a,l)}function rc(e,t,n,r,l,a){w0(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return l&&Cu(t,n,!1),Cn(e,t,a);r=t.stateNode,hx.current=t;var c=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=cs(t,e.child,null,a),t.child=cs(t,null,c,a)):dt(e,t,c,a),t.memoizedState=r.state,l&&Cu(t,n,!0),t.child}function k0(e){var t=e.stateNode;t.pendingContext?Su(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Su(e,t.context,!1),ad(e,t.containerInfo)}function Fu(e,t,n,r,l){return is(),ed(l),t.flags|=256,dt(e,t,n,r),t.child}var sc={dehydrated:null,treeContext:null,retryLane:0};function lc(e){return{baseLanes:e,cachePool:null,transitions:null}}function S0(e,t,n){var r=t.pendingProps,l=ze.current,a=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ee(ze,l&1),e===null)return Gi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=ho(i,r,0,null),e=br(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=lc(n),t.memoizedState=sc,e):fd(t,i));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return fx(e,t,i,r,c,l,n);if(a){a=r.fallback,i=t.mode,l=e.child,c=l.sibling;var d={mode:"hidden",children:r.children};return!(i&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Qn(l,d),r.subtreeFlags=l.subtreeFlags&14680064),c!==null?a=Qn(c,a):(a=br(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?lc(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=sc,r}return a=e.child,e=a.sibling,r=Qn(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function fd(e,t){return t=ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function na(e,t,n,r){return r!==null&&ed(r),cs(t,e.child,null,n),e=fd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fx(e,t,n,r,l,a,i){if(n)return t.flags&256?(t.flags&=-257,r=oi(Error(D(422))),na(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,l=t.mode,r=ho({mode:"visible",children:r.children},l,0,null),a=br(a,l,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&cs(t,e.child,null,i),t.child.memoizedState=lc(i),t.memoizedState=sc,a);if(!(t.mode&1))return na(e,t,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(D(419)),r=oi(a,r,void 0),na(e,t,i,r)}if(c=(i&e.childLanes)!==0,xt||c){if(r=Ye,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,Sn(e,l),Qt(r,e,l,-1))}return bd(),r=oi(Error(D(421))),na(e,t,i,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Ex.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Ct=Wn(l.nextSibling),_t=t,Re=!0,Yt=null,e!==null&&(zt[Lt++]=vn,zt[Lt++]=yn,zt[Lt++]=wr,vn=e.id,yn=e.overflow,wr=t),t=fd(t,r.children),t.flags|=4096,t)}function Du(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ji(e.return,t,n)}function ii(e,t,n,r,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=l)}function C0(e,t,n){var r=t.pendingProps,l=r.revealOrder,a=r.tail;if(dt(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Du(e,n,t);else if(e.tag===19)Du(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ee(ze,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Ua(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ii(t,!1,l,n,a);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ua(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ii(t,!0,n,null,a);break;case"together":ii(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Sr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=Qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function px(e,t,n){switch(t.tag){case 3:k0(t),is();break;case 5:Gh(t);break;case 1:yt(t.type)&&za(t);break;case 4:ad(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Ee(ja,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ee(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?S0(e,t,n):(Ee(ze,ze.current&1),e=Cn(e,t,n),e!==null?e.sibling:null);Ee(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return C0(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ee(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,N0(e,t,n)}return Cn(e,t,n)}var _0,ac,E0,$0;_0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ac=function(){};E0=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,xr(cn.current);var a=null;switch(n){case"input":l=$i(e,l),r=$i(e,r),a=[];break;case"select":l=Ie({},l,{value:void 0}),r=Ie({},r,{value:void 0}),a=[];break;case"textarea":l=Ri(e,l),r=Ri(e,r),a=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ra)}zi(n,r);var i;n=null;for(u in l)if(!r.hasOwnProperty(u)&&l.hasOwnProperty(u)&&l[u]!=null)if(u==="style"){var c=l[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Js.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var d=r[u];if(c=l!=null?l[u]:void 0,r.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(i in c)!c.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in d)d.hasOwnProperty(i)&&c[i]!==d[i]&&(n||(n={}),n[i]=d[i])}else n||(a||(a=[]),a.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Js.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Pe("scroll",e),a||c===d||(a=[])):(a=a||[]).push(u,d))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};$0=function(e,t,n,r){n!==r&&(t.flags|=4)};function zs(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function gx(e,t,n){var r=t.pendingProps;switch(Zc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return yt(t.type)&&Ma(),rt(t),null;case 3:return r=t.stateNode,ds(),Te(vt),Te(at),id(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ea(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yt!==null&&(fc(Yt),Yt=null))),ac(e,t),rt(t),null;case 5:od(t);var l=xr(dl.current);if(n=t.type,e!==null&&t.stateNode!=null)E0(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return rt(t),null}if(e=xr(cn.current),ea(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[an]=t,r[il]=a,e=(t.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(l=0;l<Bs.length;l++)Pe(Bs[l],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Gd(r,a),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Pe("invalid",r);break;case"textarea":Zd(r,a),Pe("invalid",r)}zi(n,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Zl(r.textContent,c,e),l=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Zl(r.textContent,c,e),l=["children",""+c]):Js.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Wl(r),Jd(r,a,!0);break;case"textarea":Wl(r),eu(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ra)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[an]=t,e[il]=r,_0(e,t,!1,!1),t.stateNode=e;e:{switch(i=Li(n,r),n){case"dialog":Pe("cancel",e),Pe("close",e),l=r;break;case"iframe":case"object":case"embed":Pe("load",e),l=r;break;case"video":case"audio":for(l=0;l<Bs.length;l++)Pe(Bs[l],e);l=r;break;case"source":Pe("error",e),l=r;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),l=r;break;case"details":Pe("toggle",e),l=r;break;case"input":Gd(e,r),l=$i(e,r),Pe("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Ie({},r,{value:void 0}),Pe("invalid",e);break;case"textarea":Zd(e,r),l=Ri(e,r),Pe("invalid",e);break;default:l=r}zi(n,l),c=l;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?lh(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&rh(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Zs(e,d):typeof d=="number"&&Zs(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Js.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Pe("scroll",e):d!=null&&Ac(e,a,d,i))}switch(n){case"input":Wl(e),Jd(e,r,!1);break;case"textarea":Wl(e),eu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Jn(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Zr(e,!!r.multiple,a,!1):r.defaultValue!=null&&Zr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ra)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)$0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=xr(dl.current),xr(cn.current),ea(t)){if(r=t.stateNode,n=t.memoizedProps,r[an]=t,(a=r.nodeValue!==n)&&(e=_t,e!==null))switch(e.tag){case 3:Zl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zl(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=t,t.stateNode=r}return rt(t),null;case 13:if(Te(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&Ct!==null&&t.mode&1&&!(t.flags&128))Xh(),is(),t.flags|=98560,a=!1;else if(a=ea(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(D(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(D(317));a[an]=t}else is(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rt(t),a=!1}else Yt!==null&&(fc(Yt),Yt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Ve===0&&(Ve=3):bd())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return ds(),ac(e,t),e===null&&al(t.stateNode.containerInfo),rt(t),null;case 10:return rd(t.type._context),rt(t),null;case 17:return yt(t.type)&&Ma(),rt(t),null;case 19:if(Te(ze),a=t.memoizedState,a===null)return rt(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)zs(a,!1);else{if(Ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ua(e),i!==null){for(t.flags|=128,zs(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee(ze,ze.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ae()>ms&&(t.flags|=128,r=!0,zs(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ua(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Re)return rt(t),null}else 2*Ae()-a.renderingStartTime>ms&&n!==1073741824&&(t.flags|=128,r=!0,zs(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ae(),t.sibling=null,n=ze.current,Ee(ze,r?n&1|2:n&1),t):(rt(t),null);case 22:case 23:return yd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?St&1073741824&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function xx(e,t){switch(Zc(t),t.tag){case 1:return yt(t.type)&&Ma(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ds(),Te(vt),Te(at),id(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return od(t),null;case 13:if(Te(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(ze),null;case 4:return ds(),null;case 10:return rd(t.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var ra=!1,st=!1,vx=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Gr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function oc(e,t,n){try{n()}catch(r){je(e,t,r)}}var Hu=!1;function yx(e,t){if(Vi=$a,e=zh(),Gc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,c=-1,d=-1,u=0,v=0,y=e,b=null;t:for(;;){for(var C;y!==n||l!==0&&y.nodeType!==3||(c=i+l),y!==a||r!==0&&y.nodeType!==3||(d=i+r),y.nodeType===3&&(i+=y.nodeValue.length),(C=y.firstChild)!==null;)b=y,y=C;for(;;){if(y===e)break t;if(b===n&&++u===l&&(c=i),b===a&&++v===r&&(d=i),(C=y.nextSibling)!==null)break;y=b,b=y.parentNode}y=C}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wi={focusedElem:e,selectionRange:n},$a=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var N=f.memoizedProps,_=f.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?N:Wt(t.type,N),_);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){je(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return f=Hu,Hu=!1,f}function Ys(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&oc(t,n,a)}l=l.next}while(l!==r)}}function uo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function P0(e){var t=e.alternate;t!==null&&(e.alternate=null,P0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[il],delete t[Ki],delete t[tx],delete t[nx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function T0(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||T0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ra));else if(r!==4&&(e=e.child,e!==null))for(cc(e,t,n),e=e.sibling;e!==null;)cc(e,t,n),e=e.sibling}function dc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dc(e,t,n),e=e.sibling;e!==null;)dc(e,t,n),e=e.sibling}var qe=null,Xt=!1;function Mn(e,t,n){for(n=n.child;n!==null;)R0(e,t,n),n=n.sibling}function R0(e,t,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(no,n)}catch{}switch(n.tag){case 5:st||Gr(n,t);case 6:var r=qe,l=Xt;qe=null,Mn(e,t,n),qe=r,Xt=l,qe!==null&&(Xt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Xt?(e=qe,n=n.stateNode,e.nodeType===8?ti(e.parentNode,n):e.nodeType===1&&ti(e,n),rl(e)):ti(qe,n.stateNode));break;case 4:r=qe,l=Xt,qe=n.stateNode.containerInfo,Xt=!0,Mn(e,t,n),qe=r,Xt=l;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&oc(n,t,i),l=l.next}while(l!==r)}Mn(e,t,n);break;case 1:if(!st&&(Gr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){je(n,t,c)}Mn(e,t,n);break;case 21:Mn(e,t,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,Mn(e,t,n),st=r):Mn(e,t,n);break;default:Mn(e,t,n)}}function Wu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vx),t.forEach(function(r){var l=$x.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Ht(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var a=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:qe=c.stateNode,Xt=!1;break e;case 3:qe=c.stateNode.containerInfo,Xt=!0;break e;case 4:qe=c.stateNode.containerInfo,Xt=!0;break e}c=c.return}if(qe===null)throw Error(D(160));R0(a,i,l),qe=null,Xt=!1;var d=l.alternate;d!==null&&(d.return=null),l.return=null}catch(u){je(l,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M0(t,e),t=t.sibling}function M0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ht(t,e),rn(e),r&4){try{Ys(3,e,e.return),uo(3,e)}catch(N){je(e,e.return,N)}try{Ys(5,e,e.return)}catch(N){je(e,e.return,N)}}break;case 1:Ht(t,e),rn(e),r&512&&n!==null&&Gr(n,n.return);break;case 5:if(Ht(t,e),rn(e),r&512&&n!==null&&Gr(n,n.return),e.flags&32){var l=e.stateNode;try{Zs(l,"")}catch(N){je(e,e.return,N)}}if(r&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&eh(l,a),Li(c,i);var u=Li(c,a);for(i=0;i<d.length;i+=2){var v=d[i],y=d[i+1];v==="style"?lh(l,y):v==="dangerouslySetInnerHTML"?rh(l,y):v==="children"?Zs(l,y):Ac(l,v,y,u)}switch(c){case"input":Pi(l,a);break;case"textarea":th(l,a);break;case"select":var b=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var C=a.value;C!=null?Zr(l,!!a.multiple,C,!1):b!==!!a.multiple&&(a.defaultValue!=null?Zr(l,!!a.multiple,a.defaultValue,!0):Zr(l,!!a.multiple,a.multiple?[]:"",!1))}l[il]=a}catch(N){je(e,e.return,N)}}break;case 6:if(Ht(t,e),rn(e),r&4){if(e.stateNode===null)throw Error(D(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(N){je(e,e.return,N)}}break;case 3:if(Ht(t,e),rn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rl(t.containerInfo)}catch(N){je(e,e.return,N)}break;case 4:Ht(t,e),rn(e);break;case 13:Ht(t,e),rn(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(xd=Ae())),r&4&&Wu(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(st=(u=st)||v,Ht(t,e),st=u):Ht(t,e),rn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!v&&e.mode&1)for(ne=e,v=e.child;v!==null;){for(y=ne=v;ne!==null;){switch(b=ne,C=b.child,b.tag){case 0:case 11:case 14:case 15:Ys(4,b,b.return);break;case 1:Gr(b,b.return);var f=b.stateNode;if(typeof f.componentWillUnmount=="function"){r=b,n=b.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(N){je(r,n,N)}}break;case 5:Gr(b,b.return);break;case 22:if(b.memoizedState!==null){Yu(y);continue}}C!==null?(C.return=b,ne=C):Yu(y)}v=v.sibling}e:for(v=null,y=e;;){if(y.tag===5){if(v===null){v=y;try{l=y.stateNode,u?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=y.stateNode,d=y.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=sh("display",i))}catch(N){je(e,e.return,N)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=u?"":y.memoizedProps}catch(N){je(e,e.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ht(t,e),rn(e),r&4&&Wu(e);break;case 21:break;default:Ht(t,e),rn(e)}}function rn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(T0(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Zs(l,""),r.flags&=-33);var a=Vu(e);dc(e,a,l);break;case 3:case 4:var i=r.stateNode.containerInfo,c=Vu(e);cc(e,c,i);break;default:throw Error(D(161))}}catch(d){je(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bx(e,t,n){ne=e,z0(e)}function z0(e,t,n){for(var r=(e.mode&1)!==0;ne!==null;){var l=ne,a=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||ra;if(!i){var c=l.alternate,d=c!==null&&c.memoizedState!==null||st;c=ra;var u=st;if(ra=i,(st=d)&&!u)for(ne=l;ne!==null;)i=ne,d=i.child,i.tag===22&&i.memoizedState!==null?Ku(l):d!==null?(d.return=i,ne=d):Ku(l);for(;a!==null;)ne=a,z0(a),a=a.sibling;ne=l,ra=c,st=u}Xu(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,ne=a):Xu(e)}}function Xu(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||uo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!st)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Tu(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tu(t,i,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var v=u.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&rl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}st||t.flags&512&&ic(t)}catch(b){je(t,t.return,b)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function Yu(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function Ku(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{uo(4,t)}catch(d){je(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(d){je(t,l,d)}}var a=t.return;try{ic(t)}catch(d){je(t,a,d)}break;case 5:var i=t.return;try{ic(t)}catch(d){je(t,i,d)}}}catch(d){je(t,t.return,d)}if(t===e){ne=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ne=c;break}ne=t.return}}var Nx=Math.ceil,Da=En.ReactCurrentDispatcher,pd=En.ReactCurrentOwner,jt=En.ReactCurrentBatchConfig,ye=0,Ye=null,Be=null,Ge=0,St=0,Jr=tr(0),Ve=0,fl=null,Sr=0,mo=0,gd=0,Ks=null,gt=null,xd=0,ms=1/0,gn=null,Ha=!1,uc=null,Yn=null,sa=!1,Bn=null,Va=0,Qs=0,mc=null,ga=-1,xa=0;function ut(){return ye&6?Ae():ga!==-1?ga:ga=Ae()}function Kn(e){return e.mode&1?ye&2&&Ge!==0?Ge&-Ge:sx.transition!==null?(xa===0&&(xa=xh()),xa):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Sh(e.type)),e):1}function Qt(e,t,n,r){if(50<Qs)throw Qs=0,mc=null,Error(D(185));wl(e,n,r),(!(ye&2)||e!==Ye)&&(e===Ye&&(!(ye&2)&&(mo|=n),Ve===4&&An(e,Ge)),bt(e,r),n===1&&ye===0&&!(t.mode&1)&&(ms=Ae()+500,oo&&nr()))}function bt(e,t){var n=e.callbackNode;sg(e,t);var r=Ea(e,e===Ye?Ge:0);if(r===0)n!==null&&ru(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ru(n),t===1)e.tag===0?rx(Qu.bind(null,e)):Hh(Qu.bind(null,e)),Zg(function(){!(ye&6)&&nr()}),n=null;else{switch(vh(r)){case 1:n=Hc;break;case 4:n=ph;break;case 16:n=_a;break;case 536870912:n=gh;break;default:n=_a}n=F0(n,L0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function L0(e,t){if(ga=-1,xa=0,ye&6)throw Error(D(327));var n=e.callbackNode;if(ss()&&e.callbackNode!==n)return null;var r=Ea(e,e===Ye?Ge:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Wa(e,r);else{t=r;var l=ye;ye|=2;var a=j0();(Ye!==e||Ge!==t)&&(gn=null,ms=Ae()+500,yr(e,t));do try{Sx();break}catch(c){I0(e,c)}while(1);nd(),Da.current=a,ye=l,Be!==null?t=0:(Ye=null,Ge=0,t=Ve)}if(t!==0){if(t===2&&(l=Ui(e),l!==0&&(r=l,t=hc(e,l))),t===1)throw n=fl,yr(e,0),An(e,r),bt(e,Ae()),n;if(t===6)An(e,r);else{if(l=e.current.alternate,!(r&30)&&!wx(l)&&(t=Wa(e,r),t===2&&(a=Ui(e),a!==0&&(r=a,t=hc(e,a))),t===1))throw n=fl,yr(e,0),An(e,r),bt(e,Ae()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:hr(e,gt,gn);break;case 3:if(An(e,r),(r&130023424)===r&&(t=xd+500-Ae(),10<t)){if(Ea(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Yi(hr.bind(null,e,gt,gn),t);break}hr(e,gt,gn);break;case 4:if(An(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var i=31-Kt(r);a=1<<i,i=t[i],i>l&&(l=i),r&=~a}if(r=l,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nx(r/1960))-r,10<r){e.timeoutHandle=Yi(hr.bind(null,e,gt,gn),r);break}hr(e,gt,gn);break;case 5:hr(e,gt,gn);break;default:throw Error(D(329))}}}return bt(e,Ae()),e.callbackNode===n?L0.bind(null,e):null}function hc(e,t){var n=Ks;return e.current.memoizedState.isDehydrated&&(yr(e,t).flags|=256),e=Wa(e,t),e!==2&&(t=gt,gt=n,t!==null&&fc(t)),e}function fc(e){gt===null?gt=e:gt.push.apply(gt,e)}function wx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],a=l.getSnapshot;l=l.value;try{if(!Gt(a(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~gd,t&=~mo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function Qu(e){if(ye&6)throw Error(D(327));ss();var t=Ea(e,0);if(!(t&1))return bt(e,Ae()),null;var n=Wa(e,t);if(e.tag!==0&&n===2){var r=Ui(e);r!==0&&(t=r,n=hc(e,r))}if(n===1)throw n=fl,yr(e,0),An(e,t),bt(e,Ae()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hr(e,gt,gn),bt(e,Ae()),null}function vd(e,t){var n=ye;ye|=1;try{return e(t)}finally{ye=n,ye===0&&(ms=Ae()+500,oo&&nr())}}function Cr(e){Bn!==null&&Bn.tag===0&&!(ye&6)&&ss();var t=ye;ye|=1;var n=jt.transition,r=Se;try{if(jt.transition=null,Se=1,e)return e()}finally{Se=r,jt.transition=n,ye=t,!(ye&6)&&nr()}}function yd(){St=Jr.current,Te(Jr)}function yr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Jg(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Zc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ma();break;case 3:ds(),Te(vt),Te(at),id();break;case 5:od(r);break;case 4:ds();break;case 13:Te(ze);break;case 19:Te(ze);break;case 10:rd(r.type._context);break;case 22:case 23:yd()}n=n.return}if(Ye=e,Be=e=Qn(e.current,null),Ge=St=t,Ve=0,fl=null,gd=mo=Sr=0,gt=Ks=null,gr!==null){for(t=0;t<gr.length;t++)if(n=gr[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=l,r.next=i}n.pending=r}gr=null}return e}function I0(e,t){do{var n=Be;try{if(nd(),ha.current=Fa,Ba){for(var r=Le.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Ba=!1}if(kr=0,Xe=He=Le=null,Xs=!1,ul=0,pd.current=null,n===null||n.return===null){Ve=1,fl=t,Be=null;break}e:{var a=e,i=n.return,c=n,d=t;if(t=Ge,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,v=c,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var b=v.alternate;b?(v.updateQueue=b.updateQueue,v.memoizedState=b.memoizedState,v.lanes=b.lanes):(v.updateQueue=null,v.memoizedState=null)}var C=ju(i);if(C!==null){C.flags&=-257,Ou(C,i,c,a,t),C.mode&1&&Iu(a,u,t),t=C,d=u;var f=t.updateQueue;if(f===null){var N=new Set;N.add(d),t.updateQueue=N}else f.add(d);break e}else{if(!(t&1)){Iu(a,u,t),bd();break e}d=Error(D(426))}}else if(Re&&c.mode&1){var _=ju(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Ou(_,i,c,a,t),ed(us(d,c));break e}}a=d=us(d,c),Ve!==4&&(Ve=2),Ks===null?Ks=[a]:Ks.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=v0(a,d,t);Pu(a,x);break e;case 1:c=d;var m=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Yn===null||!Yn.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=y0(a,c,t);Pu(a,S);break e}}a=a.return}while(a!==null)}A0(n)}catch(R){t=R,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(1)}function j0(){var e=Da.current;return Da.current=Fa,e===null?Fa:e}function bd(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Ye===null||!(Sr&268435455)&&!(mo&268435455)||An(Ye,Ge)}function Wa(e,t){var n=ye;ye|=2;var r=j0();(Ye!==e||Ge!==t)&&(gn=null,yr(e,t));do try{kx();break}catch(l){I0(e,l)}while(1);if(nd(),ye=n,Da.current=r,Be!==null)throw Error(D(261));return Ye=null,Ge=0,Ve}function kx(){for(;Be!==null;)O0(Be)}function Sx(){for(;Be!==null&&!Qp();)O0(Be)}function O0(e){var t=B0(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?A0(e):Be=t,pd.current=null}function A0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xx(n,t),n!==null){n.flags&=32767,Be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ve=6,Be=null;return}}else if(n=gx(n,t,St),n!==null){Be=n;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);Ve===0&&(Ve=5)}function hr(e,t,n){var r=Se,l=jt.transition;try{jt.transition=null,Se=1,Cx(e,t,n,r)}finally{jt.transition=l,Se=r}return null}function Cx(e,t,n,r){do ss();while(Bn!==null);if(ye&6)throw Error(D(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(lg(e,a),e===Ye&&(Be=Ye=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sa||(sa=!0,F0(_a,function(){return ss(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=jt.transition,jt.transition=null;var i=Se;Se=1;var c=ye;ye|=4,pd.current=null,yx(e,n),M0(n,e),Wg(Wi),$a=!!Vi,Wi=Vi=null,e.current=n,bx(n),qp(),ye=c,Se=i,jt.transition=a}else e.current=n;if(sa&&(sa=!1,Bn=e,Va=l),a=e.pendingLanes,a===0&&(Yn=null),Zp(n.stateNode),bt(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Ha)throw Ha=!1,e=uc,uc=null,e;return Va&1&&e.tag!==0&&ss(),a=e.pendingLanes,a&1?e===mc?Qs++:(Qs=0,mc=e):Qs=0,nr(),null}function ss(){if(Bn!==null){var e=vh(Va),t=jt.transition,n=Se;try{if(jt.transition=null,Se=16>e?16:e,Bn===null)var r=!1;else{if(e=Bn,Bn=null,Va=0,ye&6)throw Error(D(331));var l=ye;for(ye|=4,ne=e.current;ne!==null;){var a=ne,i=a.child;if(ne.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(ne=u;ne!==null;){var v=ne;switch(v.tag){case 0:case 11:case 15:Ys(8,v,a)}var y=v.child;if(y!==null)y.return=v,ne=y;else for(;ne!==null;){v=ne;var b=v.sibling,C=v.return;if(P0(v),v===u){ne=null;break}if(b!==null){b.return=C,ne=b;break}ne=C}}}var f=a.alternate;if(f!==null){var N=f.child;if(N!==null){f.child=null;do{var _=N.sibling;N.sibling=null,N=_}while(N!==null)}}ne=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,ne=i;else e:for(;ne!==null;){if(a=ne,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ys(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ne=x;break e}ne=a.return}}var m=e.current;for(ne=m;ne!==null;){i=ne;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,ne=p;else e:for(i=m;ne!==null;){if(c=ne,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:uo(9,c)}}catch(R){je(c,c.return,R)}if(c===i){ne=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,ne=S;break e}ne=c.return}}if(ye=l,nr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(no,e)}catch{}r=!0}return r}finally{Se=n,jt.transition=t}}return!1}function qu(e,t,n){t=us(n,t),t=v0(e,t,1),e=Xn(e,t,1),t=ut(),e!==null&&(wl(e,1,t),bt(e,t))}function je(e,t,n){if(e.tag===3)qu(e,e,n);else for(;t!==null;){if(t.tag===3){qu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){e=us(n,e),e=y0(t,e,1),t=Xn(t,e,1),e=ut(),t!==null&&(wl(t,1,e),bt(t,e));break}}t=t.return}}function _x(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,Ye===e&&(Ge&n)===n&&(Ve===4||Ve===3&&(Ge&130023424)===Ge&&500>Ae()-xd?yr(e,0):gd|=n),bt(e,t)}function U0(e,t){t===0&&(e.mode&1?(t=Kl,Kl<<=1,!(Kl&130023424)&&(Kl=4194304)):t=1);var n=ut();e=Sn(e,t),e!==null&&(wl(e,t,n),bt(e,n))}function Ex(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),U0(e,n)}function $x(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),U0(e,n)}var B0;B0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vt.current)xt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return xt=!1,px(e,t,n);xt=!!(e.flags&131072)}else xt=!1,Re&&t.flags&1048576&&Vh(t,Ia,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;pa(e,t),e=t.pendingProps;var l=os(t,at.current);rs(t,n),l=dd(null,t,r,e,l,n);var a=ud();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yt(r)?(a=!0,za(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,ld(t),l.updater=co,t.stateNode=l,l._reactInternals=t,ec(t,r,e,n),t=rc(null,t,r,!0,a,n)):(t.tag=0,Re&&a&&Jc(t),dt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(pa(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Tx(r),e=Wt(r,e),l){case 0:t=nc(null,t,r,e,n);break e;case 1:t=Bu(null,t,r,e,n);break e;case 11:t=Au(null,t,r,e,n);break e;case 14:t=Uu(null,t,r,Wt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wt(r,l),nc(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wt(r,l),Bu(e,t,r,l,n);case 3:e:{if(k0(t),e===null)throw Error(D(387));r=t.pendingProps,a=t.memoizedState,l=a.element,qh(e,t),Aa(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=us(Error(D(423)),t),t=Fu(e,t,r,n,l);break e}else if(r!==l){l=us(Error(D(424)),t),t=Fu(e,t,r,n,l);break e}else for(Ct=Wn(t.stateNode.containerInfo.firstChild),_t=t,Re=!0,Yt=null,n=Kh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(is(),r===l){t=Cn(e,t,n);break e}dt(e,t,r,n)}t=t.child}return t;case 5:return Gh(t),e===null&&Gi(t),r=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,Xi(r,l)?i=null:a!==null&&Xi(r,a)&&(t.flags|=32),w0(e,t),dt(e,t,i,n),t.child;case 6:return e===null&&Gi(t),null;case 13:return S0(e,t,n);case 4:return ad(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=cs(t,null,r,n):dt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wt(r,l),Au(e,t,r,l,n);case 7:return dt(e,t,t.pendingProps,n),t.child;case 8:return dt(e,t,t.pendingProps.children,n),t.child;case 12:return dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,Ee(ja,r._currentValue),r._currentValue=i,a!==null)if(Gt(a.value,i)){if(a.children===l.children&&!vt.current){t=Cn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){i=a.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=bn(-1,n&-n),d.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Ji(a.return,n,t),c.lanes|=n;break}d=d.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(D(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ji(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}dt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,rs(t,n),l=Ot(l),r=r(l),t.flags|=1,dt(e,t,r,n),t.child;case 14:return r=t.type,l=Wt(r,t.pendingProps),l=Wt(r.type,l),Uu(e,t,r,l,n);case 15:return b0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wt(r,l),pa(e,t),t.tag=1,yt(r)?(e=!0,za(t)):e=!1,rs(t,n),x0(t,r,l),ec(t,r,l,n),rc(null,t,r,!0,e,n);case 19:return C0(e,t,n);case 22:return N0(e,t,n)}throw Error(D(156,t.tag))};function F0(e,t){return fh(e,t)}function Px(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,r){return new Px(e,t,n,r)}function Nd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tx(e){if(typeof e=="function")return Nd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bc)return 11;if(e===Fc)return 14}return 2}function Qn(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function va(e,t,n,r,l,a){var i=2;if(r=e,typeof e=="function")Nd(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Dr:return br(n.children,l,a,t);case Uc:i=8,l|=8;break;case Si:return e=It(12,n,t,l|2),e.elementType=Si,e.lanes=a,e;case Ci:return e=It(13,n,t,l),e.elementType=Ci,e.lanes=a,e;case _i:return e=It(19,n,t,l),e.elementType=_i,e.lanes=a,e;case Gm:return ho(n,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qm:i=10;break e;case qm:i=9;break e;case Bc:i=11;break e;case Fc:i=14;break e;case In:i=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=It(i,n,t,l),t.elementType=e,t.type=r,t.lanes=a,t}function br(e,t,n,r){return e=It(7,e,r,t),e.lanes=n,e}function ho(e,t,n,r){return e=It(22,e,r,t),e.elementType=Gm,e.lanes=n,e.stateNode={isHidden:!1},e}function ci(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function di(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rx(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vo(0),this.expirationTimes=Vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function wd(e,t,n,r,l,a,i,c,d){return e=new Rx(e,t,n,c,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=It(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ld(a),e}function Mx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function D0(e){if(!e)return Zn;e=e._reactInternals;e:{if(Pr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(yt(n))return Dh(e,n,t)}return t}function H0(e,t,n,r,l,a,i,c,d){return e=wd(n,r,!0,e,l,a,i,c,d),e.context=D0(null),n=e.current,r=ut(),l=Kn(n),a=bn(r,l),a.callback=t??null,Xn(n,a,l),e.current.lanes=l,wl(e,l,r),bt(e,r),e}function fo(e,t,n,r){var l=t.current,a=ut(),i=Kn(l);return n=D0(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xn(l,t,i),e!==null&&(Qt(e,l,i,a),ma(e,l,i)),i}function Xa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kd(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function zx(){return null}var V0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sd(e){this._internalRoot=e}po.prototype.render=Sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));fo(e,t,null,null)};po.prototype.unmount=Sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cr(function(){fo(null,e,null,null)}),t[kn]=null}};function po(e){this._internalRoot=e}po.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<On.length&&t!==0&&t<On[n].priority;n++);On.splice(n,0,e),n===0&&kh(e)}};function Cd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ju(){}function Lx(e,t,n,r,l){if(l){if(typeof r=="function"){var a=r;r=function(){var u=Xa(i);a.call(u)}}var i=H0(t,r,e,0,null,!1,!1,"",Ju);return e._reactRootContainer=i,e[kn]=i.current,al(e.nodeType===8?e.parentNode:e),Cr(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var c=r;r=function(){var u=Xa(d);c.call(u)}}var d=wd(e,0,!1,null,null,!1,!1,"",Ju);return e._reactRootContainer=d,e[kn]=d.current,al(e.nodeType===8?e.parentNode:e),Cr(function(){fo(t,d,n,r)}),d}function xo(e,t,n,r,l){var a=n._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var c=l;l=function(){var d=Xa(i);c.call(d)}}fo(t,i,e,l)}else i=Lx(n,t,e,l,r);return Xa(i)}yh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Us(t.pendingLanes);n!==0&&(Vc(t,n|1),bt(t,Ae()),!(ye&6)&&(ms=Ae()+500,nr()))}break;case 13:Cr(function(){var r=Sn(e,1);if(r!==null){var l=ut();Qt(r,e,1,l)}}),kd(e,1)}};Wc=function(e){if(e.tag===13){var t=Sn(e,134217728);if(t!==null){var n=ut();Qt(t,e,134217728,n)}kd(e,134217728)}};bh=function(e){if(e.tag===13){var t=Kn(e),n=Sn(e,t);if(n!==null){var r=ut();Qt(n,e,t,r)}kd(e,t)}};Nh=function(){return Se};wh=function(e,t){var n=Se;try{return Se=e,t()}finally{Se=n}};ji=function(e,t,n){switch(t){case"input":if(Pi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=ao(r);if(!l)throw Error(D(90));Zm(r),Pi(r,l)}}}break;case"textarea":th(e,n);break;case"select":t=n.value,t!=null&&Zr(e,!!n.multiple,t,!1)}};ih=vd;ch=Cr;var Ix={usingClientEntryPoint:!1,Events:[Sl,Xr,ao,ah,oh,vd]},Ls={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jx={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:En.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mh(e),e===null?null:e.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{no=la.inject(jx),on=la}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ix;Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cd(t))throw Error(D(200));return Mx(e,t,null,n)};Pt.createRoot=function(e,t){if(!Cd(e))throw Error(D(299));var n=!1,r="",l=V0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=wd(e,1,!1,null,null,n,!1,r,l),e[kn]=t.current,al(e.nodeType===8?e.parentNode:e),new Sd(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=mh(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return Cr(e)};Pt.hydrate=function(e,t,n){if(!go(t))throw Error(D(200));return xo(null,e,t,!0,n)};Pt.hydrateRoot=function(e,t,n){if(!Cd(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,l=!1,a="",i=V0;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=H0(t,null,e,1,n??null,l,!1,a,i),e[kn]=t.current,al(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new po(t)};Pt.render=function(e,t,n){if(!go(t))throw Error(D(200));return xo(null,e,t,!1,n)};Pt.unmountComponentAtNode=function(e){if(!go(e))throw Error(D(40));return e._reactRootContainer?(Cr(function(){xo(null,null,e,!1,function(){e._reactRootContainer=null,e[kn]=null})}),!0):!1};Pt.unstable_batchedUpdates=vd;Pt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!go(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return xo(e,t,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function W0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W0)}catch(e){console.error(e)}}W0(),Wm.exports=Pt;var Ox=Wm.exports,Zu=Ox;wi.createRoot=Zu.createRoot,wi.hydrateRoot=Zu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}var Fn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fn||(Fn={}));const em="popstate";function Ax(e){e===void 0&&(e={});function t(r,l){let{pathname:a,search:i,hash:c}=r.location;return pc("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(r,l){return typeof l=="string"?l:Ya(l)}return Bx(t,n,null,e)}function Fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function X0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ux(){return Math.random().toString(36).substr(2,8)}function tm(e,t){return{usr:e.state,key:e.key,idx:t}}function pc(e,t,n,r){return n===void 0&&(n=null),pl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xs(t):t,{state:n,key:t&&t.key||r||Ux()})}function Ya(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function xs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Bx(e,t,n,r){r===void 0&&(r={});let{window:l=document.defaultView,v5Compat:a=!1}=r,i=l.history,c=Fn.Pop,d=null,u=v();u==null&&(u=0,i.replaceState(pl({},i.state,{idx:u}),""));function v(){return(i.state||{idx:null}).idx}function y(){c=Fn.Pop;let _=v(),x=_==null?null:_-u;u=_,d&&d({action:c,location:N.location,delta:x})}function b(_,x){c=Fn.Push;let m=pc(N.location,_,x);n&&n(m,_),u=v()+1;let p=tm(m,u),S=N.createHref(m);try{i.pushState(p,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;l.location.assign(S)}a&&d&&d({action:c,location:N.location,delta:1})}function C(_,x){c=Fn.Replace;let m=pc(N.location,_,x);n&&n(m,_),u=v();let p=tm(m,u),S=N.createHref(m);i.replaceState(p,"",S),a&&d&&d({action:c,location:N.location,delta:0})}function f(_){let x=l.location.origin!=="null"?l.location.origin:l.location.href,m=typeof _=="string"?_:Ya(_);return m=m.replace(/ $/,"%20"),Fe(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let N={get action(){return c},get location(){return e(l,i)},listen(_){if(d)throw new Error("A history only accepts one active listener");return l.addEventListener(em,y),d=_,()=>{l.removeEventListener(em,y),d=null}},createHref(_){return t(l,_)},createURL:f,encodeLocation(_){let x=f(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:C,go(_){return i.go(_)}};return N}var nm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nm||(nm={}));function Fx(e,t,n){return n===void 0&&(n="/"),Dx(e,t,n,!1)}function Dx(e,t,n,r){let l=typeof t=="string"?xs(t):t,a=_d(l.pathname||"/",n);if(a==null)return null;let i=Y0(e);Hx(i);let c=null;for(let d=0;c==null&&d<i.length;++d){let u=ev(a);c=Jx(i[d],u,r)}return c}function Y0(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let l=(a,i,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};d.relativePath.startsWith("/")&&(Fe(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let u=qn([r,d.relativePath]),v=n.concat(d);a.children&&a.children.length>0&&(Fe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Y0(a.children,t,v,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:qx(u,a.index),routesMeta:v})};return e.forEach((a,i)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))l(a,i);else for(let d of K0(a.path))l(a,i,d)}),t}function K0(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return l?[a,""]:[a];let i=K0(r.join("/")),c=[];return c.push(...i.map(d=>d===""?a:[a,d].join("/"))),l&&c.push(...i),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Hx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Gx(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Vx=/^:[\w-]+$/,Wx=3,Xx=2,Yx=1,Kx=10,Qx=-2,rm=e=>e==="*";function qx(e,t){let n=e.split("/"),r=n.length;return n.some(rm)&&(r+=Qx),t&&(r+=Xx),n.filter(l=>!rm(l)).reduce((l,a)=>l+(Vx.test(a)?Wx:a===""?Yx:Kx),r)}function Gx(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function Jx(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,l={},a="/",i=[];for(let c=0;c<r.length;++c){let d=r[c],u=c===r.length-1,v=a==="/"?t:t.slice(a.length)||"/",y=sm({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},v),b=d.route;if(!y&&u&&n&&!r[r.length-1].route.index&&(y=sm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},v)),!y)return null;Object.assign(l,y.params),i.push({params:l,pathname:qn([a,y.pathname]),pathnameBase:sv(qn([a,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(a=qn([a,y.pathnameBase]))}return i}function sm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Zx(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let a=l[0],i=a.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:r.reduce((u,v,y)=>{let{paramName:b,isOptional:C}=v;if(b==="*"){let N=c[y]||"";i=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const f=c[y];return C&&!f?u[b]=void 0:u[b]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function Zx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),X0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function ev(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return X0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _d(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function tv(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?xs(e):e;return{pathname:n?n.startsWith("/")?n:nv(n,t):t,search:lv(r),hash:av(l)}}function nv(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ui(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rv(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Q0(e,t){let n=rv(e);return t?n.map((r,l)=>l===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function q0(e,t,n,r){r===void 0&&(r=!1);let l;typeof e=="string"?l=xs(e):(l=pl({},e),Fe(!l.pathname||!l.pathname.includes("?"),ui("?","pathname","search",l)),Fe(!l.pathname||!l.pathname.includes("#"),ui("#","pathname","hash",l)),Fe(!l.search||!l.search.includes("#"),ui("#","search","hash",l)));let a=e===""||l.pathname==="",i=a?"/":l.pathname,c;if(i==null)c=n;else{let y=t.length-1;if(!r&&i.startsWith("..")){let b=i.split("/");for(;b[0]==="..";)b.shift(),y-=1;l.pathname=b.join("/")}c=y>=0?t[y]:"/"}let d=tv(l,c),u=i&&i!=="/"&&i.endsWith("/"),v=(a||i===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||v)&&(d.pathname+="/"),d}const qn=e=>e.join("/").replace(/\/\/+/g,"/"),sv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,av=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ov(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const G0=["post","put","patch","delete"];new Set(G0);const iv=["get",...G0];new Set(iv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(this,arguments)}const Ed=h.createContext(null),cv=h.createContext(null),Tr=h.createContext(null),vo=h.createContext(null),rr=h.createContext({outlet:null,matches:[],isDataRoute:!1}),J0=h.createContext(null);function dv(e,t){let{relative:n}=t===void 0?{}:t;_l()||Fe(!1);let{basename:r,navigator:l}=h.useContext(Tr),{hash:a,pathname:i,search:c}=ef(e,{relative:n}),d=i;return r!=="/"&&(d=i==="/"?r:qn([r,i])),l.createHref({pathname:d,search:c,hash:a})}function _l(){return h.useContext(vo)!=null}function El(){return _l()||Fe(!1),h.useContext(vo).location}function Z0(e){h.useContext(Tr).static||h.useLayoutEffect(e)}function ot(){let{isDataRoute:e}=h.useContext(rr);return e?kv():uv()}function uv(){_l()||Fe(!1);let e=h.useContext(Ed),{basename:t,future:n,navigator:r}=h.useContext(Tr),{matches:l}=h.useContext(rr),{pathname:a}=El(),i=JSON.stringify(Q0(l,n.v7_relativeSplatPath)),c=h.useRef(!1);return Z0(()=>{c.current=!0}),h.useCallback(function(u,v){if(v===void 0&&(v={}),!c.current)return;if(typeof u=="number"){r.go(u);return}let y=q0(u,JSON.parse(i),a,v.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:qn([t,y.pathname])),(v.replace?r.replace:r.push)(y,v.state,v)},[t,r,i,a,e])}function Rr(){let{matches:e}=h.useContext(rr),t=e[e.length-1];return t?t.params:{}}function ef(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=h.useContext(Tr),{matches:l}=h.useContext(rr),{pathname:a}=El(),i=JSON.stringify(Q0(l,r.v7_relativeSplatPath));return h.useMemo(()=>q0(e,JSON.parse(i),a,n==="path"),[e,i,a,n])}function mv(e,t){return hv(e,t)}function hv(e,t,n,r){_l()||Fe(!1);let{navigator:l}=h.useContext(Tr),{matches:a}=h.useContext(rr),i=a[a.length-1],c=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let u=El(),v;if(t){var y;let _=typeof t=="string"?xs(t):t;d==="/"||(y=_.pathname)!=null&&y.startsWith(d)||Fe(!1),v=_}else v=u;let b=v.pathname||"/",C=b;if(d!=="/"){let _=d.replace(/^\//,"").split("/");C="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let f=Fx(e,{pathname:C}),N=vv(f&&f.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:qn([d,l.encodeLocation?l.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:qn([d,l.encodeLocation?l.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,r);return t&&N?h.createElement(vo.Provider,{value:{location:gl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Fn.Pop}},N):N}function fv(){let e=wv(),t=ov(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:l},n):null,a)}const pv=h.createElement(fv,null);class gv extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?h.createElement(rr.Provider,{value:this.props.routeContext},h.createElement(J0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xv(e){let{routeContext:t,match:n,children:r}=e,l=h.useContext(Ed);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(rr.Provider,{value:t},r)}function vv(e,t,n,r){var l;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,c=(l=n)==null?void 0:l.errors;if(c!=null){let v=i.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);v>=0||Fe(!1),i=i.slice(0,Math.min(i.length,v+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let v=0;v<i.length;v++){let y=i[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(u=v),y.route.id){let{loaderData:b,errors:C}=n,f=y.route.loader&&b[y.route.id]===void 0&&(!C||C[y.route.id]===void 0);if(y.route.lazy||f){d=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((v,y,b)=>{let C,f=!1,N=null,_=null;n&&(C=c&&y.route.id?c[y.route.id]:void 0,N=y.route.errorElement||pv,d&&(u<0&&b===0?(Sv("route-fallback",!1),f=!0,_=null):u===b&&(f=!0,_=y.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,b+1)),m=()=>{let p;return C?p=N:f?p=_:y.route.Component?p=h.createElement(y.route.Component,null):y.route.element?p=y.route.element:p=v,h.createElement(xv,{match:y,routeContext:{outlet:v,matches:x,isDataRoute:n!=null},children:p})};return n&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?h.createElement(gv,{location:n.location,revalidation:n.revalidation,component:N,error:C,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var tf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(tf||{}),Ka=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ka||{});function yv(e){let t=h.useContext(Ed);return t||Fe(!1),t}function bv(e){let t=h.useContext(cv);return t||Fe(!1),t}function Nv(e){let t=h.useContext(rr);return t||Fe(!1),t}function nf(e){let t=Nv(),n=t.matches[t.matches.length-1];return n.route.id||Fe(!1),n.route.id}function wv(){var e;let t=h.useContext(J0),n=bv(Ka.UseRouteError),r=nf(Ka.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function kv(){let{router:e}=yv(tf.UseNavigateStable),t=nf(Ka.UseNavigateStable),n=h.useRef(!1);return Z0(()=>{n.current=!0}),h.useCallback(function(l,a){a===void 0&&(a={}),n.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,gl({fromRouteId:t},a)))},[e,t])}const lm={};function Sv(e,t,n){!t&&!lm[e]&&(lm[e]=!0)}function Cv(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Qe(e){Fe(!1)}function _v(e){let{basename:t="/",children:n=null,location:r,navigationType:l=Fn.Pop,navigator:a,static:i=!1,future:c}=e;_l()&&Fe(!1);let d=t.replace(/^\/*/,"/"),u=h.useMemo(()=>({basename:d,navigator:a,static:i,future:gl({v7_relativeSplatPath:!1},c)}),[d,c,a,i]);typeof r=="string"&&(r=xs(r));let{pathname:v="/",search:y="",hash:b="",state:C=null,key:f="default"}=r,N=h.useMemo(()=>{let _=_d(v,d);return _==null?null:{location:{pathname:_,search:y,hash:b,state:C,key:f},navigationType:l}},[d,v,y,b,C,f,l]);return N==null?null:h.createElement(Tr.Provider,{value:u},h.createElement(vo.Provider,{children:n,value:N}))}function Ev(e){let{children:t,location:n}=e;return mv(gc(t),n)}new Promise(()=>{});function gc(e,t){t===void 0&&(t=[]);let n=[];return h.Children.forEach(e,(r,l)=>{if(!h.isValidElement(r))return;let a=[...t,l];if(r.type===h.Fragment){n.push.apply(n,gc(r.props.children,a));return}r.type!==Qe&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=gc(r.props.children,a)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xc.apply(this,arguments)}function $v(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,a;for(a=0;a<r.length;a++)l=r[a],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function Pv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Tv(e,t){return e.button===0&&(!t||t==="_self")&&!Pv(e)}function vc(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(l=>[n,l]):[[n,r]])},[]))}function Rv(e,t){let n=vc(e);return t&&t.forEach((r,l)=>{n.has(l)||t.getAll(l).forEach(a=>{n.append(l,a)})}),n}const Mv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zv="6";try{window.__reactRouterVersion=zv}catch{}const Lv="startTransition",am=_p[Lv];function Iv(e){let{basename:t,children:n,future:r,window:l}=e,a=h.useRef();a.current==null&&(a.current=Ax({window:l,v5Compat:!0}));let i=a.current,[c,d]=h.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},v=h.useCallback(y=>{u&&am?am(()=>d(y)):d(y)},[d,u]);return h.useLayoutEffect(()=>i.listen(v),[i,v]),h.useEffect(()=>Cv(r),[r]),h.createElement(_v,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:i,future:r})}const jv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ov=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ee=h.forwardRef(function(t,n){let{onClick:r,relative:l,reloadDocument:a,replace:i,state:c,target:d,to:u,preventScrollReset:v,viewTransition:y}=t,b=$v(t,Mv),{basename:C}=h.useContext(Tr),f,N=!1;if(typeof u=="string"&&Ov.test(u)&&(f=u,jv))try{let p=new URL(window.location.href),S=u.startsWith("//")?new URL(p.protocol+u):new URL(u),R=_d(S.pathname,C);S.origin===p.origin&&R!=null?u=R+S.search+S.hash:N=!0}catch{}let _=dv(u,{relative:l}),x=Av(u,{replace:i,state:c,target:d,preventScrollReset:v,relative:l,viewTransition:y});function m(p){r&&r(p),p.defaultPrevented||x(p)}return h.createElement("a",xc({},b,{href:f||_,onClick:N||a?r:m,ref:n,target:d}))});var om;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(om||(om={}));var im;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(im||(im={}));function Av(e,t){let{target:n,replace:r,state:l,preventScrollReset:a,relative:i,viewTransition:c}=t===void 0?{}:t,d=ot(),u=El(),v=ef(e,{relative:i});return h.useCallback(y=>{if(Tv(y,n)){y.preventDefault();let b=r!==void 0?r:Ya(u)===Ya(v);d(e,{replace:b,state:l,preventScrollReset:a,relative:i,viewTransition:c})}},[u,d,v,r,l,n,e,a,i,c])}function yo(e){let t=h.useRef(vc(e)),n=h.useRef(!1),r=El(),l=h.useMemo(()=>Rv(r.search,n.current?null:t.current),[r.search]),a=ot(),i=h.useCallback((c,d)=>{const u=vc(typeof c=="function"?c(l):c);n.current=!0,a("?"+u,d)},[a,l]);return[l,i]}function rf(e,t){return function(){return e.apply(t,arguments)}}const{toString:Uv}=Object.prototype,{getPrototypeOf:$d}=Object,{iterator:bo,toStringTag:sf}=Symbol,No=(e=>t=>{const n=Uv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Jt=e=>(e=e.toLowerCase(),t=>No(t)===e),wo=e=>t=>typeof t===e,{isArray:vs}=Array,xl=wo("undefined");function $l(e){return e!==null&&!xl(e)&&e.constructor!==null&&!xl(e.constructor)&&Nt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const lf=Jt("ArrayBuffer");function Bv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&lf(e.buffer),t}const Fv=wo("string"),Nt=wo("function"),af=wo("number"),Pl=e=>e!==null&&typeof e=="object",Dv=e=>e===!0||e===!1,ya=e=>{if(No(e)!=="object")return!1;const t=$d(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(sf in e)&&!(bo in e)},Hv=e=>{if(!Pl(e)||$l(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Vv=Jt("Date"),Wv=Jt("File"),Xv=Jt("Blob"),Yv=Jt("FileList"),Kv=e=>Pl(e)&&Nt(e.pipe),Qv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Nt(e.append)&&((t=No(e))==="formdata"||t==="object"&&Nt(e.toString)&&e.toString()==="[object FormData]"))},qv=Jt("URLSearchParams"),[Gv,Jv,Zv,ey]=["ReadableStream","Request","Response","Headers"].map(Jt),ty=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,l;if(typeof e!="object"&&(e=[e]),vs(e))for(r=0,l=e.length;r<l;r++)t.call(null,e[r],r,e);else{if($l(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let c;for(r=0;r<i;r++)c=a[r],t.call(null,e[c],c,e)}}function of(e,t){if($l(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,l;for(;r-- >0;)if(l=n[r],t===l.toLowerCase())return l;return null}const vr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),cf=e=>!xl(e)&&e!==vr;function yc(){const{caseless:e}=cf(this)&&this||{},t={},n=(r,l)=>{const a=e&&of(t,l)||l;ya(t[a])&&ya(r)?t[a]=yc(t[a],r):ya(r)?t[a]=yc({},r):vs(r)?t[a]=r.slice():t[a]=r};for(let r=0,l=arguments.length;r<l;r++)arguments[r]&&Tl(arguments[r],n);return t}const ny=(e,t,n,{allOwnKeys:r}={})=>(Tl(t,(l,a)=>{n&&Nt(l)?e[a]=rf(l,n):e[a]=l},{allOwnKeys:r}),e),ry=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),sy=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ly=(e,t,n,r)=>{let l,a,i;const c={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),a=l.length;a-- >0;)i=l[a],(!r||r(i,e,t))&&!c[i]&&(t[i]=e[i],c[i]=!0);e=n!==!1&&$d(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ay=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},oy=e=>{if(!e)return null;if(vs(e))return e;let t=e.length;if(!af(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},iy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&$d(Uint8Array)),cy=(e,t)=>{const r=(e&&e[bo]).call(e);let l;for(;(l=r.next())&&!l.done;){const a=l.value;t.call(e,a[0],a[1])}},dy=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},uy=Jt("HTMLFormElement"),my=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,l){return r.toUpperCase()+l}),cm=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),hy=Jt("RegExp"),df=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Tl(n,(l,a)=>{let i;(i=t(l,a,e))!==!1&&(r[a]=i||l)}),Object.defineProperties(e,r)},fy=e=>{df(e,(t,n)=>{if(Nt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Nt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},py=(e,t)=>{const n={},r=l=>{l.forEach(a=>{n[a]=!0})};return vs(e)?r(e):r(String(e).split(t)),n},gy=()=>{},xy=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function vy(e){return!!(e&&Nt(e.append)&&e[sf]==="FormData"&&e[bo])}const yy=e=>{const t=new Array(10),n=(r,l)=>{if(Pl(r)){if(t.indexOf(r)>=0)return;if($l(r))return r;if(!("toJSON"in r)){t[l]=r;const a=vs(r)?[]:{};return Tl(r,(i,c)=>{const d=n(i,l+1);!xl(d)&&(a[c]=d)}),t[l]=void 0,a}}return r};return n(e,0)},by=Jt("AsyncFunction"),Ny=e=>e&&(Pl(e)||Nt(e))&&Nt(e.then)&&Nt(e.catch),uf=((e,t)=>e?setImmediate:t?((n,r)=>(vr.addEventListener("message",({source:l,data:a})=>{l===vr&&a===n&&r.length&&r.shift()()},!1),l=>{r.push(l),vr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Nt(vr.postMessage)),wy=typeof queueMicrotask<"u"?queueMicrotask.bind(vr):typeof process<"u"&&process.nextTick||uf,ky=e=>e!=null&&Nt(e[bo]),z={isArray:vs,isArrayBuffer:lf,isBuffer:$l,isFormData:Qv,isArrayBufferView:Bv,isString:Fv,isNumber:af,isBoolean:Dv,isObject:Pl,isPlainObject:ya,isEmptyObject:Hv,isReadableStream:Gv,isRequest:Jv,isResponse:Zv,isHeaders:ey,isUndefined:xl,isDate:Vv,isFile:Wv,isBlob:Xv,isRegExp:hy,isFunction:Nt,isStream:Kv,isURLSearchParams:qv,isTypedArray:iy,isFileList:Yv,forEach:Tl,merge:yc,extend:ny,trim:ty,stripBOM:ry,inherits:sy,toFlatObject:ly,kindOf:No,kindOfTest:Jt,endsWith:ay,toArray:oy,forEachEntry:cy,matchAll:dy,isHTMLForm:uy,hasOwnProperty:cm,hasOwnProp:cm,reduceDescriptors:df,freezeMethods:fy,toObjectSet:py,toCamelCase:my,noop:gy,toFiniteNumber:xy,findKey:of,global:vr,isContextDefined:cf,isSpecCompliantForm:vy,toJSONObject:yy,isAsyncFn:by,isThenable:Ny,setImmediate:uf,asap:wy,isIterable:ky};function fe(e,t,n,r,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),l&&(this.response=l,this.status=l.status?l.status:null)}z.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const mf=fe.prototype,hf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{hf[e]={value:e}});Object.defineProperties(fe,hf);Object.defineProperty(mf,"isAxiosError",{value:!0});fe.from=(e,t,n,r,l,a)=>{const i=Object.create(mf);return z.toFlatObject(e,i,function(d){return d!==Error.prototype},c=>c!=="isAxiosError"),fe.call(i,e.message,t,n,r,l),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const Sy=null;function bc(e){return z.isPlainObject(e)||z.isArray(e)}function ff(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function dm(e,t,n){return e?e.concat(t).map(function(l,a){return l=ff(l),!n&&a?"["+l+"]":l}).join(n?".":""):t}function Cy(e){return z.isArray(e)&&!e.some(bc)}const _y=z.toFlatObject(z,{},null,function(t){return/^is[A-Z]/.test(t)});function ko(e,t,n){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,_){return!z.isUndefined(_[N])});const r=n.metaTokens,l=n.visitor||v,a=n.dots,i=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(l))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(z.isDate(f))return f.toISOString();if(z.isBoolean(f))return f.toString();if(!d&&z.isBlob(f))throw new fe("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(f)||z.isTypedArray(f)?d&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function v(f,N,_){let x=f;if(f&&!_&&typeof f=="object"){if(z.endsWith(N,"{}"))N=r?N:N.slice(0,-2),f=JSON.stringify(f);else if(z.isArray(f)&&Cy(f)||(z.isFileList(f)||z.endsWith(N,"[]"))&&(x=z.toArray(f)))return N=ff(N),x.forEach(function(p,S){!(z.isUndefined(p)||p===null)&&t.append(i===!0?dm([N],S,a):i===null?N:N+"[]",u(p))}),!1}return bc(f)?!0:(t.append(dm(_,N,a),u(f)),!1)}const y=[],b=Object.assign(_y,{defaultVisitor:v,convertValue:u,isVisitable:bc});function C(f,N){if(!z.isUndefined(f)){if(y.indexOf(f)!==-1)throw Error("Circular reference detected in "+N.join("."));y.push(f),z.forEach(f,function(x,m){(!(z.isUndefined(x)||x===null)&&l.call(t,x,z.isString(m)?m.trim():m,N,b))===!0&&C(x,N?N.concat(m):[m])}),y.pop()}}if(!z.isObject(e))throw new TypeError("data must be an object");return C(e),t}function um(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Pd(e,t){this._pairs=[],e&&ko(e,this,t)}const pf=Pd.prototype;pf.append=function(t,n){this._pairs.push([t,n])};pf.toString=function(t){const n=t?function(r){return t.call(this,r,um)}:um;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function Ey(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gf(e,t,n){if(!t)return e;const r=n&&n.encode||Ey;z.isFunction(n)&&(n={serialize:n});const l=n&&n.serialize;let a;if(l?a=l(t,n):a=z.isURLSearchParams(t)?t.toString():new Pd(t,n).toString(r),a){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class $y{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){z.forEach(this.handlers,function(r){r!==null&&t(r)})}}const mm=$y,xf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Py=typeof URLSearchParams<"u"?URLSearchParams:Pd,Ty=typeof FormData<"u"?FormData:null,Ry=typeof Blob<"u"?Blob:null,My={isBrowser:!0,classes:{URLSearchParams:Py,FormData:Ty,Blob:Ry},protocols:["http","https","file","blob","url","data"]},Td=typeof window<"u"&&typeof document<"u",Nc=typeof navigator=="object"&&navigator||void 0,zy=Td&&(!Nc||["ReactNative","NativeScript","NS"].indexOf(Nc.product)<0),Ly=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Iy=Td&&window.location.href||"http://localhost",jy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Td,hasStandardBrowserEnv:zy,hasStandardBrowserWebWorkerEnv:Ly,navigator:Nc,origin:Iy},Symbol.toStringTag,{value:"Module"})),lt={...jy,...My};function Oy(e,t){return ko(e,new lt.classes.URLSearchParams,{visitor:function(n,r,l,a){return lt.isNode&&z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function Ay(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Uy(e){const t={},n=Object.keys(e);let r;const l=n.length;let a;for(r=0;r<l;r++)a=n[r],t[a]=e[a];return t}function vf(e){function t(n,r,l,a){let i=n[a++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),d=a>=n.length;return i=!i&&z.isArray(l)?l.length:i,d?(z.hasOwnProp(l,i)?l[i]=[l[i],r]:l[i]=r,!c):((!l[i]||!z.isObject(l[i]))&&(l[i]=[]),t(n,r,l[i],a)&&z.isArray(l[i])&&(l[i]=Uy(l[i])),!c)}if(z.isFormData(e)&&z.isFunction(e.entries)){const n={};return z.forEachEntry(e,(r,l)=>{t(Ay(r),l,n,0)}),n}return null}function By(e,t,n){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Rd={transitional:xf,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",l=r.indexOf("application/json")>-1,a=z.isObject(t);if(a&&z.isHTMLForm(t)&&(t=new FormData(t)),z.isFormData(t))return l?JSON.stringify(vf(t)):t;if(z.isArrayBuffer(t)||z.isBuffer(t)||z.isStream(t)||z.isFile(t)||z.isBlob(t)||z.isReadableStream(t))return t;if(z.isArrayBufferView(t))return t.buffer;if(z.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Oy(t,this.formSerializer).toString();if((c=z.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return ko(c?{"files[]":t}:t,d&&new d,this.formSerializer)}}return a||l?(n.setContentType("application/json",!1),By(t)):t}],transformResponse:[function(t){const n=this.transitional||Rd.transitional,r=n&&n.forcedJSONParsing,l=this.responseType==="json";if(z.isResponse(t)||z.isReadableStream(t))return t;if(t&&z.isString(t)&&(r&&!this.responseType||l)){const i=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(t)}catch(c){if(i)throw c.name==="SyntaxError"?fe.from(c,fe.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lt.classes.FormData,Blob:lt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{Rd.headers[e]={}});const Md=Rd,Fy=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dy=e=>{const t={};let n,r,l;return e&&e.split(`
`).forEach(function(i){l=i.indexOf(":"),n=i.substring(0,l).trim().toLowerCase(),r=i.substring(l+1).trim(),!(!n||t[n]&&Fy[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},hm=Symbol("internals");function Is(e){return e&&String(e).trim().toLowerCase()}function ba(e){return e===!1||e==null?e:z.isArray(e)?e.map(ba):String(e)}function Hy(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Vy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function mi(e,t,n,r,l){if(z.isFunction(r))return r.call(this,t,n);if(l&&(t=n),!!z.isString(t)){if(z.isString(r))return t.indexOf(r)!==-1;if(z.isRegExp(r))return r.test(t)}}function Wy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Xy(e,t){const n=z.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(l,a,i){return this[r].call(this,t,l,a,i)},configurable:!0})})}class So{constructor(t){t&&this.set(t)}set(t,n,r){const l=this;function a(c,d,u){const v=Is(d);if(!v)throw new Error("header name must be a non-empty string");const y=z.findKey(l,v);(!y||l[y]===void 0||u===!0||u===void 0&&l[y]!==!1)&&(l[y||d]=ba(c))}const i=(c,d)=>z.forEach(c,(u,v)=>a(u,v,d));if(z.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(z.isString(t)&&(t=t.trim())&&!Vy(t))i(Dy(t),n);else if(z.isObject(t)&&z.isIterable(t)){let c={},d,u;for(const v of t){if(!z.isArray(v))throw TypeError("Object iterator must return a key-value pair");c[u=v[0]]=(d=c[u])?z.isArray(d)?[...d,v[1]]:[d,v[1]]:v[1]}i(c,n)}else t!=null&&a(n,t,r);return this}get(t,n){if(t=Is(t),t){const r=z.findKey(this,t);if(r){const l=this[r];if(!n)return l;if(n===!0)return Hy(l);if(z.isFunction(n))return n.call(this,l,r);if(z.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Is(t),t){const r=z.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||mi(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let l=!1;function a(i){if(i=Is(i),i){const c=z.findKey(r,i);c&&(!n||mi(r,r[c],c,n))&&(delete r[c],l=!0)}}return z.isArray(t)?t.forEach(a):a(t),l}clear(t){const n=Object.keys(this);let r=n.length,l=!1;for(;r--;){const a=n[r];(!t||mi(this,this[a],a,t,!0))&&(delete this[a],l=!0)}return l}normalize(t){const n=this,r={};return z.forEach(this,(l,a)=>{const i=z.findKey(r,a);if(i){n[i]=ba(l),delete n[a];return}const c=t?Wy(a):String(a).trim();c!==a&&delete n[a],n[c]=ba(l),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return z.forEach(this,(r,l)=>{r!=null&&r!==!1&&(n[l]=t&&z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(l=>r.set(l)),r}static accessor(t){const r=(this[hm]=this[hm]={accessors:{}}).accessors,l=this.prototype;function a(i){const c=Is(i);r[c]||(Xy(l,i),r[c]=!0)}return z.isArray(t)?t.forEach(a):a(t),this}}So.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(So.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});z.freezeMethods(So);const qt=So;function hi(e,t){const n=this||Md,r=t||n,l=qt.from(r.headers);let a=r.data;return z.forEach(e,function(c){a=c.call(n,a,l.normalize(),t?t.status:void 0)}),l.normalize(),a}function yf(e){return!!(e&&e.__CANCEL__)}function ys(e,t,n){fe.call(this,e??"canceled",fe.ERR_CANCELED,t,n),this.name="CanceledError"}z.inherits(ys,fe,{__CANCEL__:!0});function bf(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new fe("Request failed with status code "+n.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Yy(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ky(e,t){e=e||10;const n=new Array(e),r=new Array(e);let l=0,a=0,i;return t=t!==void 0?t:1e3,function(d){const u=Date.now(),v=r[a];i||(i=u),n[l]=d,r[l]=u;let y=a,b=0;for(;y!==l;)b+=n[y++],y=y%e;if(l=(l+1)%e,l===a&&(a=(a+1)%e),u-i<t)return;const C=v&&u-v;return C?Math.round(b*1e3/C):void 0}}function Qy(e,t){let n=0,r=1e3/t,l,a;const i=(u,v=Date.now())=>{n=v,l=null,a&&(clearTimeout(a),a=null),e(...u)};return[(...u)=>{const v=Date.now(),y=v-n;y>=r?i(u,v):(l=u,a||(a=setTimeout(()=>{a=null,i(l)},r-y)))},()=>l&&i(l)]}const Qa=(e,t,n=3)=>{let r=0;const l=Ky(50,250);return Qy(a=>{const i=a.loaded,c=a.lengthComputable?a.total:void 0,d=i-r,u=l(d),v=i<=c;r=i;const y={loaded:i,total:c,progress:c?i/c:void 0,bytes:d,rate:u||void 0,estimated:u&&c&&v?(c-i)/u:void 0,event:a,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(y)},n)},fm=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},pm=e=>(...t)=>z.asap(()=>e(...t)),qy=lt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,lt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(lt.origin),lt.navigator&&/(msie|trident)/i.test(lt.navigator.userAgent)):()=>!0,Gy=lt.hasStandardBrowserEnv?{write(e,t,n,r,l,a){const i=[e+"="+encodeURIComponent(t)];z.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),z.isString(r)&&i.push("path="+r),z.isString(l)&&i.push("domain="+l),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Jy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Zy(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Nf(e,t,n){let r=!Jy(t);return e&&(r||n==!1)?Zy(e,t):t}const gm=e=>e instanceof qt?{...e}:e;function _r(e,t){t=t||{};const n={};function r(u,v,y,b){return z.isPlainObject(u)&&z.isPlainObject(v)?z.merge.call({caseless:b},u,v):z.isPlainObject(v)?z.merge({},v):z.isArray(v)?v.slice():v}function l(u,v,y,b){if(z.isUndefined(v)){if(!z.isUndefined(u))return r(void 0,u,y,b)}else return r(u,v,y,b)}function a(u,v){if(!z.isUndefined(v))return r(void 0,v)}function i(u,v){if(z.isUndefined(v)){if(!z.isUndefined(u))return r(void 0,u)}else return r(void 0,v)}function c(u,v,y){if(y in t)return r(u,v);if(y in e)return r(void 0,u)}const d={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(u,v,y)=>l(gm(u),gm(v),y,!0)};return z.forEach(Object.keys({...e,...t}),function(v){const y=d[v]||l,b=y(e[v],t[v],v);z.isUndefined(b)&&y!==c||(n[v]=b)}),n}const wf=e=>{const t=_r({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:l,xsrfCookieName:a,headers:i,auth:c}=t;t.headers=i=qt.from(i),t.url=gf(Nf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let d;if(z.isFormData(n)){if(lt.hasStandardBrowserEnv||lt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((d=i.getContentType())!==!1){const[u,...v]=d?d.split(";").map(y=>y.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...v].join("; "))}}if(lt.hasStandardBrowserEnv&&(r&&z.isFunction(r)&&(r=r(t)),r||r!==!1&&qy(t.url))){const u=l&&a&&Gy.read(a);u&&i.set(l,u)}return t},e1=typeof XMLHttpRequest<"u",t1=e1&&function(e){return new Promise(function(n,r){const l=wf(e);let a=l.data;const i=qt.from(l.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=l,v,y,b,C,f;function N(){C&&C(),f&&f(),l.cancelToken&&l.cancelToken.unsubscribe(v),l.signal&&l.signal.removeEventListener("abort",v)}let _=new XMLHttpRequest;_.open(l.method.toUpperCase(),l.url,!0),_.timeout=l.timeout;function x(){if(!_)return;const p=qt.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),R={data:!c||c==="text"||c==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:p,config:e,request:_};bf(function($){n($),N()},function($){r($),N()},R),_=null}"onloadend"in _?_.onloadend=x:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(x)},_.onabort=function(){_&&(r(new fe("Request aborted",fe.ECONNABORTED,e,_)),_=null)},_.onerror=function(){r(new fe("Network Error",fe.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let S=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const R=l.transitional||xf;l.timeoutErrorMessage&&(S=l.timeoutErrorMessage),r(new fe(S,R.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,e,_)),_=null},a===void 0&&i.setContentType(null),"setRequestHeader"in _&&z.forEach(i.toJSON(),function(S,R){_.setRequestHeader(R,S)}),z.isUndefined(l.withCredentials)||(_.withCredentials=!!l.withCredentials),c&&c!=="json"&&(_.responseType=l.responseType),u&&([b,f]=Qa(u,!0),_.addEventListener("progress",b)),d&&_.upload&&([y,C]=Qa(d),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",C)),(l.cancelToken||l.signal)&&(v=p=>{_&&(r(!p||p.type?new ys(null,e,_):p),_.abort(),_=null)},l.cancelToken&&l.cancelToken.subscribe(v),l.signal&&(l.signal.aborted?v():l.signal.addEventListener("abort",v)));const m=Yy(l.url);if(m&&lt.protocols.indexOf(m)===-1){r(new fe("Unsupported protocol "+m+":",fe.ERR_BAD_REQUEST,e));return}_.send(a||null)})},n1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,l;const a=function(u){if(!l){l=!0,c();const v=u instanceof Error?u:this.reason;r.abort(v instanceof fe?v:new ys(v instanceof Error?v.message:v))}};let i=t&&setTimeout(()=>{i=null,a(new fe(`timeout ${t} of ms exceeded`,fe.ETIMEDOUT))},t);const c=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),e=null)};e.forEach(u=>u.addEventListener("abort",a));const{signal:d}=r;return d.unsubscribe=()=>z.asap(c),d}},r1=n1,s1=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,l;for(;r<n;)l=r+t,yield e.slice(r,l),r=l},l1=async function*(e,t){for await(const n of a1(e))yield*s1(n,t)},a1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},xm=(e,t,n,r)=>{const l=l1(e,t);let a=0,i,c=d=>{i||(i=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:u,value:v}=await l.next();if(u){c(),d.close();return}let y=v.byteLength;if(n){let b=a+=y;n(b)}d.enqueue(new Uint8Array(v))}catch(u){throw c(u),u}},cancel(d){return c(d),l.return()}},{highWaterMark:2})},Co=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",kf=Co&&typeof ReadableStream=="function",o1=Co&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Sf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},i1=kf&&Sf(()=>{let e=!1;const t=new Request(lt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),vm=64*1024,wc=kf&&Sf(()=>z.isReadableStream(new Response("").body)),qa={stream:wc&&(e=>e.body)};Co&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!qa[t]&&(qa[t]=z.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new fe(`Response type '${t}' is not supported`,fe.ERR_NOT_SUPPORT,r)})})})(new Response);const c1=async e=>{if(e==null)return 0;if(z.isBlob(e))return e.size;if(z.isSpecCompliantForm(e))return(await new Request(lt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(z.isArrayBufferView(e)||z.isArrayBuffer(e))return e.byteLength;if(z.isURLSearchParams(e)&&(e=e+""),z.isString(e))return(await o1(e)).byteLength},d1=async(e,t)=>{const n=z.toFiniteNumber(e.getContentLength());return n??c1(t)},u1=Co&&(async e=>{let{url:t,method:n,data:r,signal:l,cancelToken:a,timeout:i,onDownloadProgress:c,onUploadProgress:d,responseType:u,headers:v,withCredentials:y="same-origin",fetchOptions:b}=wf(e);u=u?(u+"").toLowerCase():"text";let C=r1([l,a&&a.toAbortSignal()],i),f;const N=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let _;try{if(d&&i1&&n!=="get"&&n!=="head"&&(_=await d1(v,r))!==0){let R=new Request(t,{method:"POST",body:r,duplex:"half"}),g;if(z.isFormData(r)&&(g=R.headers.get("content-type"))&&v.setContentType(g),R.body){const[$,T]=fm(_,Qa(pm(d)));r=xm(R.body,vm,$,T)}}z.isString(y)||(y=y?"include":"omit");const x="credentials"in Request.prototype;f=new Request(t,{...b,signal:C,method:n.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:x?y:void 0});let m=await fetch(f,b);const p=wc&&(u==="stream"||u==="response");if(wc&&(c||p&&N)){const R={};["status","statusText","headers"].forEach(q=>{R[q]=m[q]});const g=z.toFiniteNumber(m.headers.get("content-length")),[$,T]=c&&fm(g,Qa(pm(c),!0))||[];m=new Response(xm(m.body,vm,$,()=>{T&&T(),N&&N()}),R)}u=u||"text";let S=await qa[z.findKey(qa,u)||"text"](m,e);return!p&&N&&N(),await new Promise((R,g)=>{bf(R,g,{data:S,headers:qt.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:f})})}catch(x){throw N&&N(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new fe("Network Error",fe.ERR_NETWORK,e,f),{cause:x.cause||x}):fe.from(x,x&&x.code,e,f)}}),kc={http:Sy,xhr:t1,fetch:u1};z.forEach(kc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ym=e=>`- ${e}`,m1=e=>z.isFunction(e)||e===null||e===!1,Cf={getAdapter:e=>{e=z.isArray(e)?e:[e];const{length:t}=e;let n,r;const l={};for(let a=0;a<t;a++){n=e[a];let i;if(r=n,!m1(n)&&(r=kc[(i=String(n)).toLowerCase()],r===void 0))throw new fe(`Unknown adapter '${i}'`);if(r)break;l[i||"#"+a]=r}if(!r){const a=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let i=t?a.length>1?`since :
`+a.map(ym).join(`
`):" "+ym(a[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:kc};function fi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ys(null,e)}function bm(e){return fi(e),e.headers=qt.from(e.headers),e.data=hi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Cf.getAdapter(e.adapter||Md.adapter)(e).then(function(r){return fi(e),r.data=hi.call(e,e.transformResponse,r),r.headers=qt.from(r.headers),r},function(r){return yf(r)||(fi(e),r&&r.response&&(r.response.data=hi.call(e,e.transformResponse,r.response),r.response.headers=qt.from(r.response.headers))),Promise.reject(r)})}const _f="1.11.0",_o={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_o[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Nm={};_o.transitional=function(t,n,r){function l(a,i){return"[Axios v"+_f+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,c)=>{if(t===!1)throw new fe(l(i," has been removed"+(n?" in "+n:"")),fe.ERR_DEPRECATED);return n&&!Nm[i]&&(Nm[i]=!0,console.warn(l(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,i,c):!0}};_o.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function h1(e,t,n){if(typeof e!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let l=r.length;for(;l-- >0;){const a=r[l],i=t[a];if(i){const c=e[a],d=c===void 0||i(c,a,e);if(d!==!0)throw new fe("option "+a+" must be "+d,fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new fe("Unknown option "+a,fe.ERR_BAD_OPTION)}}const Na={assertOptions:h1,validators:_o},sn=Na.validators;class Ga{constructor(t){this.defaults=t||{},this.interceptors={request:new mm,response:new mm}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const a=l.stack?l.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=_r(this.defaults,n);const{transitional:r,paramsSerializer:l,headers:a}=n;r!==void 0&&Na.assertOptions(r,{silentJSONParsing:sn.transitional(sn.boolean),forcedJSONParsing:sn.transitional(sn.boolean),clarifyTimeoutError:sn.transitional(sn.boolean)},!1),l!=null&&(z.isFunction(l)?n.paramsSerializer={serialize:l}:Na.assertOptions(l,{encode:sn.function,serialize:sn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Na.assertOptions(n,{baseUrl:sn.spelling("baseURL"),withXsrfToken:sn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&z.merge(a.common,a[n.method]);a&&z.forEach(["delete","get","head","post","put","patch","common"],f=>{delete a[f]}),n.headers=qt.concat(i,a);const c=[];let d=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(d=d&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const u=[];this.interceptors.response.forEach(function(N){u.push(N.fulfilled,N.rejected)});let v,y=0,b;if(!d){const f=[bm.bind(this),void 0];for(f.unshift(...c),f.push(...u),b=f.length,v=Promise.resolve(n);y<b;)v=v.then(f[y++],f[y++]);return v}b=c.length;let C=n;for(y=0;y<b;){const f=c[y++],N=c[y++];try{C=f(C)}catch(_){N.call(this,_);break}}try{v=bm.call(this,C)}catch(f){return Promise.reject(f)}for(y=0,b=u.length;y<b;)v=v.then(u[y++],u[y++]);return v}getUri(t){t=_r(this.defaults,t);const n=Nf(t.baseURL,t.url,t.allowAbsoluteUrls);return gf(n,t.params,t.paramsSerializer)}}z.forEach(["delete","get","head","options"],function(t){Ga.prototype[t]=function(n,r){return this.request(_r(r||{},{method:t,url:n,data:(r||{}).data}))}});z.forEach(["post","put","patch"],function(t){function n(r){return function(a,i,c){return this.request(_r(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Ga.prototype[t]=n(),Ga.prototype[t+"Form"]=n(!0)});const wa=Ga;class zd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(l=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](l);r._listeners=null}),this.promise.then=l=>{let a;const i=new Promise(c=>{r.subscribe(c),a=c}).then(l);return i.cancel=function(){r.unsubscribe(a)},i},t(function(a,i,c){r.reason||(r.reason=new ys(a,i,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new zd(function(l){t=l}),cancel:t}}}const f1=zd;function p1(e){return function(n){return e.apply(null,n)}}function g1(e){return z.isObject(e)&&e.isAxiosError===!0}const Sc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sc).forEach(([e,t])=>{Sc[t]=e});const x1=Sc;function Ef(e){const t=new wa(e),n=rf(wa.prototype.request,t);return z.extend(n,wa.prototype,t,{allOwnKeys:!0}),z.extend(n,t,null,{allOwnKeys:!0}),n.create=function(l){return Ef(_r(e,l))},n}const De=Ef(Md);De.Axios=wa;De.CanceledError=ys;De.CancelToken=f1;De.isCancel=yf;De.VERSION=_f;De.toFormData=ko;De.AxiosError=fe;De.Cancel=De.CanceledError;De.all=function(t){return Promise.all(t)};De.spread=p1;De.isAxiosError=g1;De.mergeConfig=_r;De.AxiosHeaders=qt;De.formToJSON=e=>vf(z.isHTMLForm(e)?new FormData(e):e);De.getAdapter=Cf.getAdapter;De.HttpStatusCode=x1;De.default=De;const ce=De,wm={APP_NAME:"",APP_VERSION:"1.0.0",NODE_ENV:"development",DEBUG:!0,API_BASE_URL:"https://unlimited.xzt.plus",API_TIMEOUT:parseInt("10000")||1e4,API_VERSION:"v1",CLIENT_PORT:parseInt("3001")||3001,FEATURES:{DEBUG_MODE:!0,LOGGING:!0}},Oe=ce.create({baseURL:wm.API_BASE_URL+"/api",timeout:wm.API_TIMEOUT,headers:{"Content-Type":"application/json"}});Oe.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Oe.interceptors.response.use(e=>e.data,async e=>{var t,n;if(((t=e.response)==null?void 0:t.status)===401){const r=((n=e.response.data)==null?void 0:n.code)||"";if((r==="TOKEN_INVALID"||r==="TOKEN_MISSING"||r==="ACCOUNT_BANNED")&&localStorage.getItem("token"))try{const i=await Oe.post("/auth/refresh");if(i.success){localStorage.setItem("token",i.data.token);const c=e.config;return c.headers.Authorization=`Bearer ${i.data.token}`,Oe(c)}}catch{localStorage.removeItem("token"),window.location.href="/login"}}return Promise.reject(e)});const js={register:async(e,t,n)=>await Oe.post("/auth/register",{username:e,email:t,password:n,confirmPassword:n}),login:async(e,t)=>await Oe.post("/auth/login",{email:e,password:t}),logout:async()=>await Oe.post("/auth/logout"),getMe:async()=>await Oe.get("/auth/me"),refreshToken:async()=>await Oe.post("/auth/refresh")},$f=h.createContext(),it=()=>{const e=h.useContext($f);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},v1=({children:e})=>{const[t,n]=h.useState(null),[r,l]=h.useState(localStorage.getItem("token")),[a,i]=h.useState(!0);h.useEffect(()=>{const C=async(f=0)=>{if(r)try{const N=await js.getMe();N.success?n(N.data.user):N.code&&(N.code==="TOKEN_INVALID"||N.code==="TOKEN_MISSING"||N.code==="ACCOUNT_BANNED")?(console.log("Token:",N.code,N.message),localStorage.removeItem("token"),l(null),n(null)):(console.log("Token:",N.code,N.message),n(null))}catch(N){if(console.error("Token:",N),f<3&&(N.message.includes("Network Error")||N.message.includes("timeout")||!N.response)){console.log(`2 (${f+1}/3)`),setTimeout(()=>C(f+1),2e3);return}}finally{(f>=3||f===0)&&i(!1)}else i(!1)};r?C():i(!1)},[r]);const b={user:t,token:r,loading:a,login:async(C,f)=>{var N,_;try{const x=await js.login(C,f);if(x.success){const{user:m,token:p}=x.data;return n(m),l(p),localStorage.setItem("token",p),{success:!0}}else return{success:!1,message:x.message}}catch(x){return console.error(":",x),{success:!1,message:((_=(N=x.response)==null?void 0:N.data)==null?void 0:_.message)||""}}},register:async(C,f,N)=>{var _,x;try{const m=await js.register(C,f,N);if(m.success){const{user:p,token:S}=m.data;return n(p),l(S),localStorage.setItem("token",S),{success:!0}}else return{success:!1,message:m.message}}catch(m){return console.error(":",m),{success:!1,message:((x=(_=m.response)==null?void 0:_.data)==null?void 0:x.message)||""}}},logout:async()=>{try{r&&await js.logout()}catch(C){console.error(":",C)}finally{n(null),l(null),localStorage.removeItem("token")}},refreshToken:async()=>{var C,f;try{const N=await js.refreshToken();if(N.success){const _=N.data.token;return l(_),localStorage.setItem("token",_),{success:!0}}else return{success:!1,message:N.message}}catch(N){return console.error("Token:",N),{success:!1,message:((f=(C=N.response)==null?void 0:C.data)==null?void 0:f.message)||"Token"}}},updateUser:C=>{n(C)},isAuthenticated:!!t&&!!r};return s($f.Provider,{value:b,children:e})};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y1={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t,n,r)=>{const l=h.forwardRef(({color:a="currentColor",size:i=24,stroke:c=2,title:d,className:u,children:v,...y},b)=>h.createElement("svg",{ref:b,...y1[e],width:i,height:i,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:a}:{strokeWidth:c,stroke:a},...y},[d&&h.createElement("title",{key:"svg-title"},d),...r.map(([C,f])=>h.createElement(C,f)),...Array.isArray(v)?v:[v]]));return l.displayName=`${n}`,l};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],_n=ie("outline","alert-circle","AlertCircle",b1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],w1=ie("outline","alert-triangle","AlertTriangle",N1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]],Ld=ie("outline","arrow-left","ArrowLeft",k1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M16 4l4 0l0 4",key:"svg-0"}],["path",{d:"M14 10l6 -6",key:"svg-1"}],["path",{d:"M8 20l-4 0l0 -4",key:"svg-2"}],["path",{d:"M4 20l6 -6",key:"svg-3"}],["path",{d:"M16 20l4 0l0 -4",key:"svg-4"}],["path",{d:"M14 14l6 6",key:"svg-5"}],["path",{d:"M8 4l-4 0l0 4",key:"svg-6"}],["path",{d:"M4 4l6 6",key:"svg-7"}]],C1=ie("outline","arrows-maximize","ArrowsMaximize",S1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z",key:"svg-0"}],["path",{d:"M19 16h-12a2 2 0 0 0 -2 2",key:"svg-1"}],["path",{d:"M9 8h6",key:"svg-2"}]],Pf=ie("outline","book-2","Book2",_1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M18 7v14l-6 -4l-6 4v-14a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4z",key:"svg-0"}]],ls=ie("outline","bookmark","Bookmark",E1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M5 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M5 8h4",key:"svg-2"}],["path",{d:"M9 16h4",key:"svg-3"}],["path",{d:"M13.803 4.56l2.184 -.53c.562 -.135 1.133 .19 1.282 .732l3.695 13.418a1.02 1.02 0 0 1 -.634 1.219l-.133 .041l-2.184 .53c-.562 .135 -1.133 -.19 -1.282 -.732l-3.695 -13.418a1.02 1.02 0 0 1 .634 -1.219l.133 -.041z",key:"svg-4"}],["path",{d:"M14 9l4 -1",key:"svg-5"}],["path",{d:"M16 16l3.923 -.98",key:"svg-6"}]],Cc=ie("outline","books","Books",$1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M10.5 21h-4.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v3",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h10",key:"svg-3"}],["path",{d:"M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-4"}],["path",{d:"M18 16.5v1.5l.5 .5",key:"svg-5"}]],Tf=ie("outline","calendar-clock","CalendarClock",P1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],hs=ie("outline","check","Check",T1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],Ln=ie("outline","chevron-down","ChevronDown",R1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]],_c=ie("outline","chevron-left","ChevronLeft",M1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]],Br=ie("outline","chevron-right","ChevronRight",z1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],Rf=ie("outline","chevron-up","ChevronUp",L1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]],vl=ie("outline","clock","Clock",I1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]],yl=ie("outline","edit","Edit",j1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 16v.01",key:"svg-2"}]],km=ie("outline","exclamation-circle","ExclamationCircle",O1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]],Ja=ie("outline","eye","Eye",A1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]],Me=ie("outline","file-text","FileText",U1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],F1=ie("outline","filter","Filter",B1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M5 5a5 5 0 0 1 7 0a5 5 0 0 0 7 0v9a5 5 0 0 1 -7 0a5 5 0 0 0 -7 0v-9z",key:"svg-0"}],["path",{d:"M5 21v-7",key:"svg-1"}]],Sm=ie("outline","flag","Flag",D1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M12 10.941c2.333 -3.308 .167 -7.823 -1 -8.941c0 3.395 -2.235 5.299 -3.667 6.706c-1.43 1.408 -2.333 3.621 -2.333 5.588c0 3.704 3.134 6.706 7 6.706s7 -3.002 7 -6.706c0 -1.712 -1.232 -4.403 -2.333 -5.588c-2.084 3.353 -3.257 3.353 -4.667 2.235",key:"svg-0"}]],V1=ie("outline","flame","Flame",H1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M7 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M7 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M7 8l0 8",key:"svg-3"}],["path",{d:"M9 18h6a2 2 0 0 0 2 -2v-5",key:"svg-4"}],["path",{d:"M14 14l3 -3l3 3",key:"svg-5"}]],X1=ie("outline","git-branch","GitBranch",W1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572",key:"svg-0"}]],Nn=ie("outline","heart","Heart",Y1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 17l0 .01",key:"svg-1"}],["path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4",key:"svg-2"}]],Cm=ie("outline","help","Help",K1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]],q1=ie("outline","history","History",Q1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-3"}]],J1=ie("outline","layout-grid","LayoutGrid",G1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M12 6l0 -3",key:"svg-0"}],["path",{d:"M16.25 7.75l2.15 -2.15",key:"svg-1"}],["path",{d:"M18 12l3 0",key:"svg-2"}],["path",{d:"M16.25 16.25l2.15 2.15",key:"svg-3"}],["path",{d:"M12 18l0 3",key:"svg-4"}],["path",{d:"M7.75 16.25l-2.15 2.15",key:"svg-5"}],["path",{d:"M6 12l-3 0",key:"svg-6"}],["path",{d:"M7.75 7.75l-2.15 -2.15",key:"svg-7"}]],_m=ie("outline","loader","Loader",Z1);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]],tb=ie("outline","mail","Mail",eb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]],Mf=ie("outline","menu-2","Menu2",nb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1",key:"svg-0"}]],qs=ie("outline","message-circle","MessageCircle",rb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16v6",key:"svg-4"}]],Em=ie("outline","message-plus","MessagePlus",sb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M5 12l14 0",key:"svg-0"}]],ab=ie("outline","minus","Minus",lb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]],pi=ie("outline","moon","Moon",ob);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M12 18.5l7.265 2.463c.196 .077 .42 .032 .57 -.116a.548 .548 0 0 0 .134 -.572l-7.969 -17.275l-7.97 17.275c-.07 .2 -.017 .424 .135 .572c.15 .148 .374 .193 .57 .116l7.265 -2.463",key:"svg-0"}]],cb=ie("outline","navigation","Navigation",ib);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25",key:"svg-0"}],["path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}]],ub=ie("outline","palette","Palette",db);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]],zf=ie("outline","photo","Photo",mb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]],Lf=ie("outline","plus","Plus",hb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z",key:"svg-1"}],["path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5",key:"svg-2"}]],If=ie("outline","route","Route",fb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]],jf=ie("outline","search","Search",pb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=[["path",{d:"M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z",key:"svg-0"}]],gi=ie("outline","sparkles","Sparkles",gb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]],bl=ie("outline","star","Star",xb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]],xi=ie("outline","sun","Sun",vb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592 -3.592a2.41 2.41 0 0 0 0 -3.408l-5.71 -5.71a2 2 0 0 0 -1.414 -.586h-4.172a2 2 0 0 0 -2 2z",key:"svg-0"}],["path",{d:"M18 19l1.592 -1.592a4.82 4.82 0 0 0 0 -6.816l-4.592 -4.592",key:"svg-1"}],["path",{d:"M7 10h-.01",key:"svg-2"}]],bb=ie("outline","tags","Tags",yb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]],wb=ie("outline","target","Target",Nb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["path",{d:"M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3",key:"svg-0"}]],Gs=ie("outline","thumb-up","ThumbUp",kb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],Of=ie("outline","trash","Trash",Sb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=[["path",{d:"M16 5l3 3l-2 1l4 4l-3 1l4 4h-9",key:"svg-0"}],["path",{d:"M15 21l0 -3",key:"svg-1"}],["path",{d:"M8 13l-2 -2",key:"svg-2"}],["path",{d:"M8 12l2 -2",key:"svg-3"}],["path",{d:"M8 21v-13",key:"svg-4"}],["path",{d:"M5.824 16a3 3 0 0 1 -2.743 -3.69a3 3 0 0 1 .304 -4.833a3 3 0 0 1 4.615 -3.707a3 3 0 0 1 4.614 3.707a3 3 0 0 1 .305 4.833a3 3 0 0 1 -2.919 3.695h-4z",key:"svg-5"}]],_b=ie("outline","trees","Trees",Cb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=[["path",{d:"M3 17l6 -6l4 4l8 -8",key:"svg-0"}],["path",{d:"M14 7l7 0l0 7",key:"svg-1"}]],Ec=ie("outline","trending-up","TrendingUp",Eb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=[["path",{d:"M8 21l8 0",key:"svg-0"}],["path",{d:"M12 17l0 4",key:"svg-1"}],["path",{d:"M7 4l10 0",key:"svg-2"}],["path",{d:"M17 4v8a5 5 0 0 1 -10 0v-8",key:"svg-3"}],["path",{d:"M5 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-4"}],["path",{d:"M19 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-5"}]],Pb=ie("outline","trophy","Trophy",$b);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]],Za=ie("outline","user","User",Tb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1",key:"svg-1"}],["path",{d:"M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}],["path",{d:"M17 10h2a2 2 0 0 1 2 2v1",key:"svg-3"}],["path",{d:"M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-4"}],["path",{d:"M3 13v-1a2 2 0 0 1 2 -2h2",key:"svg-5"}]],Mb=ie("outline","users-group","UsersGroup",Rb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],Lb=ie("outline","users","Users",zb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]],Et=ie("outline","x","X",Ib);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M7 10l6 0",key:"svg-1"}],["path",{d:"M10 7l0 6",key:"svg-2"}],["path",{d:"M21 21l-6 -6",key:"svg-3"}]],Ob=ie("outline","zoom-in","ZoomIn",jb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M7 10l6 0",key:"svg-1"}],["path",{d:"M21 21l-6 -6",key:"svg-2"}]],Ub=ie("outline","zoom-out","ZoomOut",Ab);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=[["path",{d:"M14 2a5 5 0 0 1 5 5v14a1 1 0 0 1 -1.555 .832l-5.445 -3.63l-5.444 3.63a1 1 0 0 1 -1.55 -.72l-.006 -.112v-14a5 5 0 0 1 5 -5h4z",key:"svg-0"}]],Fb=ie("filled","bookmark-filled","BookmarkFilled",Bb);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=[["path",{d:"M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z",key:"svg-0"}]],$c=ie("filled","heart-filled","HeartFilled",Db),Gn=({user:e,size:t="md",className:n="",showUsername:r=!1,linkToProfile:l=!1})=>{var d,u;const a={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg","2xl":"w-20 h-20 text-xl","3xl":"w-24 h-24 text-2xl"},i=a[t]||a.md,c=s("div",{className:`${i} bg-slate-300 rounded-full flex items-center justify-center overflow-hidden ${n}`,children:e!=null&&e.avatar_url&&e.avatar_url!=="none"?s("img",{src:e.avatar_url,alt:(e==null?void 0:e.username)||"",className:"w-full h-full object-cover"}):s("span",{className:"text-slate-600 font-medium",children:((u=(d=e==null?void 0:e.username)==null?void 0:d.charAt(0))==null?void 0:u.toUpperCase())||"U"})});return!l||!(e!=null&&e.id)?o("div",{className:"flex items-center gap-2",children:[c,r&&(e==null?void 0:e.username)&&s("span",{className:"text-slate-700",children:e.username})]}):o("a",{href:`/profile/${e.id}`,className:"flex items-center gap-2 hover:bg-slate-50 rounded-lg px-2 py-1 transition-colors",children:[c,r&&(e==null?void 0:e.username)&&s("span",{className:"text-slate-700",children:e.username})]})},_e=()=>{const{user:e,isAuthenticated:t,logout:n}=it(),r=ot(),[l,a]=h.useState(!1),i=async()=>{await n(),r("/")},c=()=>{a(!l)};return o("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50",children:[s("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o("div",{className:"flex justify-between items-center h-16",children:[s("div",{className:"flex items-center",children:s(ee,{to:"/",className:"text-2xl font-light text-slate-700 text-glow",children:""})}),o("div",{className:"hidden md:flex items-center space-x-8",children:[s(ee,{to:"/explore",className:"text-slate-600 hover:text-slate-900 transition-colors",children:""}),t&&s(ee,{to:"/dashboard",className:"text-slate-600 hover:text-slate-900 transition-colors",children:""}),s(ee,{to:"/community",className:"text-slate-600 hover:text-slate-900 transition-colors",children:""}),s(ee,{to:"/about",className:"text-slate-600 hover:text-slate-900 transition-colors",children:""})]}),o("div",{className:"flex items-center space-x-4",children:[s("form",{onSubmit:d=>{d.preventDefault();const u=d.target.search.value.trim();u&&r(`/search?q=${encodeURIComponent(u)}`)},className:"hidden sm:block",children:o("div",{className:"relative",children:[s("input",{type:"text",name:"search",placeholder:"...",className:"w-48 px-3 py-2 text-sm border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent bg-white/50 backdrop-blur-sm"}),s("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s(jf,{className:"w-4 h-4",stroke:1.8})})]})}),t?o("div",{className:"flex items-center space-x-4",children:[s(ee,{to:`/profile/${e==null?void 0:e.id}`,className:"hidden sm:flex items-center space-x-2 hover:bg-slate-50 rounded-lg px-2 py-1 transition-colors",children:s(Gn,{user:e,size:"sm",showUsername:!0})}),s("button",{onClick:i,className:"text-slate-600 hover:text-slate-900 transition-colors",children:""})]}):o("div",{className:"flex items-center space-x-3",children:[s(ee,{to:"/login",className:"text-slate-600 hover:text-slate-900 transition-colors",children:""}),s(ee,{to:"/register",className:"bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-800 transition-colors btn-transition btn-hover",children:""})]}),s("button",{className:"md:hidden text-slate-600 hover:text-slate-900 transition-colors",onClick:c,children:s(Mf,{className:"w-6 h-6",stroke:1.8})})]})]})}),l&&s("div",{className:"md:hidden bg-white/95 backdrop-blur-sm border-t border-slate-200",children:o("div",{className:"px-4 py-2 space-y-1",children:[s(ee,{to:"/explore",className:"block px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",onClick:()=>a(!1),children:""}),t&&s(ee,{to:"/dashboard",className:"block px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",onClick:()=>a(!1),children:""}),s(ee,{to:"/community",className:"block px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",onClick:()=>a(!1),children:""}),s(ee,{to:"/about",className:"block px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",onClick:()=>a(!1),children:""}),t?o("div",{className:"border-t border-slate-200 pt-2 mt-2",children:[s(ee,{to:`/profile/${e==null?void 0:e.id}`,className:"px-3 py-2 flex items-center space-x-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",onClick:()=>a(!1),children:s(Gn,{user:e,size:"sm",showUsername:!0})}),s("button",{onClick:()=>{i(),a(!1)},className:"w-full text-left px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",children:""})]}):o("div",{className:"border-t border-slate-200 pt-2 mt-2 space-y-1",children:[s(ee,{to:"/login",className:"block px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",onClick:()=>a(!1),children:""}),s(ee,{to:"/register",className:"block px-3 py-2 bg-slate-700 text-white hover:bg-slate-800 rounded-md transition-colors",onClick:()=>a(!1),children:""})]})]})})]})},mt=()=>{var a,i;const[e,t]=h.useState(null),n={features:{title:"",content:"/"},reading:{title:"",content:"///"},community:{title:"",content:""},help:{title:"",content:""},contact:{title:"",content:" pfingan@foxmail.com "},feedback:{title:"",content:""},terms:{title:"",content:""},privacy:{title:"",content:""},copyright:{title:"",content:"- CC BY-SA "}},r=()=>t(null);return o("footer",{className:"bg-slate-800 text-white py-12",children:[o("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o("div",{children:[s("h4",{className:"text-lg font-medium mb-4",children:""}),s("p",{className:"text-slate-300 text-sm",children:""})]}),o("div",{children:[s("h5",{className:"font-medium mb-4",children:""}),o("ul",{className:"space-y-2 text-sm text-slate-300",children:[s("li",{children:s("button",{onClick:()=>t("features"),className:"hover:text-white transition-colors",children:""})}),s("li",{children:s("button",{onClick:()=>t("reading"),className:"hover:text-white transition-colors",children:""})}),s("li",{children:s("button",{onClick:()=>t("community"),className:"hover:text-white transition-colors",children:""})})]})]}),o("div",{children:[s("h5",{className:"font-medium mb-4",children:""}),o("ul",{className:"space-y-2 text-sm text-slate-300",children:[s("li",{children:s("button",{onClick:()=>t("help"),className:"hover:text-white transition-colors",children:""})}),s("li",{children:s("button",{onClick:()=>t("contact"),className:"hover:text-white transition-colors",children:""})}),s("li",{children:s("button",{onClick:()=>t("feedback"),className:"hover:text-white transition-colors",children:""})})]})]}),o("div",{children:[s("h5",{className:"font-medium mb-4",children:""}),o("ul",{className:"space-y-2 text-sm text-slate-300",children:[s("li",{children:s("button",{onClick:()=>t("terms"),className:"hover:text-white transition-colors",children:""})}),s("li",{children:s("button",{onClick:()=>t("privacy"),className:"hover:text-white transition-colors",children:""})}),s("li",{children:s("button",{onClick:()=>t("copyright"),className:"hover:text-white transition-colors",children:""})})]})]})]}),s("div",{className:"border-t border-slate-700 mt-8 pt-8 text-center text-sm text-slate-300",children:s("p",{children:" 2025 . ."})})]}),e&&s(({title:c,content:d,onClose:u})=>o("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:u}),o("div",{className:"relative bg-white rounded-2xl shadow-2xl w-11/12 max-w-lg mx-auto p-6",children:[o("div",{className:"flex items-start justify-between mb-3",children:[s("h4",{className:"text-lg font-medium text-slate-800",children:c}),s("button",{"aria-label":"",onClick:u,className:"text-slate-500 hover:text-slate-700 transition-colors",children:""})]}),s("div",{className:"text-slate-700 leading-7",children:d}),s("div",{className:"mt-6 text-right",children:s("button",{onClick:u,className:"px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700 transition-colors",children:""})})]})]}),{title:(a=n[e])==null?void 0:a.title,content:(i=n[e])==null?void 0:i.content,onClose:r})]})},Er=({title:e,author:t,platform:n="",theme:r="default",coverUrl:l=null,size:a="md",className:i=""})=>{const c=(N,_=160,x=160)=>{const m=N.split(""),p=m.length;let S,R,g;const $=_-32,T=x*.4;if(p<=6)S=Math.min(24,$/p*.8,T*.8),R=1,g=p;else if(p<=12){const q=Math.min($/p*.8,T*.6),L=Math.min($/Math.ceil(p/2)*.8,T/2*.6);q>=14?(S=q,R=1,g=p):(S=L,R=2,g=Math.ceil(p/2))}else p<=18?(S=Math.min($/Math.ceil(p/2)*.8,T/2*.6),R=2,g=Math.ceil(p/2)):(S=Math.min($/Math.ceil(p/3)*.8,T/3*.6),R=3,g=Math.ceil(p/3));return S=Math.max(8,Math.min(24,S)),{fontSize:Math.round(S),columns:R,charsPerColumn:g,chars:m}},d={default:{bg:"from-slate-50 via-slate-100 to-slate-200",text:"text-slate-800",author:"text-slate-700",platform:"text-slate-600",accent:"bg-slate-500",border:"border-slate-200"},classic:{bg:"from-amber-50 via-amber-100 to-amber-200",text:"text-amber-900",author:"text-amber-800",platform:"text-amber-700",accent:"bg-amber-600",border:"border-amber-200"},modern:{bg:"from-blue-50 via-blue-100 to-blue-200",text:"text-blue-900",author:"text-blue-800",platform:"text-blue-700",accent:"bg-blue-600",border:"border-blue-200"},elegant:{bg:"from-purple-50 via-purple-100 to-purple-200",text:"text-purple-900",author:"text-purple-800",platform:"text-purple-700",accent:"bg-purple-600",border:"border-purple-200"}},u=d[r]||d.default,v={xs:"w-16 h-20",sm:"w-20 h-28",md:"w-32 h-42",lg:"w-40 h-56",xl:"w-48 h-64"},y=h.useRef(null),[b,C]=h.useState({width:160,height:160});h.useEffect(()=>{const N=()=>{if(y.current){const m=y.current.getBoundingClientRect();C({width:m.width,height:m.height})}},_=setTimeout(N,100);let x;return y.current&&"ResizeObserver"in window?(x=new ResizeObserver(N),x.observe(y.current)):window.addEventListener("resize",N),()=>{clearTimeout(_),x?x.disconnect():window.removeEventListener("resize",N)}},[]);const f=c(e,b.height,b.width);return o("div",{ref:y,className:`relative ${v[a]} rounded-lg overflow-hidden shadow-lg border ${i}`,children:[l&&l!=="none"?s("img",{src:l,alt:`${e} `,className:"w-full h-full object-cover"}):s(wt,{children:s("div",{className:`absolute inset-0 bg-gradient-to-br ${u.bg} ${u.border}`,children:o("div",{className:"absolute inset-0 opacity-20",children:[s("div",{className:"absolute top-4 left-4 w-16 h-16 border-2 border-slate-400 rounded-full"}),s("div",{className:"absolute bottom-8 right-8 w-12 h-12 border border-slate-400 rounded-full"}),s("div",{className:"absolute top-1/2 left-2 w-8 h-8 border border-slate-400 rounded-full"}),s("div",{className:"absolute top-1/3 right-4 w-6 h-6 border border-slate-400 rounded-full"})]})})}),(!l||l==="none")&&o(wt,{children:[s("div",{className:"absolute left-4 top-4 bottom-4 flex flex-col justify-center",children:f.columns===1?f.chars.map((N,_)=>s("div",{className:`font-bold ${u.text} leading-none drop-shadow-sm`,style:{writingMode:"vertical-rl",textOrientation:"mixed",fontSize:`${f.fontSize}px`,marginBottom:`${Math.max(1,f.fontSize*.1)}px`},children:N},_)):Array.from({length:f.columns},(N,_)=>s("div",{className:"flex flex-col",style:{marginRight:`${Math.max(2,f.fontSize*.15)}px`},children:f.chars.slice(_*f.charsPerColumn,(_+1)*f.charsPerColumn).map((x,m)=>s("div",{className:`font-bold ${u.text} leading-none drop-shadow-sm`,style:{writingMode:"vertical-rl",textOrientation:"mixed",fontSize:`${f.fontSize}px`,marginBottom:`${Math.max(1,f.fontSize*.1)}px`},children:x},m))},_))}),o("div",{className:"absolute bottom-4 right-4 text-right max-w-[80%]",children:[s("div",{className:`font-medium ${u.author} mb-1 drop-shadow-sm break-words overflow-hidden`,style:{fontSize:Math.min(14,Math.max(10,b.width*.08))+"px",lineHeight:"1.2"},children:t}),s("div",{className:`${u.platform} font-medium break-words overflow-hidden`,style:{fontSize:Math.min(12,Math.max(8,b.width*.06))+"px",lineHeight:"1.2"},children:n})]}),s("div",{className:`absolute top-3 left-3 w-3 h-3 ${u.accent} rounded-full opacity-60`}),s("div",{className:`absolute top-3 right-3 w-2 h-2 ${u.accent} rounded-full opacity-60`}),s("div",{className:`absolute bottom-3 left-3 w-2 h-2 ${u.accent} rounded-full opacity-40`}),s("div",{className:"absolute top-2 right-2",children:s("div",{className:`w-2 h-2 ${u.accent} rounded-full opacity-80`})})]})]})},ge="/api/novels",Hb=async e=>{try{const t=localStorage.getItem("token");return(await ce.post(`${ge}/create`,e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},Vb=async(e=1,t=10)=>{try{const n=localStorage.getItem("token");return(await ce.get(`${ge}/my-novels?page=${e}&limit=${t}`,{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},Wb=async(e=1,t=10)=>{try{const n=localStorage.getItem("token");return(await ce.get(`${ge}/participated-novels?page=${e}&limit=${t}`,{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},bs=async e=>{try{return(await ce.get(`${ge}/${e}`)).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},Xb=async e=>{try{const t=localStorage.getItem("token");return(await ce.delete(`${ge}/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},Yb=async(e,t)=>{try{const n=localStorage.getItem("token");return(await ce.patch(`${ge}/${e}/settings`,t,{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},Eo=async e=>{try{return(await ce.get(`${ge}/${e}/chapters`)).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},Kb=async(e,t)=>{try{return(await ce.get(`${ge}/${e}/chapters/${t}`)).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},vi=async(e,t,n=0,r=null)=>{try{const l=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/reading/progress`,{chapterId:t,progressPercentage:n,readingPathId:r},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){return l.response?l.response.data:{success:!1,message:""}}},Pc=async e=>{try{const t=localStorage.getItem("token");return(await ce.get(`${ge}/${e}/reading/progress`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},$m=async(e,t,n=0)=>{try{const r=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/reading/history`,{chapterId:t,readingDuration:n},{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},Qb=async e=>{try{const t=localStorage.getItem("token");return(await ce.get(`${ge}/${e}/bookmarks`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},yi=async(e,t=null,n=!1)=>{try{const r=localStorage.getItem("token");return(await ce.post(`${ge}/bookmarks`,{chapterId:e,note:t,isGlobal:n},{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},Pm=async e=>{try{const t=localStorage.getItem("token");return(await ce.delete(`${ge}/bookmarks/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},qb=async e=>{try{const t=localStorage.getItem("token");return(await ce.get(`${ge}/bookmarks/${e}/exists`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},Gb=async()=>{try{const e=localStorage.getItem("token");return(await ce.get(`${ge}/bookmarks/global/list`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(e){return e.response?e.response.data:{success:!1,message:""}}},Jb=async e=>{try{const t=localStorage.getItem("token");return(await ce.get(`${ge}/${e}/bookmarks/others`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},Zb=async(e,t)=>{try{const n=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/chapters`,t,{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},Af=async(e={})=>{try{const{limit:t=10,sortBy:n="created_at",page:r=1,tags:l}=e;let a=`${ge}/list?limit=${t}&sortBy=${n}&page=${r}`;if(l&&l.length>0){const c=l.map(d=>encodeURIComponent(d)).join(",");a+=`&tags=${c}`}return(await ce.get(a)).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},Uf=async()=>{try{return(await ce.get(`${ge}/stats`)).data}catch(e){return e.response?e.response.data:{success:!1,message:""}}},eN=async e=>{try{return(await ce.get(`${ge}/${e}/stats`)).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},tN=async e=>{try{const t=localStorage.getItem("token"),n=t?{Authorization:`Bearer ${t}`}:{};return(await ce.get(`${ge}/${e}/reading-paths`,{headers:n})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},fr=async(e,t)=>{try{const n=localStorage.getItem("token"),r=n?{Authorization:`Bearer ${n}`}:{};return(await ce.get(`${ge}/${e}/reading-paths/${t}`,{headers:r})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},Bf=async(e,t)=>{try{const n=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/reading-paths`,t,{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},Ff=async(e,t,n)=>{try{const r=localStorage.getItem("token");return(await ce.put(`${ge}/${e}/reading-paths/${t}`,n,{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},nN=async e=>{try{const t=localStorage.getItem("token");return(await ce.get(`${ge}/${e}/reading-paths/custom/mine`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},rN=async e=>{try{return(await ce.get(`${ge}/${e}/reading-paths/author-recommended`)).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},sN=async(e,t=null)=>{try{const n=t?{currentChapterId:t}:{};return(await ce.get(`${ge}/${e}/reading-paths/random/next`,{params:n})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},Df=async e=>{try{return(await ce.get(`${ge}/${e}/chapters/tree`)).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},lN=async e=>{try{const t=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/favorite`,{},{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},aN=async e=>{try{const t=localStorage.getItem("token");return t?(await ce.get(`${ge}/${e}/favorite/status`,{headers:{Authorization:`Bearer ${t}`}})).data:{success:!0,isFavorited:!1}}catch(t){return t.response?t.response.data:{success:!1,message:""}}},oN=async(e,t)=>{try{const n=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/chapters/${t}/like`,{},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},iN=async(e,t)=>{try{const n=localStorage.getItem("token"),r=n?{headers:{Authorization:`Bearer ${n}`}}:{};return(await ce.get(`${ge}/${e}/chapters/${t}/like/status`,r)).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},cN=async(e,t)=>{try{return(await ce.get(`${ge}/${e}/chapters/${t}/likes/count`)).data}catch(n){return n.response?n.response.data:{success:!1,message:""}}},dN=async e=>{try{const t=localStorage.getItem("token");return(await ce.post(`${ge}/comments/${e}/like`,{},{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},uN=async(e,t,n=1,r=20)=>{try{const l=localStorage.getItem("token"),a=l?{headers:{Authorization:`Bearer ${l}`}}:{};return(await ce.get(`${ge}/${e}/chapters/${t}/comments?page=${n}&limit=${r}`,a)).data}catch(l){return l.response?l.response.data:{success:!1,message:""}}},Tm=async(e,t,n,r=null)=>{try{const l=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/chapters/${t}/comments`,{content:n,parentCommentId:r},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){return l.response?l.response.data:{success:!1,message:""}}},mN=async(e,t=1,n=10)=>{try{const r=localStorage.getItem("token"),l=r?{headers:{Authorization:`Bearer ${r}`}}:{};return(await ce.get(`${ge}/comments/${e}/replies?page=${t}&limit=${n}`,l)).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},hN=async e=>{try{const t=localStorage.getItem("token");return(await ce.delete(`${ge}/comments/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},fN=async(e,t,n,r="")=>{try{const l=localStorage.getItem("token");return(await ce.post(`${ge}/${e}/chapters/${t}/report`,{reason:n,description:r},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){return l.response?l.response.data:{success:!1,message:""}}},pN=async(e,t,n="")=>{try{const r=localStorage.getItem("token");return(await ce.post(`${ge}/comments/${e}/report`,{reason:t,description:n},{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},gN=()=>{const{user:e,isAuthenticated:t}=it(),n=ot(),[r,l]=h.useState({totalNovels:0,activeNovels:0,totalCreators:0,totalChapters:0}),[a,i]=h.useState([]),[c,d]=h.useState([]),[u,v]=h.useState(!0),y=f=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[f]||f;h.useEffect(()=>{b()},[]);const b=async()=>{try{v(!0);const f=await Uf();if(f.success&&(l(f.stats),f.tagStats&&Array.isArray(f.tagStats))){const _=f.tagStats.sort((x,m)=>{const p=parseInt(x.novelcount||x.novelCount||0),S=parseInt(m.novelcount||m.novelCount||0);if(p!==S)return S-p;const R=new Date(x.latestupdate||x.latestUpdate);return new Date(m.latestupdate||m.latestUpdate)-R});d(_)}const N=await Af({limit:6,sortBy:"updated_at"});N.success&&i(N.novels||[])}catch(f){console.error(":",f)}finally{v(!1)}},C=f=>{n(`/novel/${f}`)};return o("div",{className:"gradient-bg min-h-screen",children:[o("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[s("div",{className:"ornament absolute top-20 left-20 w-16 h-16 opacity-30"}),s("div",{className:"ornament absolute top-40 right-32 w-12 h-12 opacity-20"}),s("div",{className:"ornament absolute bottom-32 left-32 w-20 h-20 opacity-25"}),s("div",{className:"ornament absolute bottom-20 right-20 w-14 h-14 opacity-30"}),s("div",{className:"absolute top-1/4 left-10 w-2 h-2 bg-slate-300 rounded-full opacity-40"}),s("div",{className:"absolute top-1/3 right-16 w-1 h-1 bg-slate-400 rounded-full opacity-30"}),s("div",{className:"absolute bottom-1/4 left-1/4 w-3 h-3 bg-slate-200 rounded-full opacity-50"}),s("div",{className:"absolute bottom-1/3 right-1/4 w-2 h-2 bg-slate-300 rounded-full opacity-40"})]}),s(_e,{}),o("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o("section",{className:"text-center mb-16",children:[s("h2",{className:"text-4xl md:text-6xl font-light text-slate-700 mb-6 text-glow",children:""}),s("p",{className:"text-lg md:text-xl text-slate-600 mb-8 max-w-3xl mx-auto",children:""}),s("form",{onSubmit:f=>{f.preventDefault();const N=f.target.homeSearch.value.trim();N&&(window.location.href=`/search?q=${encodeURIComponent(N)}`)},className:"max-w-2xl mx-auto mb-8",children:o("div",{className:"relative",children:[s("input",{type:"text",name:"homeSearch",placeholder:"...",className:"w-full px-6 py-4 text-lg border border-slate-300 rounded-full focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent shadow-lg bg-white/90 backdrop-blur-sm"}),s("button",{type:"submit",className:"absolute right-2 top-2 px-6 py-2 bg-slate-700 text-white rounded-full hover:bg-slate-800 transition-colors",children:""})]})}),o("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t?s(ee,{to:"/dashboard",className:"bg-slate-700 text-white px-8 py-3 rounded-lg text-lg hover:bg-slate-800 transition-colors btn-transition btn-hover",children:""}):s(ee,{to:"/register",className:"bg-slate-700 text-white px-8 py-3 rounded-lg text-lg hover:bg-slate-800 transition-colors btn-transition btn-hover",children:""}),s(ee,{to:"/explore",className:"border border-slate-300 text-slate-700 px-8 py-3 rounded-lg text-lg hover:bg-slate-50 transition-colors btn-transition",children:""})]})]}),s("section",{className:"mb-16",children:o("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[o("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center card-shadow",children:[s("div",{className:"text-3xl font-bold text-slate-700 mb-2",children:u?"...":r.totalNovels.toLocaleString()}),s("div",{className:"text-slate-600",children:""})]}),o("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center card-shadow",children:[s("div",{className:"text-3xl font-bold text-slate-700 mb-2",children:u?"...":r.activeNovels.toLocaleString()}),s("div",{className:"text-slate-600",children:""})]}),o("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center card-shadow",children:[s("div",{className:"text-3xl font-bold text-slate-700 mb-2",children:u?"...":r.totalCreators.toLocaleString()}),s("div",{className:"text-slate-600",children:""})]}),o("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center card-shadow",children:[s("div",{className:"text-3xl font-bold text-slate-700 mb-2",children:u?"...":r.totalChapters.toLocaleString()}),s("div",{className:"text-slate-600",children:""})]})]})}),o("section",{className:"mb-16",children:[o("div",{className:"flex justify-between items-center mb-8",children:[o("h3",{className:"text-2xl md:text-3xl font-medium text-slate-700 inline-flex items-center gap-2",children:[s(vl,{className:"w-6 h-6",stroke:1.8})," "]}),s(ee,{to:"/explore",className:"text-slate-600 hover:text-slate-900 transition-colors",children:" "})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u?Array.from({length:6}).map((f,N)=>s("div",{className:"novel-card bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden card-shadow animate-pulse",children:o("div",{className:"flex",children:[s("div",{className:"flex-shrink-0 p-3 flex items-center justify-center",children:s("div",{className:"w-32 h-40 bg-slate-200 rounded-lg"})}),o("div",{className:"flex-1 p-4 md:p-6",children:[s("div",{className:"h-4 bg-slate-200 rounded mb-3"}),s("div",{className:"h-6 bg-slate-200 rounded mb-2"}),s("div",{className:"h-4 bg-slate-200 rounded mb-2"}),s("div",{className:"h-4 bg-slate-200 rounded mb-4 w-3/4"}),o("div",{className:"flex justify-between",children:[s("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),s("div",{className:"h-4 bg-slate-200 rounded w-1/4"})]})]})]})},N)):a.length>0?a.map(f=>{var N,_,x,m;return s("button",{onClick:()=>C(f.id),className:"text-left novel-card bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden card-shadow hover:shadow-lg transition-shadow",children:o("div",{className:"flex",children:[s("div",{className:"flex-shrink-0 p-3 flex items-center justify-center",children:s(Er,{title:f.title,author:((N=f.author)==null?void 0:N.username)||f.author_name||"",theme:"default",coverUrl:f.cover_image_url,className:"w-32 h-40"})}),o("div",{className:"flex-1 p-4 md:p-6",children:[o("div",{className:"flex items-center justify-between mb-3",children:[o("span",{className:"text-sm text-slate-500",children:[f.tags&&f.tags.length>0?f.tags[0]:"","  ",y(f.novel_type)]}),s("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:""})]}),s("h4",{className:"text-lg font-medium text-slate-700 mb-2",children:f.title}),s("p",{className:"text-slate-600 text-sm mb-4 line-clamp-2",children:f.description||"..."}),o("div",{className:"flex items-center justify-between text-sm text-slate-500",children:[o("span",{children:["",(_=f.author)!=null&&_.id?s(ee,{to:`/profile/${f.author.id}`,className:"text-slate-600 hover:text-slate-800 transition-colors",onClick:p=>p.stopPropagation(),children:((x=f.author)==null?void 0:x.username)||f.author_name||""}):((m=f.author)==null?void 0:m.username)||f.author_name||""]}),o("span",{className:"inline-flex items-center gap-1",children:[s(Pf,{className:"w-4 h-4",stroke:1.8})," ",f.total_chapters||0,""]})]})]})]})},f.id)}):o("div",{className:"col-span-full text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-12 h-12 text-slate-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500",children:""})]})})]}),o("section",{className:"mb-16",children:[o("h3",{className:"text-2xl md:text-3xl font-medium text-slate-700 mb-8 inline-flex items-center gap-2",children:[s(bb,{className:"w-6 h-6",stroke:1.8})," "]}),s("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:u?Array.from({length:6}).map((f,N)=>o("div",{className:"category-tag bg-slate-100 text-slate-700 px-4 py-3 rounded-lg text-center animate-pulse",children:[s("div",{className:"flex items-center justify-center mb-2",children:s(Cc,{className:"w-6 h-6",stroke:1.8})}),s("div",{className:"h-4 bg-slate-200 rounded"})]},N)):c.length>0?c.map(f=>o(ee,{to:`/explore?tag=${encodeURIComponent(f.name)}`,className:"category-tag bg-slate-100 text-slate-700 px-4 py-3 rounded-lg text-center cursor-pointer hover:bg-slate-200 transition-colors",children:[s("div",{className:"flex items-center justify-center mb-2",children:s(Cc,{className:"w-6 h-6",stroke:1.8})}),s("div",{className:"text-sm font-medium",children:f.name}),o("div",{className:"text-xs text-slate-500 mt-1",children:[f.novelcount||f.novelCount||0,""]})]},f.name)):o("div",{className:"col-span-full text-center py-8",children:[s(Me,{className:"w-12 h-12 text-slate-400",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]})})]}),o("section",{className:"mb-16",children:[s("h3",{className:"text-2xl md:text-3xl font-medium text-slate-700 mb-8 text-center",children:""}),o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o("div",{className:"text-center",children:[s("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(_b,{className:"w-8 h-8 text-blue-600",stroke:1.8})}),s("h4",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-600",children:""})]}),o("div",{className:"text-center",children:[s("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(wb,{className:"w-8 h-8 text-green-600",stroke:1.8})}),s("h4",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-600",children:""})]}),o("div",{className:"text-center",children:[s("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(Mb,{className:"w-8 h-8 text-purple-600",stroke:1.8})}),s("h4",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-600",children:""})]})]})]}),s("section",{className:"text-center mb-16",children:o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-8 md:p-12 card-shadow",children:[s("h3",{className:"text-2xl md:text-3xl font-medium text-slate-700 mb-4",children:""}),s("p",{className:"text-slate-600 mb-8 max-w-2xl mx-auto",children:""}),o("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t?s(ee,{to:"/dashboard",className:"bg-slate-700 text-white px-8 py-3 rounded-lg text-lg hover:bg-slate-800 transition-colors btn-transition btn-hover",children:""}):s(ee,{to:"/register",className:"bg-slate-700 text-white px-8 py-3 rounded-lg text-lg hover:bg-slate-800 transition-colors btn-transition btn-hover",children:""}),s(ee,{to:"/about",className:"border border-slate-300 text-slate-700 px-8 py-3 rounded-lg text-lg hover:bg-slate-50 transition-colors btn-transition",children:""})]})]})})]}),s(mt,{})]})},Hf=e=>!e||e.trim().length===0?{isValid:!1,message:""}:e.length<3||e.length>20?{isValid:!1,message:"3-20"}:/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(e)?{isValid:!0,message:""}:{isValid:!1,message:""},Tc=e=>!e||e.trim().length===0?{isValid:!1,message:""}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{isValid:!0,message:""}:{isValid:!1,message:""},Vf=e=>!e||e.length===0?{isValid:!1,message:""}:e.length<6||e.length>50?{isValid:!1,message:"6-50"}:/^(?=.*[a-zA-Z])(?=.*\d)/.test(e)?{isValid:!0,message:""}:{isValid:!1,message:""},Wf=(e,t)=>!t||t.length===0?{isValid:!1,message:""}:e!==t?{isValid:!1,message:""}:{isValid:!0,message:""},Xf=(e,t)=>{const n={};if(t==="register"){const r=Hf(e.username);r.isValid||(n.username=r.message);const l=Tc(e.email);l.isValid||(n.email=l.message);const a=Vf(e.password);a.isValid||(n.password=a.message);const i=Wf(e.password,e.confirmPassword);i.isValid||(n.confirmPassword=i.message),e.agreeToTerms||(n.agreeToTerms="")}else if(t==="login"){const r=Tc(e.email);r.isValid||(n.email=r.message),(!e.password||e.password.length===0)&&(n.password="")}return{isValid:Object.keys(n).length===0,errors:n}},eo=(e,t,n={})=>{switch(e){case"username":return Hf(t);case"email":return Tc(t);case"password":return Vf(t);case"confirmPassword":return Wf(n.password,t);default:return{isValid:!0,message:""}}},xN=()=>{const[e,t]=h.useState({email:"",password:"",rememberMe:!1}),[n,r]=h.useState(!1),[l,a]=h.useState(""),[i,c]=h.useState({}),[d,u]=h.useState({}),{login:v}=it(),y=ot(),b=N=>{const{name:_,value:x,type:m,checked:p}=N.target;if(t(S=>({...S,[_]:m==="checkbox"?p:x})),d[_]){const S=eo(_,x,e);c(R=>({...R,[_]:S.isValid?"":S.message}))}},C=N=>{const{name:_,value:x}=N.target;u(p=>({...p,[_]:!0}));const m=eo(_,x,e);c(p=>({...p,[_]:m.isValid?"":m.message}))},f=async N=>{N.preventDefault(),a("");const _=Xf(e,"login");if(!_.isValid){c(_.errors);return}r(!0);try{const x=await v(e.email,e.password);x.success?y("/"):a(x.message)}catch{a("")}finally{r(!1)}};return o("div",{className:"gradient-bg min-h-screen",children:[o("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[s("div",{className:"ornament absolute top-20 left-20 w-16 h-16 opacity-30"}),s("div",{className:"ornament absolute top-40 right-32 w-12 h-12 opacity-20"}),s("div",{className:"ornament absolute bottom-32 left-32 w-20 h-20 opacity-25"}),s("div",{className:"ornament absolute bottom-20 right-20 w-14 h-14 opacity-30"}),s("div",{className:"absolute top-1/4 left-10 w-2 h-2 bg-slate-300 rounded-full opacity-40"}),s("div",{className:"absolute top-1/3 right-16 w-1 h-1 bg-slate-400 rounded-full opacity-30"}),s("div",{className:"absolute bottom-1/4 left-1/4 w-3 h-3 bg-slate-200 rounded-full opacity-50"}),s("div",{className:"absolute bottom-1/3 right-1/4 w-2 h-2 bg-slate-300 rounded-full opacity-40"})]}),o("div",{className:"min-h-screen flex items-center justify-center p-4",children:[o("div",{className:"hidden lg:flex w-full max-w-6xl",children:[s("div",{className:"w-1/2 flex items-center justify-center relative",children:o("div",{className:"text-center",children:[o("div",{className:"mb-8",children:[s("h1",{className:"text-6xl font-light text-slate-700 mb-4 text-glow",children:""}),s("p",{className:"text-xl text-slate-600 font-light",children:""})]}),o("div",{className:"space-y-6",children:[o("div",{className:"flex items-center justify-center space-x-4",children:[s("div",{className:"w-3 h-3 bg-slate-400 rounded-full"}),s("div",{className:"w-2 h-2 bg-slate-300 rounded-full"}),s("div",{className:"w-1 h-1 bg-slate-200 rounded-full"})]}),s("p",{className:"text-slate-500 text-sm",children:""}),s("div",{className:"flex justify-center",children:s("div",{className:"w-20 h-px bg-gradient-to-r from-transparent via-slate-300 to-transparent"})}),o("div",{className:"grid grid-cols-2 gap-4 text-left max-w-xs mx-auto",children:[o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]})]})]})]})}),s("div",{className:"w-1/2 flex items-center justify-center",children:s("div",{className:"w-full max-w-md",children:o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-8 card-shadow",children:[o("div",{className:"text-center mb-8",children:[s("h2",{className:"text-3xl font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500",children:""})]}),l&&s("div",{className:"mb-6 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:l}),o("form",{onSubmit:f,className:"space-y-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"email",name:"email",value:e.email,onChange:b,onBlur:C,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.email?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.email&&s("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"password",name:"password",value:e.password,onChange:b,onBlur:C,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.password?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.password&&s("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),o("div",{className:"flex items-center justify-between",children:[o("label",{className:"flex items-center",children:[s("input",{type:"checkbox",name:"rememberMe",checked:e.rememberMe,onChange:b,className:"w-4 h-4 text-slate-600 border-slate-300 rounded focus:ring-slate-500"}),s("span",{className:"ml-2 text-sm text-slate-600",children:""})]}),s(ee,{to:"/forgot-password",className:"text-sm text-slate-500 hover:text-slate-700 transition-colors",children:""})]}),s("button",{type:"submit",disabled:n,className:"w-full bg-slate-700 text-white py-3 px-6 rounded-lg font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?"...":""})]}),s("div",{className:"mt-6 text-center",children:o("p",{className:"text-slate-500",children:["",s(ee,{to:"/register",className:"text-slate-700 font-medium hover:text-slate-900 transition-colors ml-1",children:""})]})})]})})})]}),o("div",{className:"lg:hidden w-full max-w-sm",children:[o("div",{className:"text-center mb-8",children:[s("h1",{className:"text-4xl font-light text-slate-700 mb-2 text-glow",children:""}),s("p",{className:"text-slate-600 font-light",children:""})]}),o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 card-shadow",children:[o("div",{className:"text-center mb-6",children:[s("h2",{className:"text-2xl font-medium text-slate-700 mb-1",children:""}),s("p",{className:"text-slate-500 text-sm",children:""})]}),l&&s("div",{className:"mb-6 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:l}),o("form",{onSubmit:f,className:"space-y-5",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"email",name:"email",value:e.email,onChange:b,onBlur:C,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.email?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.email&&s("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"password",name:"password",value:e.password,onChange:b,onBlur:C,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.password?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.password&&s("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),o("div",{className:"flex items-center justify-between",children:[o("label",{className:"flex items-center",children:[s("input",{type:"checkbox",name:"rememberMe",checked:e.rememberMe,onChange:b,className:"w-4 h-4 text-slate-600 border-slate-300 rounded focus:ring-slate-500"}),s("span",{className:"ml-2 text-sm text-slate-600",children:""})]}),s(ee,{to:"/forgot-password",className:"text-sm text-slate-500 hover:text-slate-700 transition-colors",children:""})]}),s("button",{type:"submit",disabled:n,className:"w-full bg-slate-700 text-white py-3 px-6 rounded-lg font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?"...":""})]}),s("div",{className:"mt-6 text-center",children:o("p",{className:"text-slate-500 text-sm",children:["",s(ee,{to:"/register",className:"text-slate-700 font-medium hover:text-slate-900 transition-colors ml-1",children:""})]})})]})]})]})]})},vN=()=>{var p,S;const[e,t]=h.useState({username:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}),[n,r]=h.useState(!1),[l,a]=h.useState(""),[i,c]=h.useState({}),[d,u]=h.useState({}),{register:v}=it(),y=ot(),[b,C]=h.useState(null),f=R=>{const{name:g,value:$,type:T,checked:q}=R.target;if(t(L=>({...L,[g]:T==="checkbox"?q:$})),d[g]){const L=eo(g,$,e);c(B=>({...B,[g]:L.isValid?"":L.message}))}},N=R=>{const{name:g,value:$}=R.target;u(q=>({...q,[g]:!0}));const T=eo(g,$,e);c(q=>({...q,[g]:T.isValid?"":T.message}))},_=async R=>{R.preventDefault(),a("");const g=Xf(e,"register");if(!g.isValid){c(g.errors);return}r(!0);try{const $=await v(e.username,e.email,e.password);$.success?y("/"):a($.message)}catch{a("")}finally{r(!1)}},x={terms:{title:"",content:o(wt,{children:[s("p",{className:"mb-3",children:""}),s("p",{className:"mb-3",children:""}),s("p",{className:"mb-3",children:""})]})},privacy:{title:"",content:o(wt,{children:[s("p",{className:"mb-3",children:""}),s("p",{className:"mb-3",children:""}),s("p",{className:"mb-3",children:""})]})}},m=({title:R,content:g,onClose:$})=>o("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:$}),o("div",{className:"relative bg-white rounded-2xl shadow-2xl w-11/12 max-w-lg mx-auto p-6",children:[o("div",{className:"flex items-start justify-between mb-3",children:[s("h4",{className:"text-lg font-medium text-slate-800",children:R}),s("button",{"aria-label":"",onClick:$,className:"text-slate-500 hover:text-slate-700 transition-colors",children:""})]}),s("div",{className:"text-slate-700 leading-7",children:g}),s("div",{className:"mt-6 text-right",children:s("button",{onClick:$,className:"px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700 transition-colors",children:""})})]})]});return o("div",{className:"gradient-bg min-h-screen",children:[o("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[s("div",{className:"ornament absolute top-20 left-20 w-16 h-16 opacity-30"}),s("div",{className:"ornament absolute top-40 right-32 w-12 h-12 opacity-20"}),s("div",{className:"ornament absolute bottom-32 left-32 w-20 h-20 opacity-25"}),s("div",{className:"ornament absolute bottom-20 right-20 w-14 h-14 opacity-30"}),s("div",{className:"absolute top-1/4 left-10 w-2 h-2 bg-slate-300 rounded-full opacity-40"}),s("div",{className:"absolute top-1/3 right-16 w-1 h-1 bg-slate-400 rounded-full opacity-30"}),s("div",{className:"absolute bottom-1/4 left-1/4 w-3 h-3 bg-slate-200 rounded-full opacity-50"}),s("div",{className:"absolute bottom-1/3 right-1/4 w-2 h-2 bg-slate-300 rounded-full opacity-40"})]}),o("div",{className:"min-h-screen flex items-center justify-center p-4",children:[o("div",{className:"hidden lg:flex w-full max-w-6xl",children:[s("div",{className:"w-1/2 flex items-center justify-center relative",children:o("div",{className:"text-center",children:[o("div",{className:"mb-8",children:[s("h1",{className:"text-6xl font-light text-slate-700 mb-4 text-glow",children:""}),s("p",{className:"text-xl text-slate-600 font-light",children:""})]}),o("div",{className:"space-y-6",children:[o("div",{className:"flex items-center justify-center space-x-4",children:[s("div",{className:"w-3 h-3 bg-slate-400 rounded-full"}),s("div",{className:"w-2 h-2 bg-slate-300 rounded-full"}),s("div",{className:"w-1 h-1 bg-slate-200 rounded-full"})]}),s("p",{className:"text-slate-500 text-sm",children:""}),s("div",{className:"flex justify-center",children:s("div",{className:"w-20 h-px bg-gradient-to-r from-transparent via-slate-300 to-transparent"})}),o("div",{className:"grid grid-cols-2 gap-4 text-left max-w-xs mx-auto",children:[o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 justify-center",children:[s("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),s("span",{className:"text-xs text-slate-600",children:""})]})]})]})]})}),s("div",{className:"w-1/2 flex items-center justify-center",children:s("div",{className:"w-full max-w-md",children:o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-8 card-shadow",children:[o("div",{className:"text-center mb-8",children:[s("h2",{className:"text-3xl font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500",children:""})]}),l&&s("div",{className:"mb-6 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:l}),o("form",{onSubmit:_,className:"space-y-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"text",name:"username",value:e.username,onChange:f,onBlur:N,required:!0,minLength:3,maxLength:20,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.username?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:"3-20"}),i.username&&s("p",{className:"mt-1 text-sm text-red-600",children:i.username})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"email",name:"email",value:e.email,onChange:f,onBlur:N,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.email?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.email&&s("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"password",name:"password",value:e.password,onChange:f,onBlur:N,required:!0,minLength:6,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.password?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:"6"}),i.password&&s("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:f,onBlur:N,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.confirmPassword?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.confirmPassword&&s("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),o("div",{className:"flex items-start",children:[s("input",{type:"checkbox",name:"agreeToTerms",checked:e.agreeToTerms,onChange:f,required:!0,className:"w-4 h-4 text-slate-600 border-slate-300 rounded focus:ring-slate-500 mt-1"}),o("span",{className:"ml-2 text-sm text-slate-600",children:["",s("button",{type:"button",onClick:()=>C("terms"),className:"text-slate-700 hover:text-slate-900 transition-colors mx-1 underline",children:""}),"",s("button",{type:"button",onClick:()=>C("privacy"),className:"text-slate-700 hover:text-slate-900 transition-colors mx-1 underline",children:""})]})]}),i.agreeToTerms&&s("p",{className:"text-sm text-red-600",children:i.agreeToTerms}),s("button",{type:"submit",disabled:n,className:"w-full bg-slate-700 text-white py-3 px-6 rounded-lg font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?"...":""})]}),s("div",{className:"mt-6 text-center",children:o("p",{className:"text-slate-500",children:["",s(ee,{to:"/login",className:"text-slate-700 font-medium hover:text-slate-900 transition-colors ml-1",children:""})]})})]})})})]}),s("div",{className:"lg:hidden w-full max-w-sm",children:o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 card-shadow",children:[o("div",{className:"text-center mb-6",children:[s("h2",{className:"text-2xl font-medium text-slate-700 mb-1",children:""}),s("p",{className:"text-slate-500 text-sm",children:""})]}),l&&s("div",{className:"mb-6 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:l}),o("form",{onSubmit:_,className:"space-y-5",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"text",name:"username",value:e.username,onChange:f,onBlur:N,required:!0,minLength:3,maxLength:20,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.username?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:"3-20"}),i.username&&s("p",{className:"mt-1 text-sm text-red-600",children:i.username})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"email",name:"email",value:e.email,onChange:f,onBlur:N,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.email?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.email&&s("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"password",name:"password",value:e.password,onChange:f,onBlur:N,required:!0,minLength:6,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.password?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:"6"}),i.password&&s("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"password",name:"confirmPassword",value:e.password,onChange:f,onBlur:N,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${i.confirmPassword?"border-red-300 focus:border-red-400 focus:ring-red-200":"border-slate-200 focus:border-slate-400 focus:ring-slate-200"}`,placeholder:""}),i.confirmPassword&&s("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),o("div",{className:"flex items-start",children:[s("input",{type:"checkbox",name:"agreeToTerms",checked:e.agreeToTerms,onChange:f,required:!0,className:"w-4 h-4 text-slate-600 border-slate-300 rounded focus:ring-slate-500 mt-1"}),o("span",{className:"ml-2 text-sm text-slate-600",children:["",s(ee,{to:"/terms",className:"text-slate-700 hover:text-slate-900 transition-colors mx-1",children:""}),"",s(ee,{to:"/privacy",className:"text-slate-700 hover:text-slate-900 transition-colors mx-1",children:""})]})]}),i.agreeToTerms&&s("p",{className:"text-sm text-red-600",children:i.agreeToTerms}),s("button",{type:"submit",disabled:n,className:"w-full bg-slate-700 text-white py-3 px-6 rounded-lg font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?"...":""})]}),s("div",{className:"mt-6 text-center",children:o("p",{className:"text-slate-500 text-sm",children:["",s(ee,{to:"/login",className:"text-slate-700 font-medium hover:text-slate-900 transition-colors ml-1",children:""})]})})]})})]}),b&&s(m,{title:(p=x[b])==null?void 0:p.title,content:(S=x[b])==null?void 0:S.content,onClose:()=>C(null)})]})},yN=()=>{const{user:e,isAuthenticated:t}=it(),n=ot(),[r,l]=h.useState([]),[a,i]=h.useState([]),[c,d]=h.useState(!0),[u,v]=h.useState(!1),[y,b]=h.useState("mine"),[C,f]=h.useState(!1),[N,_]=h.useState(!1),[x,m]=h.useState(""),[p,S]=h.useState(""),[R,g]=h.useState(!1),[$,T]=h.useState(""),[q,L]=h.useState(""),[B,Z]=h.useState("info"),[se,U]=h.useState(null),[V,G]=h.useState({title:"",description:"",novelType:"traditional",isBranchingEnabled:!1,requiresApproval:!1,autoApproveDays:7,allowWebsiteUsage:!0,tags:[],characters:"",worldBackground:"",otherSettings:"",coverTheme:"default"}),[X,A]=h.useState("");h.useEffect(()=>{t&&(y==="mine"?te():re())},[t,n,y]);const te=async()=>{try{d(!0);const j=await Vb();j.success?l(j.novels||[]):m(j.message||"")}catch{m("")}finally{d(!1)}},re=async()=>{try{v(!0);const j=await Wb();j.success?i(j.novels||[]):m(j.message||"")}catch{m("")}finally{v(!1)}},ae=j=>{const{name:E,value:w,type:I,checked:O}=j.target;if(E==="novelType"){const H=w;G(K=>({...K,novelType:H,isBranchingEnabled:H==="author_original"}))}else G(E==="isBranchingEnabled"?H=>({...H,[E]:O,novelType:O?"author_original":"traditional"}):H=>({...H,[E]:I==="checkbox"?O:w}))},de=()=>{X.trim()&&!V.tags.includes(X.trim())&&(G(j=>({...j,tags:[...j.tags,X.trim()]})),A(""))},Ne=j=>{G(E=>({...E,tags:E.tags.filter(w=>w!==j)}))},Ce=async j=>{if(j.preventDefault(),!V.title.trim()){m("");return}try{_(!0),m("");const E=await Hb(V);E.success?(S(""),f(!1),G({title:"",description:"",novelType:"traditional",isBranchingEnabled:!1,requiresApproval:!1,autoApproveDays:7,allowWebsiteUsage:!0,tags:[],characters:"",worldBackground:"",otherSettings:""}),te()):m(E.message||"")}catch{m("")}finally{_(!1)}},M=async j=>{let E=r.find(I=>I.id===j);try{const I=await bs(j);I&&I.success&&I.novel&&(E=I.novel)}catch{}if(E&&(E.novel_type==="mountain_beyond_mountain"||E.novel_type==="infinite_point")&&E.has_other_contributors){T(""),L(""),Z("info"),U(null),g(!0);return}T(""),L(""),Z("confirm"),U(j),g(!0)},W=async()=>{if(!se){g(!1);return}try{const j=await Xb(se);j.success?(S(""),te()):m(j.message||"")}catch{m("")}finally{U(null),g(!1)}},Y=j=>{n(`/novel/${j.id}/edit`)},oe=j=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[j]||j,pe=j=>new Date(j).toLocaleDateString("zh-CN");return t?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),o("div",{className:"container mx-auto px-4 py-8",children:[o("div",{className:"text-center mb-8",children:[s("h1",{className:"text-4xl font-light text-slate-700 mb-4",children:""}),o("p",{className:"text-slate-600",children:["",(e==null?void 0:e.username)||""]})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-3 bg-blue-100 rounded-lg",children:s(Me,{className:"w-6 h-6 text-blue-600",stroke:1.8})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-slate-600",children:""}),s("p",{className:"text-2xl font-semibold text-slate-900",children:r.length})]})]})}),s("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-3 bg-green-100 rounded-lg",children:s(hs,{className:"w-6 h-6 text-green-600",stroke:1.8})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-slate-600",children:""}),s("p",{className:"text-2xl font-semibold text-slate-900",children:r.filter(j=>j.status==="published").length})]})]})}),s("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-3 bg-purple-100 rounded-lg",children:s(Ec,{className:"w-6 h-6 text-purple-600",stroke:1.8})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-slate-600",children:""}),s("p",{className:"text-2xl font-semibold text-slate-900",children:r.reduce((j,E)=>j+(E.total_words||0),0).toLocaleString()})]})]})})]}),o("div",{className:"flex justify-between items-center mb-6",children:[o("div",{className:"flex items-center gap-2",children:[s("button",{onClick:()=>b("mine"),className:`px-4 py-2 rounded-lg border transition-colors ${y==="mine"?"bg-slate-700 text-white border-slate-700":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:""}),s("button",{onClick:()=>b("participated"),className:`px-4 py-2 rounded-lg border transition-colors ${y==="participated"?"bg-slate-700 text-white border-slate-700":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:""})]}),o("button",{onClick:()=>f(!0),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors flex items-center",children:[s(Lf,{className:"w-5 h-5 mr-2",stroke:1.8}),""]})]}),x&&s("div",{className:"mb-6 p-4 bg-red-100 border border-red-300 text-red-700 rounded-lg",children:x}),p&&s("div",{className:"mb-6 p-4 bg-green-100 border border-green-300 text-green-700 rounded-lg",children:p}),C&&s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o("div",{className:"flex justify-between items-center mb-6",children:[s("h3",{className:"text-2xl font-medium text-slate-700",children:""}),s("button",{onClick:()=>f(!1),className:"text-slate-400 hover:text-slate-600",children:s(Et,{className:"w-6 h-6",stroke:1.8})})]}),o("form",{onSubmit:Ce,className:"space-y-6",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{className:"group relative",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:" *"}),s("input",{type:"text",name:"title",value:V.title,onChange:ae,required:!0,className:"w-full px-4 py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200",placeholder:""}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]}),o("div",{className:"group relative",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),o("select",{name:"novelType",value:V.novelType,onChange:ae,className:"w-full px-4 py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200",children:[s("option",{value:"traditional",children:""}),s("option",{value:"author_original",children:""}),s("option",{value:"mountain_beyond_mountain",children:""}),s("option",{value:"infinite_point",children:""})]}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]})]}),o("div",{className:"group relative",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"description",value:V.description,onChange:ae,rows:3,className:"w-full px-4 py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200",placeholder:""}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]}),o("div",{className:"group relative",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),o("div",{className:"flex items-center space-x-2 mb-2",children:[s("input",{type:"text",value:X,onChange:j=>A(j.target.value),onKeyPress:j=>j.key==="Enter"&&(j.preventDefault(),de()),className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200",placeholder:""}),s("button",{type:"button",onClick:de,className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700",children:""})]}),s("div",{className:"flex flex-wrap gap-2",children:V.tags.map((j,E)=>o("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm flex items-center",children:[j,s("button",{type:"button",onClick:()=>Ne(j),className:"ml-2 text-slate-400 hover:text-slate-600",children:""})]},E))}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{className:"group relative",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"characters",value:V.characters,onChange:ae,rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200",placeholder:""}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]}),o("div",{className:"group relative",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"worldBackground",value:V.worldBackground,onChange:ae,rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200",placeholder:""}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]})]}),o("div",{className:"group relative",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"otherSettings",value:V.otherSettings,onChange:ae,rows:3,className:"w-full px-4 py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200",placeholder:""}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]}),o("div",{className:"flex items-center space-x-6",children:[V.novelType==="traditional"&&o("label",{className:"flex items-center group relative",children:[s("input",{type:"checkbox",name:"isBranchingEnabled",checked:V.isBranchingEnabled,onChange:ae,className:"w-4 h-4 text-slate-600 border-slate-300 rounded focus:ring-slate-500"}),s("span",{className:"ml-2 text-sm text-slate-600",children:""}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:['""',s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]}),o("label",{className:"flex items-center group relative",children:[s("input",{type:"checkbox",name:"allowWebsiteUsage",checked:V.allowWebsiteUsage,onChange:ae,className:"w-4 h-4 text-slate-600 border-slate-300 rounded focus:ring-slate-500"}),s("span",{className:"ml-2 text-sm text-slate-600",children:""}),o("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:["",s("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"})]})]})]}),o("div",{className:"flex justify-end space-x-4",children:[s("button",{type:"button",onClick:()=>f(!1),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:""}),s("button",{type:"submit",disabled:N,className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50",children:N?"...":""})]})]})]})}),y==="mine"?c?o("div",{className:"text-center py-12",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"}),s("p",{className:"mt-2 text-slate-600",children:"..."})]}):r.length===0?o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-12 h-12 text-slate-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:""}),s("button",{onClick:()=>f(!0),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:""})]}):s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(j=>o("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200 hover:shadow-xl transition-shadow",children:[o("div",{className:"flex gap-4 mb-4",children:[s(Er,{title:j.title,author:j.author_username||"",theme:"default",coverUrl:j.cover_image_url,size:"sm",className:"w-24 h-32 md:w-32 md:h-40"}),s("div",{className:"flex-1",children:o("div",{className:"flex justify-between items-start",children:[o("div",{className:"flex-1",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-2 line-clamp-2",children:j.title}),s("p",{className:"text-sm text-slate-500 mb-2",children:oe(j.novel_type)}),o("p",{className:"text-xs text-slate-400",children:[" ",pe(j.created_at)]})]}),o("div",{className:"flex space-x-2",children:[s("button",{onClick:()=>Y(j),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg",title:"",children:s(yl,{className:"w-4 h-4",stroke:1.8})}),s("button",{onClick:()=>M(j.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"",children:s(Of,{className:"w-4 h-4",stroke:1.8})})]})]})})]}),j.description&&s("p",{className:"text-sm text-slate-600 mb-4 line-clamp-3",children:j.description}),o("div",{className:"flex items-center justify-between text-sm text-slate-500",children:[o("span",{children:[": ",j.total_chapters||0]}),o("span",{children:[": ",(j.total_words||0).toLocaleString()]})]}),j.tags&&j.tags.length>0&&o("div",{className:"flex flex-wrap gap-1 mt-3",children:[j.tags.slice(0,3).map((E,w)=>s("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 rounded-full text-xs",children:E},w)),j.tags.length>3&&o("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 rounded-full text-xs",children:["+",j.tags.length-3]})]}),s("div",{className:"mt-4 pt-4 border-t border-slate-100",children:s("button",{onClick:()=>n(`/novel/${j.id}`),className:"w-full bg-slate-700 text-white py-2 px-4 rounded-lg hover:bg-slate-800 transition-colors text-sm",children:""})})]},j.id))}):u?o("div",{className:"text-center py-12",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"}),s("p",{className:"mt-2 text-slate-600",children:"..."})]}):a.length===0?o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-12 h-12 text-slate-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:""})]}):s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(j=>{var E,w;return o("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200 hover:shadow-xl transition-shadow",children:[o("div",{className:"flex gap-4 mb-4",children:[s(Er,{title:j.title,author:((E=j.author)==null?void 0:E.username)||"",theme:"default",coverUrl:j.cover_image_url,size:"sm",className:"w-24 h-32 md:w-32 md:h-40"}),o("div",{className:"flex-1",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-2 line-clamp-2",children:j.title}),s("p",{className:"text-sm text-slate-500 mb-1",children:oe(j.novel_type)}),o("p",{className:"text-xs text-slate-500",children:["",((w=j.author)==null?void 0:w.username)||""]})]})]}),j.description&&s("p",{className:"text-sm text-slate-600 mb-4 line-clamp-3",children:j.description}),o("div",{className:"flex items-center justify-between text-sm text-slate-500",children:[o("span",{children:[": ",j.total_chapters||0]}),o("span",{children:[": ",(j.total_words||0).toLocaleString()]})]}),s("div",{className:"mt-4 pt-4 border-t border-slate-100",children:s("button",{onClick:()=>n(`/novel/${j.id}`),className:"w-full bg-slate-700 text-white py-2 px-4 rounded-lg hover:bg-slate-800 transition-colors text-sm",children:""})})]},j.id)})})]}),s(mt,{}),R&&s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",children:[s("h3",{className:"text-lg font-medium text-slate-800 mb-3",children:$}),s("p",{className:"text-slate-600 mb-6",children:q}),o("div",{className:"flex justify-end space-x-3",children:[s("button",{onClick:()=>{g(!1),U(null)},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:""}),B==="confirm"&&s("button",{onClick:W,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:""})]})]})})]}):null},Id=({novel:e,chapters:t,linkMode:n="detail",currentChapterId:r,isDark:l=!1,viewCentered:a=!1,setViewCentered:i})=>{const c=h.useRef(null),d=h.useRef(null),[u,v]=h.useState(null),[y,b]=h.useState(!1),[C,f]=h.useState({scale:1,offsetX:0,offsetY:0,isDragging:!1,isPanning:!1,lastMouseX:0,lastMouseY:0,dragStartX:0,dragStartY:0}),[N,_]=h.useState([]),[x,m]=h.useState([]),[p,S]=h.useState(null),[R,g]=h.useState(null),[$,T]=h.useState(0),[q,L]=h.useState({x:0,y:0});h.useEffect(()=>{u?setTimeout(()=>b(!0),10):b(!1)},[u]);const B=()=>{b(!1),setTimeout(()=>v(null),300)};h.useEffect(()=>{if(!t||t.length===0)return;(()=>{const w=[],I=[];t.forEach(H=>{w.push({id:H.id,title:H.title,type:H.parent_chapter_id?"normal":"root",content:H.content,chapterType:H.chapter_type,authorId:H.author_id,authorUsername:H.author_username,x:0,y:0,width:160,height:80,isSelected:!1}),H.parent_chapter_id&&I.push({id:`${H.parent_chapter_id}-${H.id}`,source:H.parent_chapter_id,target:H.id,sourcePort:"right",targetPort:"left"})});const O=Z(w,I);_(O),m(I)})()},[t]);const Z=(E,w)=>{const I=E.filter(be=>be.type==="root"),O=[...E];if(I.length===0)return E;const H=I[0];H.x=100,H.y=100;const K=new Set,ue=[{node:H,level:0}];K.add(H.id);const ve=new Map;for(ve.set(0,[H.y]);ue.length>0;){const{node:be,level:ct}=ue.shift(),Ue=w.filter(kt=>kt.source===be.id).map(kt=>E.find(Rt=>Rt.id===kt.target)).filter(Boolean);if(Ue.length>0){const kt=ct+1;ve.has(kt)||ve.set(kt,[]),Ue.forEach((Rt,sr)=>{if(!K.has(Rt.id)){Rt.x=be.x+300;let Zt=be.y+(sr-(Ue.length-1)/2)*200;const zr=ve.get(kt);for(;zr.some(Ze=>Math.abs(Ze-Zt)<150);)Zt+=10;Rt.y=Zt,zr.push(Zt),K.add(Rt.id),ue.push({node:Rt,level:kt})}})}}return O},se=h.useCallback(()=>{const E=c.current;if(!E)return;const w=E.getContext("2d"),I=E.getBoundingClientRect();E.width=I.width*window.devicePixelRatio,E.height=I.height*window.devicePixelRatio,w.scale(window.devicePixelRatio,window.devicePixelRatio),w.clearRect(0,0,I.width,I.height),w.save(),w.translate(C.offsetX,C.offsetY),w.scale(C.scale,C.scale),U(w,I.width,I.height),V(w),A(w),w.restore()},[N,x,C,p]),U=(E,w,I)=>{const H=-C.offsetX/C.scale,K=-C.offsetY/C.scale;E.strokeStyle=l?"#374151":"#e5e7eb",E.lineWidth=1,E.globalAlpha=.3;for(let ue=H-H%20;ue<w+H;ue+=20)E.beginPath(),E.moveTo(ue,K),E.lineTo(ue,I+K),E.stroke();for(let ue=K-K%20;ue<I+K;ue+=20)E.beginPath(),E.moveTo(H,ue),E.lineTo(w+H,ue),E.stroke();E.globalAlpha=1},V=E=>{E.strokeStyle=l?"#6b7280":"#9ca3af",E.lineWidth=2,E.lineCap="round",x.forEach(w=>{const I=N.find(be=>be.id===w.source),O=N.find(be=>be.id===w.target);if(!I||!O)return;const H=G(I,w.sourcePort),K=G(O,w.targetPort);E.beginPath(),E.moveTo(H.x,H.y);const ue={x:H.x+(K.x-H.x)*.5,y:H.y},ve={x:H.x+(K.x-H.x)*.5,y:K.y};E.bezierCurveTo(ue.x,ue.y,ve.x,ve.y,K.x,K.y),E.stroke(),X(E,K,ve)})},G=(E,w)=>{switch(w){case"left":return{x:E.x,y:E.y+E.height/2};case"right":return{x:E.x+E.width,y:E.y+E.height/2};case"top":return{x:E.x+E.width/2,y:E.y};case"bottom":return{x:E.x+E.width/2,y:E.y+E.height};default:return{x:E.x+E.width/2,y:E.y+E.height/2}}},X=(E,w,I)=>{const O=Math.atan2(w.y-I.y,w.x-I.x),H=10,K=Math.PI/6;E.beginPath(),E.moveTo(w.x,w.y),E.lineTo(w.x-H*Math.cos(O-K),w.y-H*Math.sin(O-K)),E.moveTo(w.x,w.y),E.lineTo(w.x-H*Math.cos(O+K),w.y-H*Math.sin(O+K)),E.stroke()},A=E=>{N.forEach(w=>{E.shadowColor="rgba(0, 0, 0, 0.1)",E.shadowBlur=4,E.shadowOffsetX=2,E.shadowOffsetY=2;const I=ae(w.type,w.chapterType,w.id);E.fillStyle=I.fill,E.strokeStyle=I.stroke,E.lineWidth=w.isSelected?3:2,re(E,w.x,w.y,w.width,w.height,8),E.fill(),E.stroke(),E.shadowColor="transparent",E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.fillStyle="white",E.textAlign="center";const O=e.novel_type!=="traditional"&&w.authorUsername,H=15,K=O?12:0,ue=12;E.font="9px system-ui";const ve=w.content||"",be=ve.length>30?ve.substring(0,30)+"...":ve,ct=[];let Ue="";for(let Ze=0;Ze<be.length;Ze++){const $e=Ue+be[Ze];E.measureText($e).width>w.width-16&&Ue.length>0?(ct.push(Ue),Ue=be[Ze]):Ue=$e}Ue&&ct.push(Ue);const Rt=Math.min(ct.length,2)*ue,sr=H+K+Rt,Ut=w.y+(w.height-sr)/2;E.font="bold 11px system-ui",E.textBaseline="top",E.fillStyle="white";const Zt=w.title.length>18?w.title.substring(0,18)+"...":w.title;if(E.fillText(Zt,w.x+w.width/2,Ut),O){E.font="9px system-ui",E.fillStyle="rgba(255, 255, 255, 0.8)";const Ze=`@${w.authorUsername}`;E.measureText(Ze).width<w.width-16&&E.fillText(Ze,w.x+w.width/2,Ut+H)}E.font="9px system-ui",E.fillStyle="rgba(255, 255, 255, 0.7)",E.textBaseline="top";const zr=Ut+H+K;ct.slice(0,2).forEach((Ze,$e)=>{E.fillText(Ze,w.x+w.width/2,zr+$e*ue)}),te(E,w)})},te=(E,w)=>{if(!x.some(H=>H.source===w.id||H.target===w.id))return;const O=new Set;x.forEach(H=>{H.source===w.id&&O.add(H.sourcePort)}),x.forEach(H=>{H.target===w.id&&O.add(H.targetPort)}),O.forEach(H=>{const K=G(w,H);E.fillStyle=l?"#4b5563":"#d1d5db",E.strokeStyle=l?"#6b7280":"#9ca3af",E.lineWidth=1,E.beginPath(),E.arc(K.x,K.y,4,0,2*Math.PI),E.fill(),E.stroke()})},re=(E,w,I,O,H,K)=>{E.beginPath(),E.moveTo(w+K,I),E.lineTo(w+O-K,I),E.quadraticCurveTo(w+O,I,w+O,I+K),E.lineTo(w+O,I+H-K),E.quadraticCurveTo(w+O,I+H,w+O-K,I+H),E.lineTo(w+K,I+H),E.quadraticCurveTo(w,I+H,w,I+H-K),E.lineTo(w,I+K),E.quadraticCurveTo(w,I,w+K,I),E.closePath()},ae=(E,w,I)=>n==="read"&&r&&I===r?{fill:"#f59e0b",stroke:"#d97706"}:E==="root"?{fill:"#10b981",stroke:"#059669"}:w==="ending"?{fill:"#ef4444",stroke:"#dc2626"}:w==="tail_connection"?{fill:"#8b5cf6",stroke:"#7c3aed"}:{fill:"#3b82f6",stroke:"#1e40af"},de=E=>{const w=c.current.getBoundingClientRect(),I=(E.clientX-w.left-C.offsetX)/C.scale,O=(E.clientY-w.top-C.offsetY)/C.scale;T(Date.now()),L({x:E.clientX,y:E.clientY});const H=N.find(K=>I>=K.x&&I<=K.x+K.width&&O>=K.y&&O<=K.y+K.height);H?(g(H),f(K=>({...K,isDragging:!0,lastMouseX:E.clientX,lastMouseY:E.clientY})),_(K=>K.map(ue=>({...ue,isSelected:ue.id===H.id})))):f(K=>({...K,isPanning:!0,lastMouseX:E.clientX,lastMouseY:E.clientY}))},Ne=E=>{if(C.isDragging&&R){const K=(E.clientX-C.lastMouseX)/C.scale,ue=(E.clientY-C.lastMouseY)/C.scale;_(ve=>ve.map(be=>be.id===R.id?{...be,x:be.x+K,y:be.y+ue}:be)),f(ve=>({...ve,lastMouseX:E.clientX,lastMouseY:E.clientY}))}else if(C.isPanning){const K=E.clientX-C.lastMouseX,ue=E.clientY-C.lastMouseY;f(ve=>({...ve,offsetX:ve.offsetX+K,offsetY:ve.offsetY+ue,lastMouseX:E.clientX,lastMouseY:E.clientY}))}const w=c.current.getBoundingClientRect(),I=(E.clientX-w.left-C.offsetX)/C.scale,O=(E.clientY-w.top-C.offsetY)/C.scale,H=N.find(K=>I>=K.x&&I<=K.x+K.width&&O>=K.y&&O<=K.y+K.height);S(H),H?c.current.style.cursor="pointer":c.current.style.cursor=C.isPanning?"grabbing":"grab"},Ce=E=>{const I=Date.now()-$,O=E?Math.sqrt(Math.pow(E.clientX-q.x,2)+Math.pow(E.clientY-q.y,2)):0;I<300&&O<5&&R&&v({id:R.id,title:R.title,type:R.type,content:R.content,chapterType:R.chapterType,authorId:R.authorId,authorUsername:R.authorUsername}),f(K=>({...K,isDragging:!1,isPanning:!1})),g(null)},M=E=>{E.preventDefault();const w=c.current.getBoundingClientRect(),I=E.clientX-w.left,O=E.clientY-w.top,H=E.deltaY>0?.9:1.1,K=Math.max(.1,Math.min(3,C.scale*H)),ue=I-(I-C.offsetX)*(K/C.scale),ve=O-(O-C.offsetY)*(K/C.scale);f(be=>({...be,scale:K,offsetX:ue,offsetY:ve}))},W=()=>{if(t&&t.length>0){const E=[],w=[];t.forEach(O=>{E.push({id:O.id,title:O.title,type:O.parent_chapter_id?"normal":"root",content:O.content,chapterType:O.chapter_type,authorId:O.author_id,authorUsername:O.author_username,x:0,y:0,width:160,height:80,isSelected:!1}),O.parent_chapter_id&&w.push({id:`${O.parent_chapter_id}-${O.id}`,source:O.parent_chapter_id,target:O.id,sourcePort:"right",targetPort:"left"})});const I=Z(E,w);if(_(I),m(w),n==="read"&&r){const O=I.find(K=>K.id===r),H=I.find(K=>K.type==="root");if(O&&H){const K=H.x-O.x,ue=H.y-O.y;f({scale:1,offsetX:K,offsetY:ue,isDragging:!1,isPanning:!1,lastMouseX:0,lastMouseY:0,dragStartX:0,dragStartY:0})}else f({scale:1,offsetX:0,offsetY:0,isDragging:!1,isPanning:!1,lastMouseX:0,lastMouseY:0,dragStartX:0,dragStartY:0})}else f({scale:1,offsetX:0,offsetY:0,isDragging:!1,isPanning:!1,lastMouseX:0,lastMouseY:0,dragStartX:0,dragStartY:0})}else f({scale:1,offsetX:0,offsetY:0,isDragging:!1,isPanning:!1,lastMouseX:0,lastMouseY:0,dragStartX:0,dragStartY:0});v(null),n==="read"&&i&&i(!0)},Y=()=>{f(E=>({...E,scale:Math.min(3,E.scale*1.2)}))},oe=()=>{f(E=>({...E,scale:Math.max(.1,E.scale/1.2)}))},pe=(E,w)=>{f(I=>({...I,offsetX:I.offsetX+E,offsetY:I.offsetY+w}))};h.useEffect(()=>{if(n==="read"&&r&&N.length>0&&!a&&i){const E=N.find(I=>I.id===r),w=N.find(I=>I.type==="root");if(E&&w){const I=(w.x-E.x)*C.scale,O=(w.y-E.y)*C.scale;f(H=>({...H,offsetX:I,offsetY:O})),i(!0)}}},[N,r,n,C.scale,a,i]),h.useEffect(()=>{se()},[se]);const j=E=>({normal:"",ending:"",tail_connection:""})[E]||E;return!t||t.length===0?o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-12 h-12 text-slate-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:""}),s(ee,{to:`/novel/${e.id}/create-chapter`,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:""})]}):o("div",{className:"h-full flex flex-col min-h-0",children:[o("div",{className:`${l?"border rounded-lg p-4 mb-4 lg:mb-6":"bg-white border-slate-200 border rounded-lg p-4 mb-4 lg:mb-6"}`,style:l?{backgroundColor:"#0e1516",borderColor:"#1a2223"}:{},children:[s("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:o("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-3",children:[s("button",{onClick:()=>W(),className:`px-3 py-1 text-sm rounded-md transition-colors whitespace-nowrap ${l?"text-slate-200 hover:text-slate-100":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,style:l?{backgroundColor:"#1a2223"}:{},children:""}),e.novel_type==="traditional"&&s(ee,{to:`/novel/${e.id}/create-chapter`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm whitespace-nowrap text-center",children:""})]})}),o("div",{className:"mt-4 flex flex-wrap items-center gap-4 lg:gap-6 text-sm",children:[o("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[s("div",{className:"w-4 h-4 bg-green-500 rounded flex-shrink-0"}),s("span",{className:l?"text-slate-300":"text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[s("div",{className:"w-4 h-4 bg-blue-500 rounded flex-shrink-0"}),s("span",{className:l?"text-slate-300":"text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[s("div",{className:"w-4 h-4 bg-red-500 rounded flex-shrink-0"}),s("span",{className:l?"text-slate-300":"text-slate-600",children:""})]}),o("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[s("div",{className:"w-4 h-4 bg-purple-500 rounded flex-shrink-0"}),s("span",{className:l?"text-slate-300":"text-slate-600",children:""})]})]})]}),o("div",{className:"flex-1 relative min-h-0",children:[s("div",{className:`w-full h-full ${l?"border rounded-lg overflow-hidden":"bg-white border-slate-200 border rounded-lg overflow-hidden"}`,style:l?{backgroundColor:"#0e1516",borderColor:"#1a2223"}:{},children:o("div",{ref:d,className:"w-full h-full relative",style:{minHeight:"600px",height:"100%"},children:[s("canvas",{ref:c,className:"w-full h-full cursor-grab",onMouseDown:de,onMouseMove:Ne,onMouseUp:Ce,onWheel:M,onMouseLeave:()=>Ce(null)}),s("div",{className:"absolute bottom-4 left-4 z-10 flex flex-col space-y-2",children:o("div",{className:`${l?"border rounded-lg shadow-md p-1 grid grid-cols-3 grid-rows-3 gap-1":"bg-white border-slate-200 border rounded-lg shadow-md p-1 grid grid-cols-3 grid-rows-3 gap-1"}`,style:l?{backgroundColor:"#1a2223",borderColor:"#232c2e"}:{},children:[s("button",{onClick:Y,className:`w-8 h-8 flex items-center justify-center rounded ${l?"text-slate-200":"text-slate-700 hover:bg-slate-50"}`,style:l?{":hover":{backgroundColor:"#232c2e"}}:{},title:"",children:s(Ob,{className:"w-4 h-4",stroke:1.8})}),s("button",{onClick:()=>pe(0,-50),className:`w-8 h-8 flex items-center justify-center rounded ${l?"text-slate-200":"text-slate-700 hover:bg-slate-50"}`,onMouseEnter:l?E=>E.target.style.backgroundColor="#232c2e":null,onMouseLeave:l?E=>E.target.style.backgroundColor="transparent":null,title:"",children:s(Rf,{className:"w-4 h-4",stroke:1.8})}),s("button",{onClick:oe,className:`w-8 h-8 flex items-center justify-center rounded ${l?"text-slate-200":"text-slate-700 hover:bg-slate-50"}`,onMouseEnter:l?E=>E.target.style.backgroundColor="#232c2e":null,onMouseLeave:l?E=>E.target.style.backgroundColor="transparent":null,title:"",children:s(Ub,{className:"w-4 h-4",stroke:1.8})}),s("button",{onClick:()=>pe(-50,0),className:`w-8 h-8 flex items-center justify-center rounded ${l?"text-slate-200":"text-slate-700 hover:bg-slate-50"}`,onMouseEnter:l?E=>E.target.style.backgroundColor="#232c2e":null,onMouseLeave:l?E=>E.target.style.backgroundColor="transparent":null,title:"",children:s(_c,{className:"w-4 h-4",stroke:1.8})}),s("button",{onClick:W,className:`w-8 h-8 flex items-center justify-center rounded ${l?"text-slate-200":"text-slate-700 hover:bg-slate-50"}`,onMouseEnter:l?E=>E.target.style.backgroundColor="#232c2e":null,onMouseLeave:l?E=>E.target.style.backgroundColor="transparent":null,title:"",children:s(C1,{className:"w-4 h-4",stroke:1.8})}),s("button",{onClick:()=>pe(50,0),className:`w-8 h-8 flex items-center justify-center rounded ${l?"text-slate-200":"text-slate-700 hover:bg-slate-50"}`,onMouseEnter:l?E=>E.target.style.backgroundColor="#232c2e":null,onMouseLeave:l?E=>E.target.style.backgroundColor="transparent":null,title:"",children:s(Br,{className:"w-4 h-4",stroke:1.8})}),s("div",{}),s("button",{onClick:()=>pe(0,50),className:`w-8 h-8 flex items-center justify-center rounded ${l?"text-slate-200":"text-slate-700 hover:bg-slate-50"}`,onMouseEnter:l?E=>E.target.style.backgroundColor="#232c2e":null,onMouseLeave:l?E=>E.target.style.backgroundColor="transparent":null,title:"",children:s(Ln,{className:"w-4 h-4",stroke:1.8})}),s("div",{})]})})]})}),u&&s("div",{className:`fixed inset-0 bg-black z-40 lg:hidden transition-opacity duration-300 ease-in-out ${y?"bg-opacity-50":"bg-opacity-0"}`,onClick:B}),u&&s("div",{className:`fixed inset-y-0 right-0 z-50 w-80 border-l shadow-xl transform transition-all duration-300 ease-in-out ${n!=="read"?"lg:absolute lg:inset-auto lg:z-auto lg:w-80 lg:max-w-none lg:shadow-none lg:border lg:rounded-lg lg:top-4 lg:right-4 lg:bottom-4":""} ${l?"":"bg-white"} ${y?"translate-x-0 opacity-100":n==="read"?"translate-x-full opacity-0":"translate-x-full opacity-0 lg:translate-x-0 lg:opacity-100"}`,style:l?{backgroundColor:"#0e1516",borderColor:"#1a2223"}:{},children:o("div",{className:"h-full overflow-y-auto p-4 lg:p-6",children:[o("div",{className:"flex justify-between items-start mb-4",children:[s("h3",{className:`text-lg font-medium ${l?"text-slate-100":"text-slate-700"}`,children:""}),s("button",{onClick:B,className:`${l?"text-slate-400 hover:text-slate-200":"text-slate-400 hover:text-slate-600"}`,children:s(Et,{className:"w-5 h-5",stroke:1.8})})]}),o("div",{className:"space-y-4",children:[o("div",{children:[s("label",{className:`block text-sm font-medium mb-1 ${l?"text-slate-300":"text-slate-700"}`,children:""}),s("p",{className:l?"text-slate-100":"text-slate-800",children:u.title})]}),o("div",{children:[s("label",{className:`block text-sm font-medium mb-1 ${l?"text-slate-300":"text-slate-700"}`,children:""}),s("span",{className:`px-2 py-1 text-xs rounded-full ${u.type==="root"?"bg-green-100 text-green-700":u.chapterType==="ending"?"bg-red-100 text-red-700":u.chapterType==="tail_connection"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:u.type==="root"?"":j(u.chapterType)})]}),e.novel_type!=="traditional"&&e.novel_type!=="author_original"&&o("div",{children:[s("label",{className:`block text-sm font-medium mb-1 ${l?"text-slate-300":"text-slate-700"}`,children:""}),s("p",{className:`${l?"text-slate-100":"text-slate-800"} text-sm`,children:u.authorUsername||""})]}),o("div",{children:[s("label",{className:`block text-sm font-medium mb-1 ${l?"text-slate-300":"text-slate-700"}`,children:""}),s("p",{className:`${l?"text-slate-300":"text-slate-600"} text-sm line-clamp-6`,children:u.content})]}),o("div",{className:"pt-4 border-t space-y-3",style:l?{borderColor:"#1a2223"}:{borderColor:"#e2e8f0"},children:[s(ee,{to:n==="read"?`/novel/${e.id}/read/${u.id}`:`/novel/${e.id}/chapter/${u.id}`,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-center block",children:""}),u.chapterType!=="ending"&&u.chapterType!=="tail_connection"&&s(ee,{to:`/novel/${e.id}/create-chapter?parentChapterId=${u.id}`,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-center block",children:""})]})]})]})})]})]})},Rl=({targetUserId:e,className:t="",size:n="md"})=>{const{user:r,token:l}=it(),[a,i]=h.useState(!1),[c,d]=h.useState(!1),[u,v]=h.useState(0);h.useEffect(()=>{r&&e&&(y(),b())},[r,e]);const y=async()=>{try{const _=await(await fetch(`/api/follows/check/${e}`,{headers:{Authorization:`Bearer ${l}`}})).json();_.success&&i(_.isFollowing)}catch(N){console.error(":",N)}},b=async()=>{try{const _=await(await fetch(`/api/follows/counts/${e}`)).json();_.success&&v(_.data.followers)}catch(N){console.error(":",N)}},C=async()=>{if(!r){alert("");return}if(r.id===e){alert("");return}d(!0);try{const m=await(await fetch(a?"/api/follows/unfollow":"/api/follows/follow",{method:a?"DELETE":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({targetUserId:e})})).json();m.success?(i(!a),v(a?p=>Math.max(0,p-1):p=>p+1)):alert(m.message)}catch(N){console.error(":",N),alert("")}finally{d(!1)}};return!r||r.id===e?null:o("div",{className:"flex items-center gap-2",children:[s("button",{onClick:C,disabled:c,className:`
                    ${{sm:"px-3 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[n]}
                    rounded-full font-medium transition-all duration-200
                    ${a?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-500 text-white hover:bg-blue-600"}
                    disabled:opacity-50 disabled:cursor-not-allowed
                    ${t}
                `,children:c?o("span",{className:"flex items-center gap-2",children:[o("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"...":"..."]}):a?"":""}),u>0&&o("span",{className:"text-sm text-gray-500",children:[u," "]})]})},bN=()=>{var V,G,X,A,te,re,ae,de,Ne,Ce;const{id:e}=Rr(),t=ot(),{user:n,isAuthenticated:r}=it(),[l,a]=h.useState(null),[i,c]=h.useState([]),[d,u]=h.useState(!0),[v,y]=h.useState(""),[b,C]=h.useState("overview"),[f,N]=h.useState("list"),[_,x]=h.useState(!1),[m,p]=h.useState(!1),[S,R]=h.useState(null);h.useEffect(()=>{e&&(g(),q(),L())},[e]),h.useEffect(()=>{l&&(l.novel_type!=="traditional"?N("graph"):N("list"))},[l]);const g=async()=>{try{const M=await bs(e);M.success?(a(M.novel),r&&$()):y(M.message||"")}catch{y("")}},$=async()=>{try{const M=await aN(e);M.success&&x(M.isFavorited)}catch(M){console.error(":",M)}},T=async()=>{if(!r){t("/login");return}p(!0);try{const M=await lN(e);M.success?x(M.action==="favorite"):alert(M.message||"")}catch{alert("")}finally{p(!1)}},q=async()=>{try{const M=await Eo(e);M.success?c(M.chapters||[]):y(M.message||"")}catch{y("")}finally{u(!1)}},L=async()=>{try{const M=await eN(e);M.success&&R(M.stats)}catch(M){console.error(":",M)}},B=async()=>{if(e)try{let M=null;const W=await Pc(e);W&&W.success&&W.progress&&W.progress.current_chapter_id&&(M=W.progress.current_chapter_id),M||i&&i.length>0&&(M=i[0].id),M&&t(`/novel/${e}/read/${M}`)}catch{}},Z=M=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[M]||M,se=M=>new Date(M).toLocaleDateString("zh-CN"),U=()=>{if(i.some(W=>!W.parent_chapter_id))if(l.novel_type==="traditional")if(i.length>0){const Y=[...i].sort((oe,pe)=>new Date(pe.created_at)-new Date(oe.created_at))[0];return`/novel/${e}/create-chapter?parentChapterId=${Y.id}`}else return`/novel/${e}/create-chapter`;else return`/novel/${e}/edit?tab=view`;else return`/novel/${e}/create-chapter`};return d?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"}),s("p",{className:"mt-2 text-slate-600",children:"..."})]})}),s(mt,{})]}):v||!l?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s(_n,{className:"w-12 h-12 text-red-400",stroke:1.8}),s("p",{className:"text-red-600 font-medium",children:""})]})}),s(mt,{})]}):o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),o("div",{className:"container mx-auto px-4 py-8",children:[s("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-slate-200 mb-8",children:o("div",{className:"flex flex-col lg:flex-row gap-8",children:[s("div",{className:"flex-shrink-0",children:s(Er,{title:l.title,author:((V=l.author)==null?void 0:V.username)||"",platform:"",theme:"default",coverUrl:l.cover_image_url,size:"lg"})}),o("div",{className:"flex-1",children:[o("div",{className:"flex items-start justify-between mb-4",children:[o("div",{children:[s("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:l.title}),s("p",{className:"text-slate-600 mb-4",children:l.description})]}),s("div",{className:"flex space-x-2"})]}),o("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o("div",{children:[s("p",{className:"text-sm text-slate-500",children:""}),o("div",{className:"flex items-center gap-2",children:[(G=l.author)!=null&&G.id?s(ee,{to:`/profile/${l.author.id}`,className:"font-medium text-slate-700 hover:text-slate-900",children:((X=l.author)==null?void 0:X.username)||""}):s("p",{className:"font-medium text-slate-700",children:((A=l.author)==null?void 0:A.username)||""}),((te=l.author)==null?void 0:te.id)&&s(Rl,{targetUserId:l.author.id,size:"sm"})]})]}),o("div",{children:[s("p",{className:"text-sm text-slate-500",children:""}),s("p",{className:"font-medium text-slate-700",children:Z(l.novel_type)})]}),o("div",{children:[s("p",{className:"text-sm text-slate-500",children:""}),s("p",{className:"font-medium text-slate-700",children:l.status==="published"?"":""})]}),o("div",{children:[s("p",{className:"text-sm text-slate-500",children:""}),s("p",{className:"font-medium text-slate-700",children:se(l.created_at)})]})]}),l.tags&&l.tags.length>0&&s("div",{className:"flex flex-wrap gap-2",children:l.tags.map((M,W)=>s("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm",children:M},W))})]})]})}),o("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 mb-8",children:[s("div",{className:"border-b border-slate-200",children:o("nav",{className:"flex space-x-8 px-8",children:[s("button",{onClick:()=>C("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="overview"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""}),o("button",{onClick:()=>C("chapters"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="chapters"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[" (",l.total_chapters,")"]}),s("button",{onClick:()=>C("settings"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="settings"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""})]})}),o("div",{className:"p-8",children:[b==="overview"&&s("div",{className:"space-y-6",children:o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o("div",{className:"bg-slate-50 rounded-lg p-6",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),o("div",{className:"space-y-2",children:[o("div",{className:"flex justify-between",children:[s("span",{className:"text-slate-600",children:""}),s("span",{className:"font-medium",children:(S==null?void 0:S.total_chapters)||l.total_chapters||0})]}),o("div",{className:"flex justify-between",children:[s("span",{className:"text-slate-600",children:""}),s("span",{className:"font-medium",children:((S==null?void 0:S.total_words)||l.total_words||0).toLocaleString()})]}),o("div",{className:"flex justify-between",children:[s("span",{className:"text-slate-600",children:""}),s("span",{className:"font-medium",children:(S==null?void 0:S.total_likes)||0})]}),o("div",{className:"flex justify-between",children:[s("span",{className:"text-slate-600",children:""}),s("span",{className:"font-medium",children:(S==null?void 0:S.total_comments)||0})]}),o("div",{className:"flex justify-between",children:[s("span",{className:"text-slate-600",children:""}),s("span",{className:"font-medium",children:(S==null?void 0:S.total_favorites)||0})]}),o("div",{className:"flex justify-between",children:[s("span",{className:"text-slate-600",children:""}),s("span",{className:"font-medium",children:l.is_branching_enabled?"":""})]})]})]}),o("div",{className:"bg-slate-50 rounded-lg p-6",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),o("div",{className:"space-y-3",children:[o("button",{className:"w-full text-left p-3 bg-white rounded-lg border border-slate-200 hover:border-blue-300 transition-colors",children:[s("div",{className:"font-medium text-slate-700",children:""}),s("div",{className:"text-sm text-slate-500",children:""})]}),l.novel_type!=="traditional"&&o("button",{className:"w-full text-left p-3 bg-white rounded-lg border border-slate-200 hover:border-blue-300 transition-colors",children:[s("div",{className:"font-medium text-slate-700",children:""}),s("div",{className:"text-sm text-slate-500",children:""})]}),r&&l.novel_type!=="traditional"&&o("button",{onClick:()=>t(`/novel/${e}/custom-reading-path`),className:"w-full text-left p-3 bg-blue-50 rounded-lg border border-blue-200 hover:border-blue-300 transition-colors",children:[s("div",{className:"font-medium text-blue-700",children:""}),s("div",{className:"text-sm text-blue-600",children:""})]})]})]}),o("div",{className:"bg-slate-50 rounded-lg p-6",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),o("div",{className:"space-y-3",children:[s("button",{onClick:B,className:"w-full p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""}),((re=l.author)==null?void 0:re.id)===(n==null?void 0:n.id)&&s("button",{onClick:()=>t(`/novel/${e}/edit`),className:"w-full p-3 bg-slate-700 text-white rounded-lg hover:bg-slate-800 transition-colors",children:""}),((ae=l.author)==null?void 0:ae.id)===(n==null?void 0:n.id)&&s("button",{onClick:()=>t(U()),className:"w-full p-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""}),s("button",{onClick:T,disabled:m,className:`w-full p-3 rounded-lg transition-colors ${_?"bg-red-50 text-red-700 hover:bg-red-100":"bg-slate-100 text-slate-700 hover:bg-slate-200"} ${m?"opacity-50 cursor-not-allowed":""}`,title:_?"":"",children:s("span",{className:"font-medium",children:m?"...":_?"":""})}),r&&(n==null?void 0:n.id)!==((de=l.author)==null?void 0:de.id)&&l.novel_type!=="traditional"&&l.novel_type!=="author_original"&&s("button",{onClick:()=>t(`/novel/${e}/edit?tab=view`),className:"w-full p-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:""})]})]})]})}),b==="chapters"&&o("div",{className:"space-y-4",children:[o("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6",children:[s("h3",{className:"text-xl font-medium text-slate-700",children:""}),o("div",{className:"flex items-center gap-2",children:[s("button",{onClick:()=>N("graph"),className:`px-3 py-1 rounded-md border text-sm transition-colors ${f==="graph"?"bg-slate-700 text-white border-slate-700":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:""}),s("button",{onClick:()=>N("list"),className:`px-3 py-1 rounded-md border text-sm transition-colors ${f==="list"?"bg-slate-700 text-white border-slate-700":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:""}),((Ne=l.author)==null?void 0:Ne.id)===(n==null?void 0:n.id)&&s(ee,{to:U(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})]}),f==="graph"?s("div",{className:"rounded-lg bg-white",children:s("div",{className:"h-[800px]",children:s(Id,{novel:l,chapters:i})})}):i.length===0?o("div",{className:"text-center py-12",children:[s(Me,{className:"w-12 h-12 text-slate-400",stroke:1.8}),s("p",{className:"text-slate-500",children:""}),((Ce=l.author)==null?void 0:Ce.id)===(n==null?void 0:n.id)&&s(ee,{to:U(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:""})]}):s("div",{className:"space-y-4",children:i.map(M=>{var W;return s("button",{onClick:()=>t(`/novel/${e}/read/${M.id}`),className:"text-left bg-white border border-slate-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:o("div",{className:"flex justify-between items-start",children:[o("div",{className:"flex-1",children:[s("h4",{className:"text-lg font-medium text-slate-700 mb-2",children:M.title}),s("p",{className:"text-slate-600 text-sm mb-3 line-clamp-2",children:M.content}),o("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[o("span",{children:["",M.author_id?s(ee,{to:`/profile/${M.author_id}`,className:"text-slate-700 hover:text-slate-900",onClick:Y=>Y.stopPropagation(),children:M.author_username||""}):M.author_username||""]}),o("span",{children:["",((W=M.word_count)==null?void 0:W.toLocaleString())||0]}),o("span",{children:["",se(M.created_at)]})]})]}),o("div",{className:"flex space-x-2 ml-4",children:[s("button",{className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg",children:s(Ja,{className:"w-4 h-4",stroke:1.8})}),s("button",{className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg",children:s(yl,{className:"w-4 h-4",stroke:1.8})})]})]})},M.id)})})]}),b==="settings"&&o("div",{className:"space-y-6",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-3",children:""}),s("div",{className:"bg-slate-50 rounded-lg p-4",children:s("p",{className:"text-slate-700 whitespace-pre-line",children:l.characters||""})})]}),o("div",{children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-3",children:""}),s("div",{className:"bg-slate-50 rounded-lg p-4",children:s("p",{className:"text-slate-700 whitespace-pre-line",children:l.world_background||""})})]})]}),o("div",{children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-3",children:""}),s("div",{className:"bg-slate-50 rounded-lg p-4",children:s("p",{className:"text-slate-700 whitespace-pre-line",children:l.other_settings||""})})]})]})]})]})]}),s(mt,{})]})},NN=()=>{var se;const{novelId:e}=Rr(),t=ot(),[n]=yo(),{user:r,isAuthenticated:l}=it(),[a,i]=h.useState(null),[c,d]=h.useState([]),[u,v]=h.useState(!0),[y,b]=h.useState(""),[C,f]=h.useState(!1),[N,_]=h.useState(!1),[x,m]=h.useState(null),[p,S]=h.useState({title:"",content:"",parentChapterId:null,chapterType:"normal"});h.useEffect(()=>{if(e){R(),g();const U=n.get("parentChapterId");U&&S(V=>({...V,parentChapterId:U}))}},[e,n]);const R=async()=>{try{const U=await bs(e);U.success?i(U.novel):b(U.message||"")}catch{b("")}},g=async()=>{try{const U=await Eo(e);U.success?d(U.chapters||[]):b(U.message||"")}catch{b("")}finally{v(!1)}},$=U=>{const{name:V,value:G}=U.target;S(V==="parentChapterId"?X=>({...X,[V]:G===""?null:G}):X=>({...X,[V]:G}))},T=()=>{if(!p.title.trim()||!p.content.trim()){b("");return}b(""),_(!0)},q=async()=>{try{f(!0),m(null);const U=await Zb(e,p);m(U),U.success&&setTimeout(()=>{t(`/novel/${e}`)},3e3)}catch{m({success:!1,message:""})}finally{f(!1)}},L=()=>{_(!1),m(null)};if(u)return o("div",{className:"min-h-screen bg-white",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"}),s("p",{className:"mt-2 text-slate-600",children:"..."})]})})]});if(y||!a)return o("div",{className:"min-h-screen bg-white",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:s(_n,{className:"w-12 h-12 text-red-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:y||""}),s("button",{onClick:()=>t("/"),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:""})]})})]});const B=((se=a.author)==null?void 0:se.id)===(r==null?void 0:r.id),Z=!B&&a.novel_type!=="traditional"&&a.novel_type!=="author_original";return!B&&!Z?o("div",{className:"min-h-screen bg-white",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s(_n,{className:"w-12 h-12 text-red-400",stroke:1.8}),s("p",{className:"text-red-600 font-medium",children:""})]})})]}):o("div",{className:"min-h-screen bg-white",children:[s(_e,{}),o("div",{className:"container mx-auto px-4 py-6",children:[s("div",{className:"mb-6",children:s("div",{className:"flex items-center justify-between",children:o("div",{children:[s(ee,{to:`/novel/${e}`,className:"text-slate-500 hover:text-slate-700 transition-colors",children:" "}),s("h1",{className:"text-2xl font-bold text-slate-800 mt-2",children:B?"":""}),s("p",{className:"text-slate-600 mt-1",children:B?`${a.title}`:`${a.title}`})]})})}),y&&s("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s("p",{className:"text-red-700",children:y})}),o("div",{className:"bg-white border border-slate-200 rounded-lg",children:[o("div",{className:"p-4 border-b border-slate-200",children:[!B&&Z&&s("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:o("div",{className:"flex items-start space-x-2",children:[s(Me,{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0",stroke:1.8}),o("div",{className:"text-sm text-blue-700",children:[s("p",{className:"font-medium mb-1",children:""}),s("p",{className:"text-blue-600",children:a.novel_type==="mountain_beyond_mountain"?"":""})]})]})}),o("div",{className:"flex flex-wrap gap-3",children:[o("div",{className:"flex items-center gap-2",children:[s("span",{className:"text-sm text-slate-600",children:":"}),o("select",{name:"parentChapterId",value:p.parentChapterId||"",onChange:$,className:"px-3 py-1 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!c.some(U=>!U.parent_chapter_id)&&s("option",{value:"",children:""}),c.map(U=>{var X;let V=!0,G="";return B||a.novel_type==="mountain_beyond_mountain"&&(V=U.author_id===((X=a.author)==null?void 0:X.id)||U.author_id===(r==null?void 0:r.id),V||(G=" ()")),o("option",{value:U.id,disabled:!V,children:[U.title,G]},U.id)})]})]}),o("div",{className:"flex items-center gap-2",children:[s("span",{className:"text-sm text-slate-600",children:":"}),o("select",{name:"chapterType",value:p.chapterType,onChange:$,className:"px-3 py-1 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"normal",children:""}),s("option",{value:"ending",disabled:!0,children:""}),s("option",{value:"tail_connection",disabled:!0,children:""})]})]})]})]}),s("div",{className:"p-6 border-b border-slate-200",children:s("input",{type:"text",name:"title",value:p.title,onChange:$,placeholder:"",className:"w-full text-2xl font-bold text-slate-800 border-none outline-none focus:ring-0 placeholder-slate-400"})}),s("div",{className:"p-6",children:s("textarea",{name:"content",value:p.content,onChange:$,placeholder:"...",rows:20,className:"w-full text-slate-700 border-none outline-none focus:ring-0 placeholder-slate-400 resize-none text-lg leading-relaxed"})})]}),s("div",{className:"mt-8 p-6 bg-white border border-slate-200 rounded-lg",children:o("div",{className:"flex justify-between items-center",children:[o("div",{className:"text-sm text-slate-500",children:["",p.content.length]}),o("div",{className:"flex space-x-3",children:[s("button",{onClick:()=>t(`/novel/${e}`),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:""}),s("button",{onClick:T,disabled:C,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:B?"":""})]})]})})]}),N&&s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:x?o(wt,{children:[o("div",{className:"text-center mb-6",children:[s("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${x.success?"bg-green-100":"bg-red-100"}`,children:x.success?s(hs,{className:"w-8 h-8 text-green-600",stroke:1.8}):s(Et,{className:"w-8 h-8 text-red-600",stroke:1.8})}),s("h3",{className:`text-xl font-medium mb-2 ${x.success?"text-green-700":"text-red-700"}`,children:x.success?"":""}),s("p",{className:"text-slate-600",children:x.message}),x.success&&s("p",{className:"text-sm text-slate-500 mt-2",children:"3"})]}),o("div",{className:"flex space-x-3",children:[!x.success&&s("button",{onClick:L,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:""}),x.success&&s("button",{onClick:()=>t(`/novel/${e}`),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})]}):o(wt,{children:[o("div",{className:"text-center mb-6",children:[s("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s(hs,{className:"w-8 h-8 text-blue-600",stroke:1.8})}),s("h3",{className:"text-xl font-medium text-slate-700 mb-2",children:""}),o("p",{className:"text-slate-600",children:["",p.title,""]})]}),o("div",{className:"flex space-x-3",children:[s("button",{onClick:L,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:""}),s("button",{onClick:q,disabled:C,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:C?"...":""})]})]})})})]})},wN=({novel:e,activeTab:t,onTabChange:n,chapters:r,sidebarOpen:l,onClose:a,canEditBasicSettings:i=!0,isAuthor:c=!0})=>{var u;const d=v=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[v]||v;return o("div",{className:`
      fixed md:relative inset-y-0 left-0 z-50
      w-80 bg-white border-r border-slate-200 flex flex-col
      transform transition-transform duration-300 ease-in-out
      ${l?"translate-x-0":"-translate-x-full md:translate-x-0"}
    `,children:[o("div",{className:"p-4 md:p-6 border-b border-slate-200",children:[o("div",{className:"flex items-center justify-between mb-4",children:[o("div",{className:"flex items-center space-x-3",children:[s(ee,{to:`/novel/${e.id}`,className:"text-slate-500 hover:text-slate-700 transition-colors",children:s(Ld,{className:"w-5 h-5",stroke:1.8})}),s("h2",{className:"text-lg font-medium text-slate-700",children:i?"":""})]}),s("button",{onClick:a,className:"md:hidden p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:s(Et,{className:"w-5 h-5",stroke:1.8})})]}),o("div",{className:"space-y-2",children:[s("h3",{className:"font-medium text-slate-800 truncate",children:e.title}),s("p",{className:"text-sm text-slate-600",children:d(e.novel_type)}),o("p",{className:"text-sm text-slate-500",children:["",(u=e.author)==null?void 0:u.username]})]})]}),s("div",{className:"flex-1 p-3 md:p-4",children:o("nav",{className:"space-y-2",children:[o("button",{onClick:()=>n("basic"),className:`w-full text-left px-3 md:px-4 py-3 rounded-lg transition-colors ${t==="basic"?"bg-blue-50 text-blue-700 border border-blue-200":"text-slate-600 hover:bg-slate-50 hover:text-slate-700"}`,children:[o("div",{className:"flex items-center space-x-2 md:space-x-3",children:[s(yl,{className:"w-4 h-4 md:w-5 md:h-5 flex-shrink-0",stroke:1.8}),s("span",{className:"text-sm md:text-base",children:i?"":""})]}),s("p",{className:"text-xs text-slate-500 mt-1 ml-6 md:ml-7",children:i?"":""})]}),c&&e.novel_type!=="traditional"&&o("button",{onClick:()=>n("reading-paths"),className:`w-full text-left px-3 md:px-4 py-3 rounded-lg transition-colors ${t==="reading-paths"?"bg-blue-50 text-blue-700 border border-blue-200":"text-slate-600 hover:bg-slate-50 hover:text-slate-700"}`,children:[o("div",{className:"flex items-center space-x-2 md:space-x-3",children:[s(X1,{className:"w-4 h-4 md:w-5 md:h-5 flex-shrink-0",stroke:1.8}),s("span",{className:"text-sm md:text-base",children:""})]}),s("p",{className:"text-xs text-slate-500 mt-1 ml-6 md:ml-7",children:""})]}),e.novel_type==="traditional"&&o("button",{onClick:()=>n("chapters"),className:`w-full text-left px-3 md:px-4 py-3 rounded-lg transition-colors ${t==="chapters"?"bg-blue-50 text-blue-700 border border-blue-200":"text-slate-600 hover:bg-slate-50 hover:text-slate-700"}`,children:[o("div",{className:"flex items-center space-x-2 md:space-x-3",children:[s(Me,{className:"w-4 h-4 md:w-5 md:h-5 flex-shrink-0",stroke:1.8}),s("span",{className:"text-sm md:text-base",children:""})]}),s("p",{className:"text-xs text-slate-500 mt-1 ml-6 md:ml-7",children:""})]}),o("button",{onClick:()=>n("view"),className:`w-full text-left px-3 md:px-4 py-3 rounded-lg transition-colors ${t==="view"?"bg-blue-50 text-blue-700 border border-blue-200":"text-slate-600 hover:bg-slate-50 hover:text-slate-700"}`,children:[o("div",{className:"flex items-center space-x-2 md:space-x-3",children:[s(J1,{className:"w-4 h-4 md:w-5 md:h-5 flex-shrink-0",stroke:1.8}),s("span",{className:"text-sm md:text-base",children:""})]}),s("p",{className:"text-xs text-slate-500 mt-1 ml-6 md:ml-7",children:c?"":""})]})]})}),s("div",{className:"p-3 md:p-4 border-t border-slate-200",children:o("div",{className:"text-xs text-slate-500 space-y-1",children:[o("div",{className:"flex justify-between",children:[s("span",{children:""}),s("span",{children:r.length})]}),o("div",{className:"flex justify-between",children:[s("span",{children:""}),s("span",{children:(e.total_words||0).toLocaleString()})]}),o("div",{className:"flex justify-between",children:[s("span",{children:""}),s("span",{className:e.status==="published"?"text-green-600":"text-amber-600",children:e.status==="published"?"":""})]})]})})]})},kN=({currentCoverUrl:e,onCoverChange:t,disabled:n=!1,className:r="",hasExistingCover:l=!1,hasOtherContributors:a=!1})=>{const[i,c]=h.useState(!1),[d,u]=h.useState(null),[v,y]=h.useState(""),b=h.useRef(null),C=S=>new Promise((R,g)=>{const $=new Image;$.onload=()=>{const{width:T,height:q}=$;if(T<150||q<200){g(" 150x200 ");return}if(T>600||q>800){g(" 600x800 ");return}const L=T/q,B=3/4,Z=.1;if(Math.abs(L-B)>Z){g(" 3:4 ");return}R()},$.onerror=()=>g(""),$.src=URL.createObjectURL(S)}),f=async S=>{if(S){if(!S.type.startsWith("image/")){y("");return}if(S.size>5*1024*1024){y(" 5MB");return}try{y(""),await C(S);const R=URL.createObjectURL(S);u(R),t&&(console.log("NovelCoverUpload:  onCoverChange :",S.name,"URL:",R),t(S,R))}catch(R){y(R.message||"")}}},N=S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?c(!0):S.type==="dragleave"&&c(!1)},_=S=>{S.preventDefault(),S.stopPropagation(),c(!1),S.dataTransfer.files&&S.dataTransfer.files[0]&&!(a&&l)&&f(S.dataTransfer.files[0])},x=S=>{S.target.files&&S.target.files[0]&&!(a&&l)&&f(S.target.files[0])},m=()=>{u(null),t&&t(null,null)},p=d||e;return o("div",{className:`space-y-3 ${r}`,children:[o("div",{className:"text-center",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:""}),!n&&p&&!(a&&l)&&s("div",{className:"flex items-center justify-center mb-3",children:s("button",{type:"button",onClick:m,className:"px-2 py-1 text-xs border border-red-300 text-red-600 rounded hover:bg-red-50 transition-colors",children:""})})]}),s("input",{ref:b,type:"file",accept:"image/*",onChange:x,className:"hidden"}),s("div",{className:`relative border-2 border-dashed rounded-lg transition-colors mx-auto ${i?"border-blue-400 bg-blue-50":"border-slate-300 hover:border-slate-400"} ${n||a&&l?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,style:{aspectRatio:"3/4",width:"120px"},onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:_,onClick:()=>{var S;return!n&&!(a&&l)&&((S=b.current)==null?void 0:S.click())},children:p?s("div",{className:"flex flex-col items-center justify-center h-full p-2",children:o("div",{className:"relative w-full h-full",children:[s("img",{src:p,alt:"",className:"w-full h-full object-cover rounded-lg shadow-md"}),!n&&!(a&&l)&&s("button",{type:"button",onClick:S=>{S.stopPropagation(),m()},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:s(Et,{className:"w-4 h-4",stroke:2})})]})}):o("div",{className:"flex flex-col items-center justify-center h-full p-3 text-center",children:[s(zf,{className:"w-10 h-10 text-slate-400 mb-3",stroke:1.5}),a&&l?o(wt,{children:[s("p",{className:"text-xs text-slate-500 mb-2",children:""}),s("p",{className:"text-xs text-slate-400",children:""})]}):o(wt,{children:[s("p",{className:"text-xs text-slate-600 mb-2",children:""}),s("p",{className:"text-xs text-slate-500",children:"3:4 "})]})]})}),v&&o("div",{className:"flex items-center space-x-2 p-2 bg-red-50 border border-red-200 rounded text-center",children:[s(_n,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),s("p",{className:"text-xs text-red-600",children:v})]}),s("div",{className:"p-2 bg-slate-50 border border-slate-200 rounded text-center",children:o("p",{className:"text-xs text-slate-600",children:[" JPGPNG",s("br",{}),"3:4 150x200  600x800 "]})})]})},SN=({novel:e,editFormData:t,onEditInputChange:n,readOnly:r=!1,disableDescription:l=!1,disableWorldBackground:a=!1,onCoverChange:i,coverPreviewUrl:c})=>{const d=u=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[u]||u;return s("div",{className:"max-w-4xl mx-auto",children:o("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[o("div",{className:"p-6 border-b border-slate-200",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-4",children:""}),o("div",{className:"flex flex-col md:flex-row gap-8 items-center mb-6",children:[s("div",{className:"flex-shrink-0",children:s(kN,{currentCoverUrl:c||(e.cover_image_url&&e.cover_image_url!=="none"?e.cover_image_url:null),onCoverChange:i,disabled:r,hasExistingCover:e.cover_image_url&&e.cover_image_url!=="none",hasOtherContributors:(e.novel_type==="mountain_beyond_mountain"||e.novel_type==="infinite_point")&&!!e.has_other_contributors})}),o("div",{className:"flex-1 flex flex-col justify-center space-y-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"text",value:e.title,disabled:!0,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg text-slate-600"}),s("p",{className:"text-xs text-slate-500 mt-1",children:""})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"text",value:d(e.novel_type),disabled:!0,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg text-slate-600"}),s("p",{className:"text-xs text-slate-500 mt-1",children:""})]})]})]})]}),o("div",{className:"p-6 border-b border-slate-200",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-4",children:""}),(e.novel_type==="mountain_beyond_mountain"||e.novel_type==="infinite_point")&&e.has_other_contributors&&s("div",{className:"mb-4 p-3 rounded-lg bg-amber-50 border border-amber-200 text-amber-800 text-sm",children:'"""'}),o("div",{className:"space-y-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"description",value:t.description,onChange:n,disabled:r||l,rows:4,className:`w-full px-4 py-3 border border-slate-200 rounded-lg ${r||l?"bg-slate-50 text-slate-600 cursor-not-allowed":"focus:outline-none focus:ring-2 focus:ring-blue-500"}`,placeholder:r?"":""}),s("p",{className:"text-xs text-slate-500 mt-1",children:l?"":""})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"characters",value:t.characters,onChange:n,disabled:r,rows:6,className:`w-full px-4 py-3 border border-slate-200 rounded-lg ${r?"bg-slate-50 text-slate-600 cursor-not-allowed":"focus:outline-none focus:ring-2 focus:ring-blue-500"}`,placeholder:r?"":""}),s("p",{className:"text-xs text-slate-500 mt-1",children:""})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"worldBackground",value:t.worldBackground,onChange:n,disabled:r||a,rows:6,className:`w-full px-4 py-3 border border-slate-200 rounded-lg ${r||a?"bg-slate-50 text-slate-600 cursor-not-allowed":"focus:outline-none focus:ring-2 focus:ring-blue-500"}`,placeholder:r?"":""}),s("p",{className:"text-xs text-slate-500 mt-1",children:a?"":""})]})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"otherSettings",value:t.otherSettings,onChange:n,disabled:r,rows:4,className:`w-full px-4 py-3 border border-slate-200 rounded-lg ${r?"bg-slate-50 text-slate-600 cursor-not-allowed":"focus:outline-none focus:ring-2 focus:ring-blue-500"}`,placeholder:r?"":""}),s("p",{className:"text-xs text-slate-500 mt-1",children:""})]})]})]}),e.novel_type==="traditional"&&o("div",{className:"p-6",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-4",children:""}),o("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[o("label",{className:"flex items-center group relative",children:[s("input",{type:"checkbox",name:"isBranchingEnabled",checked:t.isBranchingEnabled,onChange:n,disabled:r,className:`w-4 h-4 text-amber-600 border-amber-300 rounded ${r?"cursor-not-allowed opacity-50":"focus:ring-amber-500"}`}),s("span",{className:"ml-2 text-sm font-medium text-amber-800",children:""})]}),r?s("p",{className:"text-xs text-amber-700 mt-2",children:" "}):o(wt,{children:[s("p",{className:"text-xs text-amber-700 mt-2",children:' ""'}),s("p",{className:"text-xs text-amber-600 mt-1",children:""})]})]})]}),o("div",{className:"p-6 border-t border-slate-200",children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-4",children:""}),s("div",{className:"flex flex-wrap gap-2",children:e.tags&&e.tags.length>0?e.tags.map((u,v)=>s("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm",children:u},v)):s("p",{className:"text-slate-500 text-sm",children:""})}),s("p",{className:"text-xs text-slate-500 mt-2",children:""})]})]})})},CN=({novel:e,chapters:t})=>{const[n,r]=h.useState(null),[l,a]=h.useState([]),[i,c]=h.useState(!0),[d,u]=h.useState(""),[v,y]=h.useState(!1),[b,C]=h.useState({name:"",description:"",selectedPath:[]}),[f,N]=h.useState({show:!1,success:!1,message:""});h.useEffect(()=>{_()},[e.id]);const _=async()=>{try{c(!0);const[L,B]=await Promise.all([Df(e.id),rN(e.id)]);if(L.success&&a(L.chapterTree||[]),B.success&&B.authorPath){r(B.authorPath),C({name:B.authorPath.name||"",description:B.authorPath.description||"",selectedPath:[]});const Z=await fr(e.id,B.authorPath.id);Z.success&&Z.readingPath.chapters&&C(se=>({...se,selectedPath:Z.readingPath.chapters.map(U=>({id:U.chapter_id,title:U.chapter_title,reason:U.branch_choice_reason||""}))}))}else r(null)}catch{u("")}finally{c(!1)}},x=()=>{y(!0),n||C({name:"",description:"",selectedPath:[]})},m=()=>{y(!1),_()},p=L=>{const{name:B,value:Z}=L.target;C(se=>({...se,[B]:Z}))},S=(L,B="")=>{C(Z=>{if(Z.selectedPath.length===0)return{...Z,selectedPath:[{id:L.id,title:L.title,reason:B||""}]};{const se=Z.selectedPath[Z.selectedPath.length-1],U=$(l,se.id);return U&&U.children.some(V=>V.id===L.id)?{...Z,selectedPath:[...Z.selectedPath,{id:L.id,title:L.title,reason:B||""}]}:(alert(""),Z)}})},R=()=>{C(L=>({...L,selectedPath:L.selectedPath.slice(0,-1)}))},g=(L,B)=>{C(Z=>({...Z,selectedPath:Z.selectedPath.map(se=>se.id===L?{...se,reason:B}:se)}))},$=(L,B)=>{for(const Z of L){if(Z.id===B)return Z;if(Z.children&&Z.children.length>0){const se=$(Z.children,B);if(se)return se}}return null},T=()=>{if(b.selectedPath.length===0)return l;{const L=b.selectedPath[b.selectedPath.length-1],B=$(l,L.id);return B?B.children:[]}},q=async()=>{try{if(b.selectedPath.length===0){N({show:!0,success:!1,message:""});return}const L={name:b.name,description:b.description,pathType:"author_recommended",chapters:b.selectedPath.map(Z=>({chapterId:Z.id,reason:Z.reason}))};let B;n?B=await Ff(e.id,n.id,L):B=await Bf(e.id,L),B.success?(N({show:!0,success:!0,message:""}),y(!1),_()):N({show:!0,success:!1,message:B.message||""})}catch{N({show:!0,success:!1,message:""})}setTimeout(()=>{N(L=>({...L,show:!1}))},3e3)};return i?o("div",{className:"text-center py-12",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"}),s("p",{className:"mt-2 text-slate-600",children:"..."})]}):o("div",{className:"max-w-4xl",children:[f.show&&s("div",{className:`mb-6 p-4 rounded-lg border ${f.success?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:o("div",{className:"flex items-center space-x-2",children:[f.success?s(hs,{className:"w-5 h-5",stroke:1.8}):s(Et,{className:"w-5 h-5",stroke:1.8}),s("span",{children:f.message})]})}),s("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:o("div",{className:"flex items-start space-x-3",children:[s(Me,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",stroke:1.8}),o("div",{children:[s("h3",{className:"text-blue-800 font-medium mb-1",children:""}),s("p",{className:"text-blue-700 text-sm",children:"  "})]})]})}),v?s("div",{className:"space-y-6",children:o("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[s("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:n?"":""}),o("div",{className:"space-y-4 mb-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"text",name:"name",value:b.name,onChange:p,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"description",value:b.description,onChange:p,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]})]}),o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o("div",{children:[o("h4",{className:"font-medium text-slate-700 mb-3",children:[" (",b.selectedPath.length," )"]}),s("div",{className:"border border-slate-200 rounded-lg max-h-96 overflow-y-auto",children:b.selectedPath.length>0?s("div",{className:"space-y-2 p-2",children:b.selectedPath.map((L,B)=>o("div",{className:"border border-slate-200 rounded-lg p-3 bg-white",children:[o("div",{className:"flex items-center justify-between mb-2",children:[o("div",{className:"flex items-center space-x-2",children:[s("span",{className:"w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-medium",children:B+1}),s("span",{className:"font-medium text-slate-800",children:L.title})]}),B===b.selectedPath.length-1&&s("button",{onClick:R,className:"p-1 text-red-400 hover:text-red-600",title:"",children:s(ab,{className:"w-4 h-4",stroke:1.8})})]}),s("input",{type:"text",value:L.reason,onChange:Z=>g(L.id,Z.target.value),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:""})]},L.id))}):s("div",{className:"text-center py-8 text-slate-500",children:""})})]}),o("div",{children:[s("h4",{className:"font-medium text-slate-700 mb-3",children:b.selectedPath.length===0?"":""}),s("div",{className:"border border-slate-200 rounded-lg max-h-96 overflow-y-auto",children:(()=>{const L=T();return L.length>0?s("div",{className:"space-y-1 p-2",children:L.map(B=>o("div",{className:"flex items-center justify-between p-3 hover:bg-slate-50 rounded-lg border border-transparent hover:border-blue-200",children:[o("div",{className:"flex-1",children:[s("p",{className:"font-medium text-slate-800",children:B.title}),o("p",{className:"text-sm text-slate-500",children:[B.word_count||0,"   ",B.author_username||""]}),B.children&&B.children.length>0&&o("p",{className:"text-xs text-blue-600 mt-1",children:["+",B.children.length," "]})]}),s("button",{onClick:()=>S(B),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:""})]},B.id))}):s("div",{className:"text-center py-8 text-slate-500",children:b.selectedPath.length===0?"":""})})()})]})]}),o("div",{className:"flex items-center justify-end space-x-3 mt-6 pt-4 border-t border-slate-200",children:[s("button",{onClick:m,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:""}),s("button",{onClick:q,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})]})}):s("div",{className:"space-y-6",children:n?o("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[o("div",{className:"flex items-center justify-between mb-4",children:[s("h3",{className:"text-lg font-medium text-slate-800",children:n.name}),s("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]}),n.description&&s("p",{className:"text-slate-600 mb-4",children:n.description}),o("div",{className:"grid grid-cols-2 gap-4 text-sm text-slate-500 mb-4",children:[o("div",{children:["",n.total_chapters||0]}),o("div",{children:["",(n.total_words||0).toLocaleString()]})]}),n.total_chapters>0&&o("div",{children:[s("h4",{className:"font-medium text-slate-700 mb-2",children:""}),s("div",{className:"space-y-2",children:b.selectedPath.map((L,B)=>o("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[s("span",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center text-sm font-medium",children:B+1}),o("div",{className:"flex-1",children:[s("p",{className:"font-medium text-slate-800",children:L.title}),L.reason&&o("p",{className:"text-sm text-slate-600 mt-1",children:["",L.reason]})]})]},L.id))})]})]}):o("div",{className:"text-center py-12 bg-white rounded-lg border border-slate-200",children:[s(Me,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:""}),s("button",{onClick:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})})]})},_N=({novel:e,chapters:t,onRefreshChapters:n,isAuthor:r=!0,canParticipate:l=!1})=>{const[a,i]=h.useState(null),[c,d]=h.useState({title:"",content:""}),u=f=>{i(f.id),d({title:f.title,content:f.content})},v=()=>{i(null),d({title:"",content:""})},y=async f=>{try{console.log(":",f,c),n(),i(null),d({title:"",content:""})}catch(N){console.error(":",N)}},b=f=>new Date(f).toLocaleDateString("zh-CN"),C=f=>({normal:"",ending:"",tail_connection:""})[f]||f;return!r&&!l?o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:s(_n,{className:"w-12 h-12 text-red-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:""})]}):s("div",{className:"max-w-6xl mx-auto",children:o("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s("div",{className:"p-4 md:p-6 border-b border-slate-200",children:o("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0",children:[o("div",{children:[s("h3",{className:"text-lg font-medium text-slate-700",children:""}),s("p",{className:"text-slate-500 text-sm",children:""})]}),(r||l)&&s(ee,{to:`/novel/${e.id}/create-chapter`,className:"w-full md:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-center block",children:r?"":""})]})}),s("div",{className:"p-4 md:p-6",children:t.length===0?o("div",{className:"text-center py-8",children:[s(Me,{className:"w-8 h-8 md:w-12 md:h-12 text-slate-400",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"space-y-2 md:space-y-4",children:t.map((f,N)=>{var _;return s("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3 md:p-6",children:a===f.id?o("div",{className:"space-y-3 md:space-y-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"text",value:c.title,onChange:x=>d(m=>({...m,title:x.target.value})),className:"w-full px-3 md:px-4 py-2 md:py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{value:c.content,onChange:x=>d(m=>({...m,content:x.target.value})),rows:4,className:"w-full px-3 md:px-4 py-2 md:py-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"})]}),o("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[s("button",{onClick:v,className:"w-full sm:w-auto px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors text-sm",children:""}),s("button",{onClick:()=>y(f.id),className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:""})]})]}):o("div",{className:"space-y-3 md:space-y-4",children:[o("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start space-y-2 md:space-y-0",children:[o("div",{className:"flex-1 min-w-0",children:[o("div",{className:"flex items-center justify-between gap-2 mb-2",children:[o("div",{className:"flex items-center gap-2",children:[o("span",{className:"text-xs md:text-sm font-medium text-slate-500 whitespace-nowrap",children:["",N+1,""]}),s("span",{className:`px-2 py-0.5 md:py-1 text-xs rounded-full whitespace-nowrap ${f.chapter_type==="ending"?"bg-red-100 text-red-700":f.chapter_type==="tail_connection"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:C(f.chapter_type)})]}),o("div",{className:"flex md:hidden space-x-1",children:[r&&s("button",{onClick:()=>u(f),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"",children:s(yl,{className:"w-4 h-4",stroke:1.8})}),s(ee,{to:`/novel/${e.id}/chapter/${f.id}`,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"",children:s(Ja,{className:"w-4 h-4",stroke:1.8})})]})]}),s("h4",{className:"text-sm md:text-lg font-medium text-slate-700 mb-1 md:mb-2 break-words leading-tight",children:f.title}),s("p",{className:"text-xs md:text-sm text-slate-600 line-clamp-1 md:line-clamp-3 break-words leading-relaxed overflow-hidden",children:f.content})]}),o("div",{className:"hidden md:flex space-x-2 ml-4",children:[r&&s("button",{onClick:()=>u(f),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"",children:s(yl,{className:"w-4 h-4",stroke:1.8})}),s(ee,{to:`/novel/${e.id}/chapter/${f.id}`,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"",children:s(Ja,{className:"w-4 h-4",stroke:1.8})})]})]}),s("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-1 md:space-y-0",children:o("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 text-xs text-slate-500",children:[o("span",{className:"whitespace-nowrap flex-shrink-0",children:["",f.author_username||""]}),o("span",{className:"whitespace-nowrap flex-shrink-0",children:["",((_=f.word_count)==null?void 0:_.toLocaleString())||0]}),o("span",{className:"whitespace-nowrap flex-shrink-0",children:["",b(f.created_at)]}),s("span",{className:`px-2 py-0.5 md:py-1 rounded-full text-xs whitespace-nowrap flex-shrink-0 ${f.is_published?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:f.is_published?"":""})]})})]})},f.id)})})})]})})},EN=({activeTab:e,novel:t,chapters:n,editFormData:r,onEditInputChange:l,onSaveEdit:a,onRefreshChapters:i,canEditBasicSettings:c=!0,isAuthor:d=!0,disableDescription:u=!1,disableWorldBackground:v=!1,onCoverChange:y,coverPreviewUrl:b})=>{const[C,f]=h.useState({show:!1,success:!1,message:""});h.useState(!1);const N=async()=>{const x=await a();f({show:!0,success:x.success,message:x.message}),setTimeout(()=>{f(m=>({...m,show:!1}))},3e3)},_=()=>{switch(e){case"basic":return s(SN,{novel:t,editFormData:r,onEditInputChange:l,onSave:N,readOnly:!c,disableDescription:u,disableWorldBackground:v,onCoverChange:y,coverPreviewUrl:b});case"reading-paths":return s(CN,{novel:t,chapters:n});case"chapters":return s(_N,{novel:t,chapters:n,onRefreshChapters:i,isAuthor:d,canParticipate:!d&&t.novel_type!=="traditional"&&t.novel_type!=="author_original"});case"view":return s(Id,{novel:t,chapters:n});default:return s("div",{className:"text-center py-12",children:s("p",{className:"text-slate-500",children:""})})}};return o("div",{className:"h-full bg-slate-50",children:[s("div",{className:"hidden md:block bg-white border-b border-slate-200 px-6 py-4",children:o("div",{className:"flex items-center justify-between",children:[o("div",{children:[o("h1",{className:"text-2xl font-bold text-slate-800",children:[e==="basic"&&(c?"":""),e==="reading-paths"&&"",e==="chapters"&&"",e==="view"&&""]}),o("p",{className:"text-slate-600 mt-1",children:[e==="basic"&&(c?"":""),e==="reading-paths"&&"",e==="chapters"&&"",e==="view"&&""]})]}),o("div",{className:"flex items-center space-x-3",children:[e==="basic"&&c&&s("button",{onClick:N,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""}),s(ee,{to:`/novel/${t.id}`,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:""})]})]})}),C.show&&s("div",{className:`mx-6 mt-4 p-4 rounded-lg border ${C.success?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:o("div",{className:"flex items-center space-x-2",children:[C.success?s(hs,{className:"w-5 h-5",stroke:1.8}):s(Et,{className:"w-5 h-5",stroke:1.8}),s("span",{children:C.message})]})}),s("div",{className:"p-6",children:_()})]})},$N=()=>{var G;const{novelId:e}=Rr(),t=ot(),[n,r]=yo(),{user:l,isAuthenticated:a}=it(),[i,c]=h.useState(null),[d,u]=h.useState([]),[v,y]=h.useState(!0),[b,C]=h.useState(""),[f,N]=h.useState("basic"),[_,x]=h.useState(!1),[m,p]=h.useState({description:"",characters:"",worldBackground:"",otherSettings:"",isBranchingEnabled:!1}),[S,R]=h.useState(null),[g,$]=h.useState(null);h.useEffect(()=>{if(e){T(),q();const X=n.get("tab");X&&["basic","reading-paths","chapters","view"].includes(X)&&N(X)}},[e,n]);const T=async()=>{try{const X=await bs(e);X.success?(c(X.novel),p({description:X.novel.description||"",characters:X.novel.characters||"",worldBackground:X.novel.world_background||"",otherSettings:X.novel.other_settings||"",isBranchingEnabled:X.novel.is_branching_enabled||!1})):C(X.message||"")}catch{C("")}},q=async()=>{try{const X=await Eo(e);X.success?u(X.chapters||[]):C(X.message||"")}catch{C("")}finally{y(!1)}},L=X=>{const{name:A,value:te,type:re,checked:ae}=X.target;p(de=>({...de,[A]:re==="checkbox"?ae:te}))},B=(X,A)=>{console.log("NovelEditPage: handleCoverChange :",X?X.name:"null","URL:",A),R(X),$(A)},Z=async()=>{try{const X=i&&(i.novel_type==="mountain_beyond_mountain"||i.novel_type==="infinite_point"),A=!!(i!=null&&i.has_other_contributors),te={...m};X&&A&&(delete te.description,delete te.worldBackground);let re;if(S)try{console.log(":",S.name,S.size);const Ne=new FormData;Ne.append("cover",S),Ne.append("novelId",e),console.log(":","/api/novels/upload-cover");const Ce=await fetch("/api/novels/upload-cover",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:Ne});console.log(":",Ce.status);const M=await Ce.json();if(console.log(":",M),M.success)re=M.coverUrl,console.log("URL:",re);else throw new Error(M.message||"")}catch(Ne){throw console.error(":",Ne),new Error(`: ${Ne.message}`)}else console.log("");const ae={...te,...re&&{coverImageUrl:re}};console.log(":",ae),console.log("URL:",re);const de=await Yb(e,ae);return de.success?(await T(),R(null),$(null),{success:!0,message:""}):{success:!1,message:de.message||""}}catch{return{success:!1,message:""}}};if(v)return o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"}),s("p",{className:"mt-2 text-slate-600",children:"..."})]})})]});if(b||!i)return o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),o("div",{className:"container mx-auto px-4 py-8",children:[o("div",{className:"text-center py-8",children:[s(_n,{className:"w-12 h-12 text-red-400",stroke:1.8}),s("p",{className:"text-red-600 font-medium",children:""})]}),s("div",{className:"text-center py-12",children:s("button",{onClick:()=>t("/"),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:""})})]})]});const se=((G=i.author)==null?void 0:G.id)===(l==null?void 0:l.id),U=se,V=!se&&i.novel_type!=="traditional"&&i.novel_type!=="author_original";return!se&&!V?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),o("div",{className:"container mx-auto px-4 py-8",children:[o("div",{className:"text-center py-8",children:[s(_n,{className:"w-12 h-12 text-red-400",stroke:1.8}),s("p",{className:"text-red-600 font-medium",children:""})]}),s("div",{className:"text-center py-12",children:s("button",{onClick:()=>t(`/novel/${e}`),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:""})})]})]}):o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),o("div",{className:"flex h-[calc(100vh-4rem-1px)]",children:[_&&s("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>x(!1)}),s(wN,{novel:i,activeTab:f,onTabChange:X=>{N(X),r({tab:X}),window.innerWidth<768&&x(!1)},chapters:d,sidebarOpen:_,onClose:()=>x(!1),canEditBasicSettings:U,isAuthor:se}),o("div",{className:"flex-1 overflow-auto",children:[s("div",{className:"md:hidden bg-white border-b border-slate-200 p-4",children:o("div",{className:"flex items-center justify-between",children:[s("button",{onClick:()=>x(!0),className:"p-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:s(Mf,{className:"w-6 h-6",stroke:1.8})}),o("h1",{className:"text-lg font-medium text-slate-700 truncate flex-1 mx-4",children:[f==="basic"&&(U?"":""),f==="reading-paths"&&"",f==="chapters"&&"",f==="view"&&""]}),f==="basic"&&U?s("button",{onClick:async()=>{const X=await Z();X.success?alert(""):alert(`${X.message}`)},className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:""}):s("div",{className:"w-16"})]})}),s(EN,{activeTab:f,novel:i,chapters:d,editFormData:m,onEditInputChange:L,onSaveEdit:Z,onRefreshChapters:q,canEditBasicSettings:U,isAuthor:se,disableDescription:se&&(i.novel_type==="mountain_beyond_mountain"||i.novel_type==="infinite_point")&&!!i.has_other_contributors,disableWorldBackground:se&&(i.novel_type==="mountain_beyond_mountain"||i.novel_type==="infinite_point")&&!!i.has_other_contributors,onCoverChange:B,coverPreviewUrl:g})]})]})]})},PN=()=>{const[e,t]=yo(),[n,r]=h.useState([]),[l,a]=h.useState([]),[i,c]=h.useState(!0),[d,u]=h.useState([]),[v,y]=h.useState("mixed"),b=ot();h.useEffect(()=>{const m=e.get("tag");m&&u([m])},[e]),h.useEffect(()=>{(async()=>{try{const p=await Uf();p.success&&p.tagStats&&a(p.tagStats)}catch(p){console.error(":",p)}})()},[]),h.useEffect(()=>{(async()=>{c(!0);try{let p="updated_at";v==="chapters"?p="chapters":v==="mixed"&&(p="mixed");const S=await Af({limit:50,sortBy:p,tags:d.length>0?d:void 0});if(S.success){let R=S.novels||[];v==="mixed"&&(R=C(R)),r(R)}}catch(p){console.error(":",p)}finally{c(!1)}})()},[d,v]);const C=m=>m.length===0?m:[...m].sort((p,S)=>{const R=new Date,g=30,$=Math.max(0,(R-new Date(p.updated_at))/(1e3*60*60*24)),T=Math.max(0,(R-new Date(S.updated_at))/(1e3*60*60*24)),q=Math.max(0,1-$/g),L=Math.max(0,1-T/g),B=Math.max(...m.map(G=>G.total_chapters||G.totalChapters||0)),Z=B>0?(p.total_chapters||p.totalChapters||0)/B:0,se=B>0?(S.total_chapters||S.totalChapters||0)/B:0,U=q*.7+Z*.3;return L*.7+se*.3-U}),f=m=>{u(p=>p.includes(m)?p.filter(S=>S!==m):[...p,m])},N=()=>{u([])},_=m=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[m]||m,x=m=>{b(`/novel/${m}`)};return o("div",{className:"min-h-screen bg-gray-50",children:[s(_e,{}),s("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o("div",{className:"flex gap-8",children:[s("aside",{className:"w-80 flex-shrink-0",children:o("div",{className:"sticky top-8",children:[o("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[o("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[s(bl,{className:"w-5 h-5 text-yellow-500",stroke:1.5}),""]}),o("div",{className:"text-center py-8 text-gray-500",children:[s("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-8 h-8 text-gray-400",stroke:1.8})}),s("p",{children:""})]})]}),o("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[o("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[s(V1,{className:"w-5 h-5 text-orange-500",stroke:1.5}),""]}),o("div",{className:"text-center py-8 text-gray-500",children:[s("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-8 h-8 text-gray-400",stroke:1.8})}),s("p",{children:""})]})]}),o("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[o("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[s(F1,{className:"w-5 h-5 text-blue-500",stroke:1.5}),""]}),o("div",{className:"mb-6",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o("select",{value:v,onChange:m=>y(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s("option",{value:"mixed",children:""}),s("option",{value:"recent",children:""}),s("option",{value:"chapters",children:""})]})]}),o("div",{className:"mb-4",children:[o("div",{className:"flex items-center justify-between mb-2",children:[s("label",{className:"block text-sm font-medium text-gray-700",children:""}),d.length>0&&s("button",{onClick:N,className:"text-xs text-blue-600 hover:text-blue-800",children:""})]}),s("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map(m=>o("label",{className:"flex items-center cursor-pointer",children:[s("input",{type:"checkbox",checked:d.includes(m.name),onChange:()=>f(m.name),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o("span",{className:"ml-2 text-sm text-gray-700",children:[m.name,o("span",{className:"text-gray-500 ml-1",children:["(",m.novelcount||m.novelCount||0,")"]})]})]},m.name))})]}),d.length>0&&o("div",{className:"pt-4 border-t border-gray-200",children:[s("p",{className:"text-sm text-gray-600 mb-2",children:""}),s("div",{className:"flex flex-wrap gap-2",children:d.map(m=>o("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[m,s("button",{onClick:()=>f(m),className:"ml-1 text-blue-600 hover:text-blue-800",children:""})]},m))})]})]})]})}),o("div",{className:"flex-1",children:[o("div",{className:"mb-6",children:[s("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),o("p",{className:"text-gray-600",children:[" ",n.length," ",d.length>0&&`  ${d.join(", ")}`]})]}),i?s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:6}).map((m,p)=>s("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden animate-pulse",children:o("div",{className:"flex",children:[s("div",{className:"flex-shrink-0 p-3 flex items-center justify-center",children:s("div",{className:"w-32 h-40 bg-gray-200 rounded-lg"})}),o("div",{className:"flex-1 p-4 md:p-6",children:[s("div",{className:"h-4 bg-gray-200 rounded mb-3"}),s("div",{className:"h-6 bg-gray-200 rounded mb-2"}),s("div",{className:"h-4 bg-gray-200 rounded mb-2"}),s("div",{className:"h-4 bg-gray-200 rounded mb-4 w-3/4"}),o("div",{className:"flex justify-between",children:[s("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),s("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})]})},p))}):n.length>0?s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(m=>s("button",{onClick:()=>x(m.id),className:"text-left block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-200 hover:scale-[1.02] hover:-translate-y-1",children:o("div",{className:"flex",children:[s("div",{className:"flex-shrink-0 p-3 flex items-center justify-center",children:s(Er,{title:m.title,author:m.author_username||"",theme:"default",coverUrl:m.cover_image_url,className:"w-32 h-40"})}),o("div",{className:"flex-1 p-4 md:p-6",children:[o("div",{className:"flex items-center justify-between mb-3",children:[o("span",{className:"text-sm text-gray-500",children:[m.tags&&m.tags.length>0?m.tags[0]:"","  ",_(m.novel_type)]}),o("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[m.total_chapters||m.totalChapters||0,""]})]}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2 line-clamp-2",children:m.title}),s("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:m.description||"..."}),o("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o("span",{children:["",m.author_id?s(ee,{to:`/profile/${m.author_id}`,className:"text-gray-600 hover:text-gray-800",onClick:p=>p.stopPropagation(),children:m.author_username||""}):m.author_username||""]}),s("span",{children:new Date(m.updated_at).toLocaleDateString()})]})]})]})},m.id))}):o("div",{className:"text-center py-16",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-12 h-12 text-gray-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),s("p",{className:"text-gray-500",children:d.length>0?`"${d.join(", ")}"`:""}),d.length>0&&s("button",{onClick:N,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:""})]})]})]})}),s(mt,{})]})},TN=()=>{const[e,t]=yo(),[n,r]=h.useState([]),[l,a]=h.useState([]),[i,c]=h.useState(!1),[d,u]=h.useState(""),[v,y]=h.useState(0),[b,C]=h.useState(0),[f,N]=h.useState("novels"),_=ot(),x=h.useRef({q:"",ts:0});h.useEffect(()=>{const $=e.get("q");$&&(u($),m($))},[e]);const m=async $=>{if(!$.trim())return;const T=Date.now();if(!(x.current.q===$&&T-x.current.ts<500)){x.current={q:$,ts:T},c(!0);try{const L=await(await fetch(`/api/search?q=${encodeURIComponent($)}`)).json();L.success?(r(L.novels||[]),y(L.novelsTotal||0),a(L.users||[]),C(L.usersTotal||0)):(r([]),y(0),a([]),C(0))}catch(q){console.error(":",q),r([]),y(0),a([]),C(0)}finally{c(!1)}}},p=$=>{$.preventDefault(),d.trim()&&t({q:d.trim()})},S=($,T)=>{if(!$||!T)return $;const q=new RegExp(`(${T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return $.split(q).map((B,Z)=>q.test(B)?s("mark",{className:"bg-yellow-200 px-1 rounded",children:B},Z):B)},R=$=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[$]||$,g=$=>{_(`/novel/${$}`)};return o("div",{className:"min-h-screen bg-gray-50",children:[s(_e,{}),o("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o("div",{className:"mb-6 md:mb-8",children:[s("form",{onSubmit:p,className:"max-w-2xl mx-auto",children:o("div",{className:"relative",children:[s("input",{type:"text",value:d,onChange:$=>u($.target.value),placeholder:f==="novels"?"...":"...",className:"w-full px-4 md:px-6 py-3 md:py-4 text-base md:text-lg border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"}),s("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-4 md:px-6 py-1.5 md:py-2 bg-blue-600 text-white text-sm md:text-base rounded-full hover:bg-blue-700 transition-colors",children:""})]})}),s("div",{className:"flex justify-center mt-4",children:o("div",{className:"bg-white rounded-full p-1 shadow-sm border border-gray-200",children:[o("button",{onClick:()=>N("novels"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="novels"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:[s(Me,{className:"w-4 h-4 inline mr-2"}),""]}),o("button",{onClick:()=>N("users"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="users"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:[s(Za,{className:"w-4 h-4 inline mr-2"}),""]})]})})]}),d&&o("div",{className:"mb-4 md:mb-6",children:[s("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:""}),o("p",{className:"text-sm md:text-base text-gray-600",children:[" ",f==="novels"?v:b," ",f==="novels"?"":"",d&&`  "${d}"`]})]}),!d&&o("div",{className:"text-center py-12 md:py-16",children:[s("div",{className:"w-16 h-16 md:w-24 md:h-24 mx-auto mb-3 md:mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:s(jf,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400",stroke:1.8})}),s("h3",{className:"text-base md:text-lg font-medium text-gray-900 mb-2",children:""}),o("p",{className:"text-sm md:text-base text-gray-500 px-4",children:["",f==="novels"?"":""]})]}),d&&s(wt,{children:i?s("div",{className:"space-y-4",children:Array.from({length:6}).map(($,T)=>s("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden animate-pulse",children:o("div",{className:"flex gap-3 md:gap-4",children:[s("div",{className:"flex-shrink-0 p-2 md:p-3",children:s("div",{className:"w-20 h-28 md:w-32 md:h-40 bg-gray-200 rounded-lg"})}),o("div",{className:"flex-1 p-3 md:p-4",children:[o("div",{className:"flex items-start justify-between mb-2 md:mb-3",children:[s("div",{className:"h-4 md:h-6 bg-gray-200 rounded flex-1 mr-2 md:mr-3"}),s("div",{className:"w-16 h-5 bg-gray-200 rounded flex-shrink-0"})]}),o("div",{className:"flex items-center mb-2 md:mb-3",children:[s("div",{className:"w-20 h-3 md:h-4 bg-gray-200 rounded mr-2"}),s("div",{className:"w-3 h-3 md:h-4 bg-gray-200 rounded mx-2"}),s("div",{className:"w-24 h-3 md:h-4 bg-gray-200 rounded"})]}),s("div",{className:"h-3 md:h-4 bg-gray-200 rounded mb-3 md:mb-4"}),s("div",{className:"h-3 md:h-4 bg-gray-200 rounded mb-3 md:mb-4 w-3/4"}),o("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-0",children:[s("div",{className:"w-32 h-3 md:h-4 bg-gray-200 rounded"}),s("div",{className:"w-24 h-3 md:h-4 bg-gray-200 rounded"})]})]})]})},T))}):(f==="novels"?n.length>0:l.length>0)?f==="novels"?s("div",{className:"space-y-4",children:n.map($=>s("button",{onClick:()=>g($.id),className:"text-left block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-200 hover:scale-[1.02] hover:-translate-y-1",children:o("div",{className:"flex",children:[s("div",{className:"flex-shrink-0 p-2 md:p-3",children:s(Er,{title:$.title,author:$.author_username||"",theme:"default",coverUrl:$.cover_image_url,className:"w-20 h-40 md:w-32 md:h-40"})}),o("div",{className:"flex-1 p-3 md:p-4 min-w-0",children:[o("div",{className:"flex items-start justify-between mb-2 md:mb-3",children:[s("h3",{className:"text-sm md:text-lg font-semibold text-gray-900 line-clamp-2 flex-1 mr-2 md:mr-3",children:S($.title,d)}),o("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full flex-shrink-0",children:[$.total_chapters||$.totalChapters||0,""]})]}),o("div",{className:"flex items-center text-xs md:text-sm text-gray-500 mb-2 md:mb-3",children:[s("span",{className:"mr-2",children:$.tags&&$.tags.length>0?$.tags[0]:""}),s("span",{children:""}),s("span",{className:"ml-2",children:R($.novel_type)})]}),s("p",{className:"text-gray-600 text-xs md:text-sm mb-3 md:mb-4 line-clamp-2 md:line-clamp-3 leading-relaxed",children:$.description?S($.description,d):"..."}),o("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-xs md:text-sm text-gray-500 gap-1 sm:gap-0",children:[o("span",{className:"truncate",children:["",$.author_id?s(ee,{to:`/profile/${$.author_id}`,className:"text-gray-600 hover:text-gray-800 font-medium",onClick:T=>T.stopPropagation(),children:S($.author_username||"",d)}):S($.author_username||"",d)]}),o("span",{className:"inline-flex items-center gap-1",children:[s(Tf,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.5}),new Date($.updated_at).toLocaleDateString()]})]}),$.tags&&$.tags.length>0&&s("div",{className:"mt-2 md:mt-3 flex flex-wrap gap-1 md:gap-2",children:$.tags.map((T,q)=>s("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors",children:S(T,d)},q))})]})]})},$.id))}):s("div",{className:"space-y-3 md:grid md:grid-cols-2 lg:grid-cols-3 md:gap-6 md:space-y-0",children:l.map($=>{var T,q;return o("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-200 hover:scale-[1.02] hover:-translate-y-1 p-6",children:[s("div",{className:"flex items-center justify-center mb-4",children:s("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold",children:((q=(T=$.username)==null?void 0:T[0])==null?void 0:q.toUpperCase())||""})}),o("div",{className:"text-center mb-4",children:[s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s(ee,{to:`/profile/${$.id}`,className:"hover:text-gray-700",children:S($.username,d)})}),$.bio&&s("p",{className:"text-sm text-gray-600 line-clamp-2",children:S($.bio,d)})]}),o("div",{className:"flex justify-center space-x-4 text-xs text-gray-500 mb-4",children:[o("span",{children:[": ",$.reputation||0]}),o("span",{children:[": ",new Date($.created_at).toLocaleDateString()]})]}),s("div",{className:"flex justify-center",children:s(Rl,{targetUserId:$.id,size:"sm"})})]},$.id)})}):o("div",{className:"text-center py-16",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:s(Me,{className:"w-12 h-12 text-gray-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),o("p",{className:"text-gray-500",children:['"',d,'"']}),o("div",{className:"mt-4 text-sm text-gray-400",children:[s("p",{children:""}),o("ul",{className:"mt-2 space-y-1",children:[s("li",{children:" "}),s("li",{children:" "}),s("li",{children:" "})]})]})]})})]}),s(mt,{})]})},RN=()=>o("div",{className:"gradient-bg min-h-screen",children:[o("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[s("div",{className:"ornament absolute top-24 left-16 w-14 h-14 opacity-30"}),s("div",{className:"ornament absolute bottom-24 right-24 w-16 h-16 opacity-25"})]}),s(_e,{}),o("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[o("header",{className:"mb-10 text-center",children:[s("h1",{className:"text-4xl md:text-5xl font-light text-slate-700 mb-4 text-glow",children:"  "}),s("p",{className:"text-slate-600 max-w-3xl mx-auto",children:""})]}),o("section",{className:"mb-12 bg-white/80 backdrop-blur-sm rounded-2xl p-6 md:p-8 card-shadow",children:[s("h2",{className:"text-2xl font-medium text-slate-700 mb-4",children:""}),s("p",{className:"text-slate-600 leading-7",children:""})]}),o("section",{className:"mb-12 grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 card-shadow",children:[s("h3",{className:"text-xl font-medium text-slate-700 mb-3",children:"  "}),o("ul",{className:"list-disc pl-5 space-y-2 text-slate-600",children:[o("li",{children:[s("span",{className:"font-medium text-slate-700",children:""}),""]}),o("li",{children:[s("span",{className:"font-medium text-slate-700",children:""}),""]}),o("li",{children:[s("span",{className:"font-medium text-slate-700",children:""}),""]}),o("li",{children:[s("span",{className:"font-medium text-slate-700",children:""}),""]})]})]}),o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 card-shadow",children:[s("h3",{className:"text-xl font-medium text-slate-700 mb-3",children:""}),o("ul",{className:"list-disc pl-5 space-y-2 text-slate-600",children:[s("li",{children:" ID"}),s("li",{children:""}),s("li",{children:""})]})]})]}),o("section",{className:"mb-12 grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 card-shadow",children:[s("h3",{className:"text-xl font-medium text-slate-700 mb-3",children:""}),o("ul",{className:"list-disc pl-5 space-y-2 text-slate-600",children:[s("li",{children:""}),s("li",{children:""}),s("li",{children:""}),s("li",{children:""}),s("li",{children:""})]})]}),o("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 card-shadow",children:[s("h3",{className:"text-xl font-medium text-slate-700 mb-3",children:""}),o("ul",{className:"list-disc pl-5 space-y-2 text-slate-600",children:[s("li",{children:""}),s("li",{children:""}),s("li",{children:"-"}),s("li",{children:" CC BY-SA "})]})]})]}),o("section",{className:"mb-12 bg-white/80 backdrop-blur-sm rounded-2xl p-6 md:p-8 card-shadow",children:[s("h3",{className:"text-xl font-medium text-slate-700 mb-3",children:""}),o("div",{className:"text-slate-600 space-y-3",children:[s("p",{children:""}),s("p",{children:" React + Tailwind HTML5 Canvas Node.js GraphQL PostgreSQL Docker"})]})]}),o("section",{className:"mb-12 bg-white/80 backdrop-blur-sm rounded-2xl p-6 md:p-8 card-shadow",children:[s("h3",{className:"text-xl font-medium text-slate-700 mb-3",children:""}),s("p",{className:"text-slate-600",children:""})]})]}),s(mt,{})]}),Rm=({novelId:e,chapterId:t,isDark:n=!1})=>{const{user:r,isAuthenticated:l}=it(),[a,i]=h.useState([]),[c,d]=h.useState(!0),[u,v]=h.useState(""),[y,b]=h.useState(!1),[C,f]=h.useState(null),[N,_]=h.useState(""),[x,m]=h.useState(new Set),[p,S]=h.useState({}),[R,g]=h.useState(!1),[$,T]=h.useState(null),[q,L]=h.useState(!1),[B,Z]=h.useState(null);h.useEffect(()=>{se()},[e,t]);const se=async()=>{console.log(":",{novelId:e,chapterId:t}),d(!0);try{const M=await uN(e,t);console.log(":",M),M.success&&(console.log("",M.comments.length,""),i(M.comments))}catch(M){console.error(":",M)}finally{d(!1)}},U=async M=>{if(M.preventDefault(),!l){alert("");return}if(u.trim()){b(!0);try{const W=await Tm(e,t,u.trim());W.success?(v(""),se()):alert(W.message||"")}catch{alert("")}finally{b(!1)}}},V=async(M,W)=>{if(M.preventDefault(),!l){alert("");return}if(N.trim()){b(!0);try{const Y=await Tm(e,t,N.trim(),W);Y.success?(_(""),f(null),i(oe=>oe.map(pe=>pe.id===W?{...pe,reply_count:parseInt(pe.reply_count||0)+1}:pe)),G(W)):alert(Y.message||"")}catch{alert("")}finally{b(!1)}}},G=async M=>{try{const W=await mN(M);W.success&&S(Y=>({...Y,[M]:W.replies}))}catch(W){console.error(":",W)}},X=async M=>{x.has(M)?m(W=>{const Y=new Set(W);return Y.delete(M),Y}):(m(W=>new Set([...W,M])),p[M]||await G(M))},A=async M=>{if(!l){alert("");return}try{const W=await dN(M);W.success&&(i(Y=>Y.map(oe=>oe.id===M?{...oe,is_liked:W.action==="like",like_count:W.action==="like"?oe.like_count+1:oe.like_count-1}:oe)),S(Y=>{const oe={...Y};return Object.keys(oe).forEach(pe=>{oe[pe]=oe[pe].map(j=>j.id===M?{...j,is_liked:W.action==="like",like_count:W.action==="like"?j.like_count+1:j.like_count-1}:j)}),oe}))}catch(W){console.error(":",W)}},te=(M,W=!1,Y=null)=>{if(!l){alert("");return}Z({commentId:M,isReply:W,parentCommentId:Y}),L(!0)},re=async()=>{if(!B)return;const{commentId:M,isReply:W,parentCommentId:Y}=B;console.log(":",{commentId:M,isReply:W,parentCommentId:Y});try{const oe=await hN(M);console.log("API:",oe),oe.success?(console.log("UI"),L(!1),Z(null),W&&Y?(console.log(""),i(pe=>pe.map(j=>j.id===Y?{...j,reply_count:Math.max(parseInt(j.reply_count||1)-1,0)}:j)),console.log(""),await G(Y)):(console.log(""),await se()),console.log("")):(console.error(":",oe.message),L(!1),Z(null))}catch(oe){console.error(":",oe),L(!1),Z(null)}},ae=async(M,W,Y)=>{try{const oe=await pN(M,W,Y);oe.success?(alert(""),g(!1),T(null)):alert(oe.message||"")}catch{alert("")}},de=({isOpen:M,onClose:W,onSubmit:Y})=>{const[oe,pe]=h.useState(""),[j,E]=h.useState("");return M?s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",style:n?{backgroundColor:"#191c1f",borderColor:"#2a2d30"}:{},children:[s("h3",{className:`text-lg font-semibold mb-4 ${n?"text-slate-100":"text-gray-900"}`,children:""}),o("form",{onSubmit:O=>{if(O.preventDefault(),!oe){alert("");return}Y(oe,j),pe(""),E("")},children:[o("div",{className:"mb-4",children:[s("label",{className:`block text-sm font-medium mb-2 ${n?"text-slate-300":"text-gray-700"}`,children:" *"}),o("select",{value:oe,onChange:O=>pe(O.target.value),className:`w-full p-2 border rounded-md ${n?"text-slate-100 border-slate-600":"border-gray-300"}`,style:n?{backgroundColor:"#232629",borderColor:"#2a2d30"}:{},required:!0,children:[s("option",{value:"",children:""}),["","","","","",""].map(O=>s("option",{value:O,children:O},O))]})]}),o("div",{className:"mb-4",children:[s("label",{className:`block text-sm font-medium mb-2 ${n?"text-slate-300":"text-gray-700"}`,children:""}),s("textarea",{value:j,onChange:O=>E(O.target.value),className:`w-full p-2 border rounded-md ${n?"text-slate-100 border-slate-600":"border-gray-300"}`,style:n?{backgroundColor:"#232629",borderColor:"#2a2d30"}:{},rows:"3",placeholder:"...",maxLength:"500"})]}),o("div",{className:"flex space-x-3",children:[s("button",{type:"button",onClick:W,className:`flex-1 px-4 py-2 border rounded-md ${n?"border-slate-600 text-slate-300 hover:bg-slate-700":"border-gray-300 hover:bg-gray-50"}`,style:n?{backgroundColor:"#232629"}:{},children:""}),s("button",{type:"submit",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:""})]})]})]})}):null},Ne=({isOpen:M,onClose:W,onConfirm:Y})=>M?s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",style:n?{backgroundColor:"#191c1f",borderColor:"#2a2d30"}:{},children:[o("div",{className:"flex justify-between items-center mb-4",children:[s("h3",{className:`text-lg font-semibold ${n?"text-slate-100":"text-gray-900"}`,children:""}),s("button",{onClick:W,className:`text-xl hover:opacity-75 ${n?"text-slate-400 hover:text-slate-200":"text-gray-500 hover:text-gray-700"}`,children:""})]}),s("p",{className:`text-sm mb-6 ${n?"text-slate-300":"text-gray-600"}`,children:""}),o("div",{className:"flex space-x-3",children:[s("button",{type:"button",onClick:W,className:`flex-1 px-4 py-2 border rounded-md transition-colors ${n?"border-slate-600 text-slate-300 hover:bg-slate-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,style:n?{backgroundColor:"#2a2d30"}:{},children:""}),s("button",{onClick:Y,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:""})]})]})}):null,Ce=h.useCallback(({comment:M,isReply:W=!1,allComments:Y=[],parentCommentId:oe=null})=>o("div",{className:`${W?"ml-6 border-l-2 pl-3":""}`,style:{borderColor:W?n?"#4b5563":"#e5e7eb":"transparent"},children:[o("div",{className:"flex items-start space-x-2",children:[s(Gn,{user:{username:M.username,avatar_url:M.avatar_url||null},size:"xs"}),o("div",{className:"flex-1 min-w-0",children:[o("div",{className:"flex items-center space-x-2 mb-1",children:[M.user_id?s(ee,{to:`/profile/${M.user_id}`,className:"font-medium text-sm hover:text-blue-600 transition-colors",style:{color:n?"#f3f4f6":"#1f2937"},onClick:pe=>pe.stopPropagation(),children:M.username||""}):s("span",{className:"font-medium text-sm",style:{color:n?"#f3f4f6":"#1f2937"},children:M.username||""}),M.user_id&&s(Rl,{targetUserId:M.user_id,size:"sm",className:"ml-2"}),s("span",{className:"text-xs",style:{color:n?"#9ca3af":"#6b7280"},children:new Date(M.created_at).toLocaleString()})]}),s("p",{className:"text-sm mb-2",style:{color:n?"#e5e7eb":"#374151"},children:(()=>{const pe=oe?[...Y,...Object.values(p).flat()].find(w=>w.id===oe):null,E=W&&pe&&pe.username!==M.username?` @${pe.username}`:"";return o(wt,{children:[E,M.content]})})()}),o("div",{className:"flex items-center space-x-3 text-xs",children:[o("button",{onClick:()=>A(M.id),className:`flex items-center space-x-1 hover:opacity-75 ${M.is_liked?"text-red-500":""}`,style:{color:M.is_liked?"#ef4444":n?"#9ca3af":"#6b7280"},children:[M.is_liked?s($c,{className:"w-3.5 h-3.5"}):s(Nn,{className:"w-3.5 h-3.5"}),s("span",{children:M.like_count||0})]}),s("button",{onClick:()=>f(M.id),className:"hover:opacity-75",style:{color:n?"#60a5fa":"#2563eb"},children:""}),!W&&parseInt(M.reply_count)>0&&o("button",{onClick:()=>X(M.id),className:"hover:opacity-75",style:{color:n?"#60a5fa":"#2563eb"},children:[x.has(M.id)?"":""," ",parseInt(M.reply_count)||0," "]}),M.user_id===(r==null?void 0:r.id)&&s("button",{onClick:()=>te(M.id,W,W?M.parent_comment_id:null),className:"hover:opacity-75 text-red-500 hover:text-red-600",children:""}),s("button",{onClick:()=>{T(M.id),g(!0)},className:"hover:opacity-75",style:{color:n?"#9ca3af":"#6b7280"},children:""})]})]})]}),x.has(M.id)&&p[M.id]&&s("div",{className:"mt-2",children:p[M.id].map(pe=>o("div",{className:"mb-2",children:[s(Ce,{comment:pe,isReply:!0,allComments:[...a,...Object.values(p).flat()],parentCommentId:pe.parent_comment_id}),C===pe.id&&o("form",{onSubmit:j=>V(j,pe.id),className:"mt-2 ml-6",children:[s("textarea",{value:N,onChange:j=>_(j.target.value),className:"w-full p-2 border rounded-md resize-none text-sm",style:{backgroundColor:n?"#232629":"white",borderColor:n?"#2a2d30":"#d1d5db",color:n?"#f9fafb":"#1f2937"},rows:"2",placeholder:"...",maxLength:"1000"}),o("div",{className:"flex space-x-2 mt-2",children:[s("button",{type:"submit",disabled:y||!N.trim(),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:y?"...":""}),s("button",{type:"button",onClick:()=>{f(null),_("")},className:"px-2 py-1 border rounded text-xs hover:opacity-75",style:{borderColor:n?"#2a2d30":"#d1d5db",color:n?"#d1d5db":"#6b7280",backgroundColor:n?"#232629":"white"},children:""})]})]})]},pe.id))})]}),[n,x,p,A,X,T,g,te,r,a]);return o("div",{className:"rounded-lg shadow-sm border p-4",style:{backgroundColor:n?"#191c1f":"white",borderColor:n?"#2a2d30":"#d1d5db"},children:[o("h3",{className:"text-base font-semibold mb-3",style:{color:n?"#f9fafb":"#1f2937"},children:[" ",a.length," "]}),l?o("form",{onSubmit:U,className:"mb-4",children:[s("textarea",{value:u,onChange:M=>v(M.target.value),className:"w-full p-2 border rounded-md resize-none text-sm",style:{backgroundColor:n?"#232629":"white",borderColor:n?"#2a2d30":"#d1d5db",color:n?"#f9fafb":"#1f2937"},rows:"2",placeholder:"...",maxLength:"1000"}),o("div",{className:"flex justify-between items-center mt-2",children:[o("span",{className:"text-xs",style:{color:n?"#9ca3af":"#6b7280"},children:[u.length,"/1000"]}),s("button",{type:"submit",disabled:y||!u.trim(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm",children:y?"...":""})]})]}):s("div",{className:"mb-4 p-3 rounded-md text-center text-sm",style:{backgroundColor:n?"#232629":"#f9fafb",color:n?"#d1d5db":"#6b7280"},children:s("p",{children:""})}),c?s("div",{className:"text-center py-4",children:s("div",{className:"text-sm",style:{color:n?"#9ca3af":"#6b7280"},children:"..."})}):a.length===0?s("div",{className:"text-center py-4",children:s("div",{className:"text-sm",style:{color:n?"#9ca3af":"#6b7280"},children:""})}):s("div",{className:"space-y-3",children:a.map(M=>o("div",{children:[s(Ce,{comment:M,allComments:a,parentCommentId:M.parent_comment_id}),C===M.id&&o("form",{onSubmit:W=>V(W,M.id),className:"mt-2 ml-8",children:[s("textarea",{value:N,onChange:W=>_(W.target.value),className:"w-full p-2 border rounded-md resize-none text-sm",style:{backgroundColor:n?"#232629":"white",borderColor:n?"#2a2d30":"#d1d5db",color:n?"#f9fafb":"#1f2937"},rows:"2",placeholder:"...",maxLength:"1000"}),o("div",{className:"flex space-x-2 mt-2",children:[s("button",{type:"submit",disabled:y||!N.trim(),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:y?"...":""}),s("button",{type:"button",onClick:()=>{f(null),_("")},className:"px-2 py-1 border rounded text-xs hover:opacity-75",style:{borderColor:n?"#2a2d30":"#d1d5db",color:n?"#d1d5db":"#6b7280",backgroundColor:n?"#232629":"white"},children:""})]})]})]},M.id))}),s(de,{isOpen:R,onClose:()=>{g(!1),T(null)},onSubmit:(M,W)=>ae($,M,W)}),s(Ne,{isOpen:q,onClose:()=>{L(!1),Z(null)},onConfirm:re})]})},hn="reader_settings_light",fn="reader_settings_dark",bi="reader_theme",Mm="reader_pagination_mode",Vt={fontFamily:'system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"',fontSize:18,lineHeight:1.8,backgroundColor:"#ffffff",textColor:"#1f2937"},pn={fontFamily:Vt.fontFamily,fontSize:18,lineHeight:1.8,backgroundColor:"#0e1516",textColor:"#e2e8f0"},MN=()=>{var Hd;const{novelId:e,chapterId:t}=Rr(),n=ot(),{isAuthenticated:r}=it(),[l,a]=h.useState(null),[i,c]=h.useState(null),[d,u]=h.useState([]),[v,y]=h.useState(!0),[b,C]=h.useState(!0),[f,N]=h.useState(!1),[_,x]=h.useState(""),[m,p]=h.useState(!1),[S,R]=h.useState(!1),[g,$]=h.useState(()=>{const k=localStorage.getItem(bi);return k?k==="dark":!1}),[T,q]=h.useState(()=>{const k=localStorage.getItem(bi)==="dark"?fn:hn,P=localStorage.getItem(k);if(P)try{return JSON.parse(P)}catch{}return g?pn:Vt}),[L,B]=h.useState(!1),[Z,se]=h.useState(!1),[U,V]=h.useState(!1),[G,X]=h.useState("list"),[A,te]=h.useState(!1),[re,ae]=h.useState(null),[de,Ne]=h.useState({common:!1,font:!0,color:!0,readingPath:!0,pagination:!0,navigation:!1,menu:!0}),[Ce,M]=h.useState(!1),[W,Y]=h.useState([]),[oe,pe]=h.useState([]),[j,E]=h.useState([]),[w,I]=h.useState({open:!1,title:"",message:"",onConfirm:null}),O=({items:k,emptyText:P,onJump:F})=>!k||k.length===0?s("div",{className:`text-sm ${g?"text-slate-400":"text-slate-500"}`,children:P}):s("div",{className:"space-y-2",children:k.map(J=>o("div",{className:`w-full px-3 py-2 rounded-lg border transition-colors flex items-center justify-between ${g?"border-slate-700 hover:bg-slate-800":"border-slate-200 hover:bg-slate-50"}`,children:[o("button",{onClick:()=>F(J.chapter_id,J.novel_id),className:"text-left flex-1 min-w-0",children:[s("div",{className:"font-medium text-sm truncate",children:J.title||""}),s("div",{className:`text-xs truncate ${g?"text-slate-400":"text-slate-500"}`,children:J.note||""})]}),o("div",{className:"flex items-center gap-2 flex-shrink-0 ml-3",children:[!J.is_global&&s("button",{title:"",className:`px-2 py-1 text-sm font-medium rounded ${g?"hover:bg-slate-700":"hover:bg-slate-100"}`,onClick:async()=>{const le=await yi(J.chapter_id,J.note||null,!0);le&&le.success&&await Ir()},children:""}),s("button",{title:"",className:`p-1.5 rounded ${g?"hover:bg-slate-700 text-slate-300":"hover:bg-slate-100 text-slate-600"}`,onClick:()=>{I({open:!0,title:"",message:"",onConfirm:async()=>{const le=await Pm(J.chapter_id);le&&le.success&&await Ir()}})},children:s(Of,{className:"w-4 h-4",stroke:1.8})})]})]},J.id))}),[H,K]=h.useState([]),[ue,ve]=h.useState(null),[be,ct]=h.useState(()=>localStorage.getItem(`reading_mode_${e}`)||"ask"),[Ue,kt]=h.useState(!1),[Rt,sr]=h.useState(0),[Ut,Zt]=h.useState(!1),[zr,Ze]=h.useState(!1),[$e,jd]=h.useState(()=>{const k=localStorage.getItem(Mm);return k||(window.innerWidth<=768?"horizontal":"scroll")}),[we,$o]=h.useState([]),[me,lr]=h.useState(0),[Ke,Po]=h.useState(0),[Od,Ml]=h.useState(!1);h.useState(!1);const Ns=h.useRef(null),To=h.useRef(null);h.useRef(null);const Lr=h.useRef(0),$n=h.useRef(null),zl=h.useRef(0),Yf=h.useRef(null),Ro=h.useRef(!1),Bt=h.useRef(0),Mo=k=>!k||typeof k!="string"?"":k.replace(/\n\s*\n\s*\n+/g,`

`).replace(/\n\s*\n\s*\n+/g,`

`).replace(/^\s+/,"").replace(/\s+$/,""),zo=h.useRef(!1),Lo=async()=>{if(l!=null&&l.content&&!zo.current){zo.current=!0,Ml(!0);try{await new Promise(We=>setTimeout(We,100));const k=Ns.current||To.current;if(!k){console.error(""),Ml(!1);return}let P=k.querySelector(".max-w-3xl.mx-auto.px-4.py-4.h-full.flex.flex-col"),F=0,J=0,le=0;if(P&&P.clientHeight>0){F=P.clientHeight,J=P.clientWidth;const We=document.createElement("h1");We.textContent=l.title,We.className="text-2xl font-semibold mb-6 flex-shrink-0",We.style.cssText=`
          position: absolute;
          top: -9999px;
          left: -9999px;
          width: ${J}px;
          font-family: ${T.fontFamily};
          color: ${T.textColor};
        `,document.body.appendChild(We),le=We.offsetHeight+24,document.body.removeChild(We)}else{const We=window.innerHeight,Pn=document.querySelector(".fixed.top-0"),nn=Pn?Pn.offsetHeight:40,Tn=document.querySelector(".fixed.bottom-4.right-4"),tt=Tn?Tn.offsetHeight+16:30,dr=32;J=Math.min(window.innerWidth-32,768);const ur=document.createElement("h1");ur.textContent=l.title,ur.className="text-2xl font-semibold mb-6 flex-shrink-0",ur.style.cssText=`
          position: absolute;
          top: -9999px;
          left: -9999px;
          width: ${J}px;
          font-family: ${T.fontFamily};
          color: ${T.textColor};
        `,document.body.appendChild(ur),le=ur.offsetHeight+24,document.body.removeChild(ur),F=We-nn-tt-dr}const Q=F-le,he=F;if(he<=0||J<=0)throw new Error(`: ${J}x${he}`);const ke=document.createElement("div");ke.className="prose max-w-none",ke.style.cssText=`
        position: absolute;
        top: -9999px;
        left: -9999px;
        width: ${J}px;
        max-width: none;
        font-family: ${T.fontFamily};
        font-size: ${T.fontSize}px;
        line-height: ${T.lineHeight};
        color: ${T.textColor};
        background-color: ${T.backgroundColor};
        padding: 0;
        margin: 0;
        border: none;
        box-sizing: border-box;
      `,document.body.appendChild(ke);const et=document.createElement("style");et.setAttribute("data-pagination","true"),et.textContent=`
        .mb-5 { margin-bottom: 1.25rem; }
        .first\\:mt-0:first-child { margin-top: 0; }
        .last\\:mb-0:last-child { margin-bottom: 0; }
      `,document.head.appendChild(et);const Dt=We=>We.trim()?(ke.innerHTML="",We.split(`
`).filter(nn=>nn.trim()).forEach((nn,Tn)=>{const tt=document.createElement("p");tt.className="mb-5 first:mt-0 last:mb-0",tt.style.cssText=`
            text-indent: 2em;
            line-height: ${T.lineHeight};
            font-size: ${T.fontSize}px;
            font-family: ${T.fontFamily};
            word-wrap: break-word;
            overflow-wrap: break-word;
          `,tt.textContent=nn,ke.appendChild(tt)}),ke.scrollHeight):0,cr=Mo(l.content),un=[];let mn=0;for(;mn<cr.length;){const Pn=un.length===0?Q:he;let nn=mn,Tn=cr.length,tt=mn;for(;nn<=Tn;){const Rn=Math.floor((nn+Tn)/2),Vd=cr.slice(mn,Rn);Dt(Vd)<=Pn?(tt=Rn,nn=Rn+1):Tn=Rn-1}for(tt===mn&&(tt=mn+1);tt<cr.length;){const Rn=cr.slice(mn,tt+1);if(Dt(Rn)<=Pn)tt++;else break}const dr=cr.slice(mn,tt);un.push({content:dr,type:"content"});const ur=Dt(dr),qN=dr.split(`
`).filter(Rn=>Rn.trim()).length;mn=tt}un.length===0&&un.push({content:cr,type:"content"}),un.forEach((We,Pn)=>{if(We.type==="content"){const nn=Dt(We.content),Tn=Pn===0?Q:he,tt=We.content.split(`
`).filter(dr=>dr.trim()).length}}),sp.current=!0,un.push({content:"",type:"comments"}),document.body.removeChild(ke),document.head.removeChild(et),$o(un),Po(un.length);const ap=Mt.current!=null&&Mt.current>0,op=(Bt.current||0)>0;!ap&&!op&&lr(0),Fd.current=un}catch(k){console.error(":",k);try{const le=document.body.querySelector('[style*="position: absolute"][style*="top: -9999px"]');le&&document.body.removeChild(le);const Q=document.head.querySelector("style[data-pagination]");Q&&document.head.removeChild(Q)}catch{}const P=[{content:l.content,type:"content"},{content:"",type:"comments"}];$o(P),Po(P.length);const F=Mt.current!=null&&Mt.current>0,J=(Bt.current||0)>0;!F&&!J&&lr(0)}finally{Ml(!1),zo.current=!1}}},Io=k=>{let P=typeof Bt.current=="number"?Bt.current:0;if(!P||Number.isNaN(P))try{if($e==="horizontal")P=Dd();else{const F=Ns.current,J=F?F.scrollTop:window.pageYOffset||document.documentElement.scrollTop,le=F?F.scrollHeight:document.documentElement.scrollHeight,Q=F?F.clientHeight:window.innerHeight,he=Math.max(1,le-Q);P=Math.min(100,Math.max(0,J/he*100)),P=Math.round(P*100)/100}}catch{}if(Mt.current=P,Lr.current=P,Bt.current=P,Ft(!1),jd(k),localStorage.setItem(Mm,k),k!=="horizontal"){const F=(J=0)=>{const le=Mt.current??0,Q=Ns.current;if(Q&&Q.scrollHeight>Q.clientHeight){const ke=Q.scrollHeight,et=Q.clientHeight,Dt=Math.max(1,ke-et),Ar=Math.round(le/100*Dt);try{Q.scrollTo({top:Ar})}catch{Q.scrollTop=Ar}Ft(!0),Mt.current=null}else if(J<10)requestAnimationFrame(()=>F(J+1));else{const ke=document.documentElement.scrollHeight,et=window.innerHeight,Dt=Math.max(1,ke-et),Ar=Math.round(le/100*Dt);try{window.scrollTo({top:Ar})}catch{document.documentElement.scrollTop=Ar}Ft(!0),Mt.current=null}};requestAnimationFrame(()=>F(0))}},Ll=k=>{if(k>=0&&k<Ke&&k!==me&&(lr(k),$e==="horizontal"&&r&&we&&we.length>0)){const P=Dd();Lr.current=P,Bt.current=P,vi(e,t,P,ue==null?void 0:ue.id)}},ws=()=>{if(me>0)Ll(me-1);else if(en){try{sessionStorage.setItem(`restore_to_comments_${en}`,"1")}catch{}n(`/novel/${e}/read/${en}`)}},ks=()=>{var k;me<Ke-1?Ll(me+1):((k=we[me])==null?void 0:k.type)==="comments"&&Il("next")},Il=k=>{if(k==="prev"&&en)n(`/novel/${e}/read/${en}`);else if(k==="next")if(be==="random")tp();else if(be==="custom"||be==="author_recommended"){const P=ep();P?n(`/novel/${e}/read/${P}`):ae(ar)}else ar.length===1?n(`/novel/${e}/read/${ar[0].id}`):ar.length>1&&ae(ar)},Kf=async()=>{y(!0),x(""),Ft(!1),lp.current=!0;try{const k=await Kb(e,t);if(!k.success){x(k.message||"");return}a(k.chapter);const P=await bs(e);P.success&&c(P.novel);const F=await Eo(e);F.success&&u(F.chapters),Gf(),Qf(),$e!=="horizontal"&&Ft(!0)}catch(k){console.error(":",k),x(""),Ft(!0)}finally{y(!1),C(!1)}},Qf=async()=>{try{const[k,P]=await Promise.all([iN(e,t),cN(e,t)]);k.success&&kt(k.isLiked),P.success&&sr(P.count)}catch(k){console.error(":",k)}},Ad=async()=>{if(!r){alert("");return}Zt(!0);try{const k=await oN(e,t);k.success?(kt(k.action==="like"),sr(P=>k.action==="like"?P+1:P-1)):alert(k.message||"")}catch{alert("")}finally{Zt(!1)}},qf=async(k,P)=>{try{const F=await fN(e,t,k,P);F.success?(alert(""),Ze(!1)):alert(F.message||"")}catch{alert("")}};h.useEffect(()=>{kt(!1),sr(0),Zt(!1),Kf(),Ir(),Ro.current=!1},[e,t]),h.useEffect(()=>{if(i&&i.novel_type){const k=i.novel_type==="traditional"?"list":"view";X(k),te(!1)}},[i]),h.useEffect(()=>{te(!1)},[G]),h.useEffect(()=>{te(!1)},[t]),h.useEffect(()=>{v||!l||Lo()},[v,l,$e,T.fontSize,T.lineHeight,T.fontFamily]),h.useEffect(()=>{const k=()=>{l&&Lo()},P=(()=>{let F;return()=>{clearTimeout(F),F=setTimeout(k,300)}})();return window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P)}},[$e,l]),h.useEffect(()=>{if($e!=="horizontal")return;const k=P=>{if(!(P.target.tagName==="INPUT"||P.target.tagName==="TEXTAREA"))switch(P.key){case"ArrowLeft":case"ArrowUp":case"PageUp":P.preventDefault(),ws();break;case"ArrowRight":case"ArrowDown":case"PageDown":case" ":P.preventDefault(),ks();break;case"Home":P.preventDefault(),Ll(0);break;case"End":P.preventDefault(),Ll(Ke-1);break}};return window.addEventListener("keydown",k),()=>{window.removeEventListener("keydown",k)}},[$e,me,Ke]),h.useEffect(()=>{localStorage.setItem(bi,g?"dark":"light"),localStorage.setItem(g?fn:hn,JSON.stringify(T))},[g,T]),h.useEffect(()=>{!v&&l&&r&&(qb(l.id).then(k=>{k&&k.success&&B(!!k.exists)}),$m(e,l.id,0))},[v,l,r,e]),h.useEffect(()=>{if(!r||!l)return;let k=null;const P=()=>{const J=window.pageYOffset||document.documentElement.scrollTop,le=document.documentElement.scrollHeight,Q=window.innerHeight,he=Math.max(1,le-Q),ke=Math.min(100,Math.max(0,J/he*100));Bt.current=Math.round(ke*100)/100,Math.abs(ke-Lr.current)>=1&&(Lr.current=ke,vi(e,t,Math.round(ke*100)/100,ue==null?void 0:ue.id))},F=()=>{k&&clearTimeout(k),k=setTimeout(()=>{P()},300)};if($e!=="horizontal")return window.addEventListener("scroll",F,{passive:!0}),()=>{window.removeEventListener("scroll",F),k&&clearTimeout(k)}},[e,t,r,l,$e,me,we]),h.useEffect(()=>{if(!l||!r||v||Ro.current)return;let k=!1;Ro.current=!0;const P=async()=>{try{const J=await Pc(e);if(k)return;let le=0;if(J&&J.success&&J.progress&&J.progress.current_chapter_id===l.id){const Q=J.progress.progress_percentage;le=parseFloat(Q)||0}if(Yf.current=le,Lr.current=le,Bt.current=le,le>0)if(Ft(!1),$e==="horizontal")Mt.current=le,console.log("",le+"%");else{const Q=document.documentElement.scrollHeight,he=window.innerHeight,ke=Math.max(1,Q-he),et=Math.round(le/100*ke);try{window.scrollTo({top:et})}catch{document.documentElement.scrollTop=et}}else(!J||!J.success||!J.progress)&&vi(e,t,0,ue==null?void 0:ue.id),Bt.current=0,Ft(!0)}catch{}},F=setTimeout(async()=>{await P(),Ft(!0)},0);return()=>{k=!0,clearTimeout(F)}},[l==null?void 0:l.id,e,r,$e,v]),h.useEffect(()=>{$e==="horizontal"&&(v||!l||we.length!==0&&(async()=>{var k;try{let P=0;if(r)try{const le=await Pc(e);le&&le.success&&le.progress&&le.progress.current_chapter_id===l.id?P=parseFloat(le.progress.progress_percentage)||0:P=0}catch{P=0}else P=Mt.current||Bt.current||0;let F=0;const J=we;if((P??0)>0&&J&&J.length>0){const le=J.filter(Q=>(Q==null?void 0:Q.type)==="content").length;if(le>1){const Q=Math.round(P/100*(le-1));let he=-1;for(let ke=0;ke<J.length;ke++)if(((k=J[ke])==null?void 0:k.type)==="content"&&(he++,he===Q)){F=ke;break}}}lr(F),Lr.current=P??0,Bt.current=P??0,Mt.current=null;try{if(we&&we.length>0&&sessionStorage.getItem(`restore_to_comments_${l.id}`)==="1"){const Q=we.findIndex(he=>(he==null?void 0:he.type)==="comments");Q>=0&&lr(Q),sessionStorage.removeItem(`restore_to_comments_${l.id}`)}}catch{}}finally{Ft(!0)}})())},[$e,v,l,we,r]),h.useEffect(()=>{if(!(!l||!l.id)&&!(!we||we.length===0))try{if(sessionStorage.getItem(`restore_to_comments_${l.id}`)==="1"){const P=we.findIndex(F=>(F==null?void 0:F.type)==="comments");P>=0&&lr(P),sessionStorage.removeItem(`restore_to_comments_${l.id}`)}}catch{}},[l==null?void 0:l.id,we]),h.useEffect(()=>{const k=()=>{const P=Date.now();document.hidden?$n.current&&(zl.current+=P-$n.current,$n.current=null):$n.current=P};return $n.current=Date.now(),document.addEventListener("visibilitychange",k),()=>{const P=Date.now();if($n.current&&(zl.current+=P-$n.current,$n.current=null),document.removeEventListener("visibilitychange",k),l&&r){const F=Math.floor(Math.max(0,zl.current)/6e4);if(F>=1)try{$m(e,l.id,F)}catch{}zl.current=0}}},[t,e,r,l]);const Gf=async()=>{if(r)try{const k=await tN(e);if(k.success){K(k.readingPaths||[]);const P=localStorage.getItem(`reading_mode_${e}`),F=localStorage.getItem(`reading_path_${e}`);if(P){if(P==="custom"){const Q=k.readingPaths.find(he=>he.path_type==="custom"&&he.is_mine);if(Q){const he=await fr(e,Q.id);if(he.success){ve(he.readingPath),ct("custom");return}}}else if(P==="author_recommended"){const Q=k.readingPaths.find(he=>he.path_type==="author_recommended"&&he.is_default);if(Q){const he=await fr(e,Q.id);if(he.success){ve(he.readingPath),ct("author_recommended");return}}}else if(P==="random"){ve(null),ct("random");return}else if(P==="ask"){ve(null),ct("ask");return}}const J=k.readingPaths.find(Q=>Q.path_type==="custom"&&Q.is_mine),le=k.readingPaths.find(Q=>Q.path_type==="author_recommended"&&Q.is_default);if(J){const Q=await fr(e,J.id);Q.success&&(ve(Q.readingPath),ct("custom"),localStorage.setItem(`reading_mode_${e}`,"custom"))}else if(le){const Q=await fr(e,le.id);Q.success&&(ve(Q.readingPath),ct("author_recommended"),localStorage.setItem(`reading_mode_${e}`,"author_recommended"))}else ve(null),ct("ask"),localStorage.setItem(`reading_mode_${e}`,"ask")}}catch(k){console.error(":",k)}},Ud=()=>p(k=>!k),Jf=()=>{const k=!g;$(k);const P=k?fn:hn,F=localStorage.getItem(P);if(F)try{q(JSON.parse(F))}catch{q(k?pn:Vt)}else q(k?pn:Vt)},Ss=k=>{q(P=>({...P,...k}))},Ir=async()=>{try{const k=await Qb(e);k&&k.success&&Y(k.bookmarks||[]);const P=await Gb();P&&P.success&&pe(P.bookmarks||[]);const F=await Jb(e);F&&F.success&&E(F.bookmarks||[])}catch{}},Zf=async()=>{if(!(!r||!l))if(L){const k=await Pm(l.id);k&&k.success&&(B(!1),await Ir())}else{const k=await yi(l.id,null,!0);k&&k.success&&(B(!0),await Ir())}},jl=async(k,P=null)=>{if(ct(k),P&&(k==="custom"||k==="author_recommended"))try{const F=await fr(e,P.id);F.success?ve(F.readingPath):ve(P)}catch(F){console.error(":",F),ve(P)}else ve(P);localStorage.setItem(`reading_mode_${e}`,k),P?localStorage.setItem(`reading_path_${e}`,P.id):localStorage.removeItem(`reading_path_${e}`)},ep=()=>{var F;if(!ue||!l)return null;const k=(F=ue.chapters)==null?void 0:F.findIndex(J=>J.chapter_id===l.id);if(k===-1||k===void 0)return null;const P=ue.chapters[k+1];return(P==null?void 0:P.chapter_id)||null},tp=async()=>{try{const k=await sN(e,l==null?void 0:l.id);k.success&&k.chapter?n(`/novel/${e}/read/${k.chapter.id}`):ae(ar)}catch(k){console.error(":",k),ae(ar)}},Bd=h.useMemo(()=>({fontFamily:T.fontFamily,fontSize:`${T.fontSize}px`,lineHeight:T.lineHeight,backgroundColor:T.backgroundColor,color:T.textColor}),[T]),np=g?"text-slate-100":"bg-white/95 text-slate-800 border-slate-200",Ol=g?"text-slate-100":"bg-slate-100 text-slate-700 hover:bg-slate-200",jo=g?"text-slate-100":"bg-white text-slate-800 border-slate-200",Al=g?"bg-black/60":"bg-black/40",rp=g?{backgroundColor:"rgba(14, 21, 22, 0.9)",borderColor:"#1a2223"}:{},Ul=g?{backgroundColor:"#1a2223"}:{},Oo=g?{backgroundColor:"#0e1516",borderColor:"#1a2223"}:{},Ao=h.useMemo(()=>d.findIndex(k=>k.id===(l==null?void 0:l.id)),[d,l]),en=h.useMemo(()=>!l||!l.parent_chapter_id?null:l.parent_chapter_id,[l]),ar=(()=>l?d.filter(P=>P.parent_chapter_id===l.id):[])(),Bl=h.useMemo(()=>{if(!(!l||!l.content))try{return l.content.replace(/\s/g,"").length}catch{return}},[l]),Mt=h.useRef(null),sp=h.useRef(!1),[Cs,Ft]=h.useState(!1),lp=h.useRef(!1),Fd=h.useRef([]),[or,jr]=h.useState(!1),[ir,pt]=h.useState(0),Fl=h.useRef(0),Dl=h.useRef(0),Or=h.useRef(!1),dn=h.useRef(!1),tn=h.useRef(null);h.useEffect(()=>{Ml(!0),$o([]),Po(0),lr(0),Mt.current=null,Fd.current=[],Ft(!1),jr(!1),pt(0)},[e,t]);const _s=()=>{const k=To.current;return k&&k.clientWidth?k.clientWidth:window.innerWidth||1},Dd=h.useMemo(()=>()=>{var le;if(!we||we.length===0)return 0;const k=we.filter(Q=>(Q==null?void 0:Q.type)==="content").length;if(k<=1)return 0;const J=(((le=we[me])==null?void 0:le.type)==="comments"?k-1:Math.min(k-1,we.slice(0,Math.min(me+1,we.length)).filter(Q=>(Q==null?void 0:Q.type)==="content").length-1))/(k-1)*100;return Math.max(0,Math.min(100,Math.round(J*100)/100))},[we,me]);return b&&v?s("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"})}):_||!l?o("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 px-4",children:[s("div",{className:"text-slate-600 mb-4",children:_||""}),s("button",{onClick:()=>n(-1),className:"px-4 py-2 bg-slate-700 text-white rounded-lg",children:""})]}):o("div",{className:"min-h-screen",style:{backgroundColor:T.backgroundColor},children:[s("div",{className:`fixed top-0 left-0 right-0 z-40 ${g?"text-slate-100":"bg-white text-slate-800 border-slate-200"} border-b`,style:g?{backgroundColor:"#0e1516",borderColor:"#1a2223"}:{},children:o("div",{className:"max-w-5xl mx-auto px-4",children:[o("div",{className:"h-8 sm:h-10 flex items-center justify-between gap-3",children:[s("div",{className:"min-w-0 flex-1",children:o("div",{className:"text-xs sm:text-sm font-medium truncate",title:`${(i==null?void 0:i.title)||""}  ${l.title}`,children:[(i==null?void 0:i.title)||"","  ",l.title]})}),o("div",{className:"hidden sm:flex items-center gap-3 flex-none text-xs",children:[l.author_username&&o("span",{className:`${g?"text-slate-300":"text-slate-600"}`,title:"",children:["",l.author_id?s(ee,{to:`/profile/${l.author_id}`,className:`${g?"text-slate-200":"text-slate-800"} hover:underline`,onClick:k=>k.stopPropagation(),children:l.author_username}):l.author_username,l.author_username!==(i==null?void 0:i.author_username)&&o("div",{className:"relative inline-block ml-1 group",children:[s(km,{className:"w-3 h-3 text-amber-500 cursor-help",stroke:1.8}),o("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-2 py-1 text-xs text-white bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:[" ",i==null?void 0:i.author_username]})]})]}),l.updated_at&&o("span",{className:`${g?"text-slate-400":"text-slate-500"}`,title:"",children:["",new Date(l.updated_at).toLocaleString()]}),o("span",{className:`${g?"text-slate-400":"text-slate-500"}`,title:"",children:["",Ao+1||"-"," / ",d.length||"-"]}),typeof Bl=="number"&&o("span",{className:`${g?"text-slate-400":"text-slate-500"}`,title:"",children:["",Bl]})]}),s("button",{className:`sm:hidden flex items-center px-2 py-0.5 text-[11px] rounded-md ${g?"text-slate-300":"text-slate-600"}`,style:g?{backgroundColor:"#1a2223"}:{backgroundColor:"rgba(148,163,184,0.15)"},onClick:()=>M(k=>!k),"aria-label":"",children:""})]}),Ce&&s("div",{className:"sm:hidden pb-2 -mt-1",children:o("div",{className:`grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] ${g?"text-slate-300":"text-slate-600"}`,children:[l.author_username&&o("div",{title:"",children:["",l.author_id?s(ee,{to:`/profile/${l.author_id}`,className:`${g?"text-slate-200":"text-slate-800"} hover:underline`,onClick:k=>k.stopPropagation(),children:l.author_username}):l.author_username,l.author_username!==(i==null?void 0:i.author_username)&&o("div",{className:"relative inline-block ml-1 group",children:[s(km,{className:"w-3 h-3 text-amber-500 cursor-help",stroke:1.8}),o("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-2 py-1 text-xs text-white bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:[" ",i==null?void 0:i.author_username]})]})]}),l.updated_at&&o("div",{className:"truncate col-span-2",title:"",children:["",new Date(l.updated_at).toLocaleString()]}),o("div",{className:"truncate",title:"",children:["",Ao+1||"-"," / ",d.length||"-"]}),typeof Bl=="number"&&o("div",{className:"truncate",title:"",children:["",Bl]})]})})]})}),$e==="scroll"?s("div",{ref:Ns,className:"min-h-screen overflow-y-auto pt-8 sm:pt-10",style:Bd,children:o("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[s("h1",{className:`text-2xl font-semibold mb-6 transition-opacity duration-200 ${Cs?"opacity-100":"opacity-0"}`,style:{color:T.textColor},children:l.title}),s("div",{className:`prose max-w-none pb-10 transition-opacity duration-200 ${Cs?"opacity-100":"opacity-0"} ${g?"prose-invert":""}`,style:{color:T.textColor},onClick:k=>{const{clientX:P,currentTarget:F}=k,{width:J,left:le}=F.getBoundingClientRect(),Q=P-le,he=J/3;Q>he&&Q<2*he&&Ud()},children:Mo(l.content).split(`
`).map((k,P)=>k.trim()?s("p",{className:"mb-5 first:mt-0 last:mb-0",style:{textIndent:"2em",lineHeight:T.lineHeight,fontSize:T.fontSize,fontFamily:T.fontFamily,wordWrap:"break-word",overflowWrap:"break-word"},children:k},P):null).filter(Boolean)}),o("div",{className:"mt-2 pt-10 border-t",style:{borderColor:g?"#374151":"#e5e7eb"},children:[o("div",{className:"flex items-center justify-between mb-4",children:[s("h3",{className:`text-lg font-medium ${g?"text-slate-200":"text-slate-800"}`,children:""}),o("div",{className:"flex items-center space-x-2",children:[o("button",{onClick:Ad,disabled:Ut,className:`flex items-center space-x-1.5 px-3 py-1.5 rounded-lg border text-sm transition-colors whitespace-nowrap ${Ue?"bg-red-50 border-red-200 text-red-700 hover:border-red-300":g?"border-slate-600 text-slate-300 hover:border-slate-500":"border-slate-200 text-slate-600 hover:border-slate-300"} ${Ut?"opacity-50 cursor-not-allowed":""}`,style:Ue?{}:g?{backgroundColor:"#191c1f"}:{backgroundColor:"white"},children:[Ue?s($c,{className:"w-4 h-4"}):s(Nn,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"font-medium",children:Ut?"":Ue?"":""}),o("span",{className:"text-xs opacity-75",children:["(",Rt,")"]})]}),o("button",{onClick:()=>Il("next"),className:`flex items-center space-x-1.5 px-3 py-1.5 rounded-lg border text-sm transition-colors whitespace-nowrap ${g?"border-slate-600 text-slate-300 hover:border-slate-500":"border-slate-200 text-slate-600 hover:border-slate-300"}`,style:g?{backgroundColor:"#191c1f"}:{backgroundColor:"white"},title:"",children:[s(Br,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]}),o("button",{onClick:()=>Ze(!0),className:`flex items-center space-x-1 px-2.5 py-1.5 rounded-lg border text-sm transition-colors ${g?"border-slate-600 text-slate-400 hover:border-slate-500 hover:text-slate-300":"border-slate-200 text-slate-500 hover:border-slate-300 hover:text-slate-600"}`,style:g?{backgroundColor:"#191c1f"}:{backgroundColor:"white"},children:[s(Em,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]})]})]}),s(Rm,{novelId:e,chapterId:t,isDark:g})]}),s("div",{className:"h-24"})]})}):s("div",{ref:Ns,className:"min-h-screen pt-8 sm:pt-10 overflow-hidden",style:Bd,children:s("div",{className:"h-full relative",children:Od?s("div",{className:"h-full flex items-center justify-center",children:o("div",{className:"text-center",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),s("div",{className:`text-sm ${g?"text-slate-400":"text-slate-600"}`,children:"..."})]})}):Ke>0?o("div",{ref:To,className:"h-full relative",style:{height:"calc(100vh - 2rem - 2.5rem)",touchAction:"pan-y"},onTouchStart:k=>{const P=k.touches[0];Fl.current=P.clientX,Dl.current=P.clientY,jr(!0),Or.current=!1},onTouchMove:k=>{var le;if(!or)return;const P=k.touches[0],F=P.clientX-Fl.current,J=P.clientY-Dl.current;if(Math.abs(F)>Math.abs(J)){k.cancelable&&k.preventDefault(),Or.current=!0;const Q=_s();let he=F;F<0&&me>=Ke-1&&((le=we[me])==null?void 0:le.type)!=="comments"&&(he=0),F>0&&me<=0&&!en&&(he=0),he=Math.max(-Q,Math.min(Q,he)),pt(he)}},onTouchEnd:()=>{var J;if(!or)return;const k=_s(),P=Math.max(40,k*.2),F=ir;jr(!1),F<-P&&(me<Ke-1||((J=we[me])==null?void 0:J.type)==="comments")?(tn.current="next",dn.current=!0,pt(-k),setTimeout(()=>{dn.current=!1,tn.current=null,pt(0),ks()},250)):F>P&&(me>0||me===0&&en)?(tn.current="prev",dn.current=!0,pt(k),setTimeout(()=>{dn.current=!1,tn.current=null,pt(0),ws()},250)):pt(0)},onMouseDown:k=>{Fl.current=k.clientX,Dl.current=k.clientY,jr(!0),Or.current=!1},onMouseMove:k=>{var J;if(!or)return;const P=k.clientX-Fl.current,F=k.clientY-Dl.current;if(Math.abs(P)>Math.abs(F)){Or.current=!0;const le=_s();let Q=P;P<0&&me>=Ke-1&&((J=we[me])==null?void 0:J.type)!=="comments"&&(Q=0),P>0&&me<=0&&!en&&(Q=0),Q=Math.max(-le,Math.min(le,Q)),pt(Q)}},onMouseUp:()=>{var J;if(!or)return;const k=_s(),P=Math.max(40,k*.2),F=ir;jr(!1),F<-P&&(me<Ke-1||((J=we[me])==null?void 0:J.type)==="comments")?(tn.current="next",dn.current=!0,pt(-k),setTimeout(()=>{dn.current=!1,tn.current=null,pt(0),ks()},250)):F>P&&(me>0||me===0&&en)?(tn.current="prev",dn.current=!0,pt(k),setTimeout(()=>{dn.current=!1,tn.current=null,pt(0),ws()},250)):pt(0)},onMouseLeave:()=>{or&&(jr(!1),pt(0))},onClick:k=>{var et,Dt;if(Or.current){Or.current=!1;return}const{clientX:P,currentTarget:F}=k,{width:J,left:le}=F.getBoundingClientRect(),Q=P-le,he=J/3,ke=J*2/3;Q<he?(me>0||me===0&&en)&&ws():Q>ke&&(me<Ke-1||((et=we[me])==null?void 0:et.type)==="comments")?ks():Q>=he&&Q<=ke&&((Dt=we[me])==null?void 0:Dt.type)!=="comments"&&Ud()},children:[s("div",{className:"absolute inset-0",children:we.map((k,P)=>{const F=_s(),J=P<me?-F:0;let le=J;or?(ir<0&&P===me&&(le=J+ir),ir>0&&P===me-1&&(le=-F+ir)):dn.current&&(tn.current==="next"&&P===me&&(le=-F),tn.current==="prev"&&P===me-1&&(le=0));let Q=1;P<me-1?Q=0:P===me-1?Q=ir>0?6:2:P===me?Q=5:P===me+1?Q=4:P>me+1&&(Q=1);const he=or?"none":"transform 250ms ease";return s("div",{className:"absolute inset-0",style:{transform:`translateX(${le}px)`,transition:he,zIndex:Q,backgroundColor:T.backgroundColor},children:s("div",{className:"max-w-3xl mx-auto px-4 py-4 h-full flex flex-col",children:(k==null?void 0:k.type)==="content"?o(wt,{children:[P===0&&s("h1",{className:`text-2xl font-semibold mb-6 flex-shrink-0 transition-opacity duration-200 ${Cs?"opacity-100":"opacity-0"}`,style:{color:T.textColor},children:l.title}),s("div",{className:`prose max-w-none flex-1 transition-opacity duration-200 ${Cs?"opacity-100":"opacity-0"} ${g?"prose-invert":""}`,style:{color:T.textColor},children:Mo((k==null?void 0:k.content)||"").split(`
`).map((ke,et)=>ke.trim()?s("p",{className:"mb-5 first:mt-0 last:mb-0",style:{textIndent:"2em",lineHeight:T.lineHeight,fontSize:T.fontSize,fontFamily:T.fontFamily,wordWrap:"break-word",overflowWrap:"break-word"},children:ke},et):null).filter(Boolean)})]}):o("div",{className:"h-full flex flex-col",children:[o("h1",{className:`text-2xl font-semibold mb-6 flex-shrink-0 transition-opacity duration-200 ${Cs?"opacity-100":"opacity-0"}`,style:{color:T.textColor},children:[l.title," - "]}),o("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[s("h3",{className:`text-lg font-medium ${g?"text-slate-200":"text-slate-800"}`,children:""}),o("div",{className:"flex items-center space-x-2",children:[o("button",{onClick:Ad,disabled:Ut,className:`flex items-center space-x-1.5 px-3 py-1.5 rounded-lg border text-sm transition-colors ${Ue?"bg-red-50 border-red-200 text-red-700 hover:border-red-300":g?"border-slate-600 text-slate-300 hover:border-slate-500":"border-slate-200 text-slate-600 hover:border-slate-300"} ${Ut?"opacity-50 cursor-not-allowed":""}`,style:Ue?{}:g?{backgroundColor:"#191c1f"}:{backgroundColor:"white"},children:[Ue?s($c,{className:"w-4 h-4"}):s(Nn,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"font-medium",children:Ut?"":Ue?"":""}),o("span",{className:"text-xs opacity-75",children:["(",Rt,")"]})]}),o("button",{onClick:()=>Ze(!0),className:`flex items-center space-x-1 px-2.5 py-1.5 rounded-lg border text-sm transition-colors ${g?"border-slate-600 text-slate-400 hover:border-slate-500 hover:text-slate-300":"border-slate-200 text-slate-500 hover:border-slate-300 hover:text-slate-600"}`,style:g?{backgroundColor:"#191c1f"}:{backgroundColor:"white"},children:[s(Em,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]})]})]}),s("div",{className:"flex-1 overflow-hidden",children:s(Rm,{novelId:e,chapterId:t,isDark:g})})]})})},P)})}),s("div",{className:"fixed bottom-4 right-4 z-10",children:o("div",{className:`text-xs ${g?"text-slate-300":"text-slate-600"}`,children:[me+1," / ",Ke]})})]}):s("div",{className:"h-full flex items-center justify-center",children:o("div",{className:`text-center ${g?"text-slate-400":"text-slate-600"} max-w-sm mx-auto px-4`,children:[s("div",{className:"text-lg mb-4",children:""}),s("div",{className:"text-sm mb-4",children:""}),s("div",{className:"text-xs mb-6 opacity-75",children:""}),o("div",{className:"space-y-2",children:[s("button",{onClick:()=>{Lo()},className:`w-full px-4 py-2 text-sm rounded-lg transition-colors ${g?"bg-slate-700 text-slate-200 hover:bg-slate-600":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:""}),s("button",{onClick:()=>Io("scroll"),className:"w-full px-4 py-2 text-sm rounded-lg transition-colors bg-blue-600 text-white hover:bg-blue-700",children:""})]})]})})})}),f&&s("div",{className:"fixed top-0 left-0 right-0 z-50",children:s("div",{className:"h-0.5 bg-blue-600 animate-pulse"})}),m&&s("div",{className:"fixed inset-x-0 bottom-0 z-50",children:s("div",{className:"max-w-5xl mx-auto px-4 pb-6",children:o("div",{className:`${np} backdrop-blur-sm border rounded-2xl shadow-xl overflow-hidden transition-all ${S?"h-14":""}`,style:rp,children:[o("div",{className:"flex items-center justify-between px-6 h-14",children:[o("div",{className:"flex items-center gap-2 md:gap-4",children:[o("button",{onClick:()=>R(k=>!k),className:`flex items-center gap-2 px-2 md:px-3 py-1.5 text-sm rounded-lg transition-colors ${g?"text-slate-300 hover:text-slate-100":"text-slate-600 hover:text-slate-800"}`,style:g?{backgroundColor:"rgba(26, 34, 35, 0.6)"}:{backgroundColor:"rgba(148, 163, 184, 0.1)"},title:S?"":"",children:[s(Ln,{className:`w-4 h-4 transition-transform ${S?"rotate-180":""}`,stroke:1.8}),s("span",{className:"hidden md:inline",children:S?"":""})]}),o("button",{onClick:()=>se(k=>!k),className:`flex items-center gap-2 px-2 md:px-3 py-1.5 text-sm rounded-lg transition-colors ${g?"text-slate-300 hover:text-slate-100":"text-slate-600 hover:text-slate-800"}`,style:g?{backgroundColor:"rgba(26, 34, 35, 0.6)"}:{backgroundColor:"rgba(148, 163, 184, 0.1)"},title:"",children:[s(Me,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"hidden md:inline",children:""})]})]}),o("div",{className:"flex items-center gap-1 md:gap-3",children:[o("button",{onClick:()=>n(`/novel/${e}`),className:`flex items-center gap-2 px-2 md:px-4 py-2 text-sm rounded-lg transition-colors ${Ol}`,style:Ul,title:"",children:[s(Ld,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"hidden md:inline",children:""})]}),o("button",{onClick:Jf,className:`flex items-center gap-2 px-2 md:px-4 py-2 text-sm rounded-lg transition-colors ${Ol}`,style:Ul,title:g?"":"",children:[g?s(xi,{className:"w-4 h-4",stroke:1.8}):s(pi,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"hidden md:inline",children:g?"":""})]})]})]}),!S&&s("div",{className:"px-4 md:px-6 py-3 md:py-5 border-t",style:g?{borderColor:"#1a2223"}:{borderColor:"#f1f5f9"},children:o("div",{className:"space-y-3 md:space-y-4",children:[o("div",{children:[o("button",{onClick:()=>Ne(k=>({...k,common:!k.common})),className:`flex items-center justify-between w-full text-left py-2 ${g?"text-slate-200":"text-slate-700"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(ls,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"text-sm font-medium",children:""})]}),s(Ln,{className:`w-4 h-4 transition-transform ${de.common?"rotate-180":""}`,stroke:1.8})]}),!de.common&&s("div",{className:"mt-2 pl-6",children:o("div",{className:"flex flex-wrap gap-2",children:[o("button",{onClick:Zf,className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${L?"bg-amber-500 text-white hover:bg-amber-600":Ol}`,style:L?{}:Ul,title:L?"":"",children:[L?s(Fb,{className:"w-4 h-4"}):s(ls,{className:"w-4 h-4",stroke:1.8}),s("span",{children:L?"":""})]}),o("button",{onClick:()=>V(!0),className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${Ol}`,style:Ul,children:[s(Me,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]})]})})]}),o("div",{children:[o("button",{onClick:()=>Ne(k=>({...k,font:!k.font})),className:`flex items-center justify-between w-full text-left py-2 ${g?"text-slate-200":"text-slate-700"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(Me,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"text-sm font-medium",children:""})]}),s(Ln,{className:`w-4 h-4 transition-transform ${de.font?"rotate-180":""}`,stroke:1.8})]}),!de.font&&s("div",{className:"space-y-3 mt-2 pl-6",children:o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o("div",{className:"space-y-2",children:[s("label",{className:`text-xs font-medium ${g?"text-slate-300":"text-slate-600"}`,children:""}),o("select",{value:T.fontFamily,onChange:k=>Ss({fontFamily:k.target.value}),className:`w-full px-2 py-1.5 text-sm border rounded-md transition-colors ${g?"text-slate-100":"bg-white border-slate-300 text-slate-700"}`,style:g?{backgroundColor:"#1a2223",borderColor:"#232c2e"}:{},children:[s("option",{value:Vt.fontFamily,children:""}),s("option",{value:"Georgia, serif",children:"Georgia"}),s("option",{value:'"Times New Roman", Times, serif',children:"Times"}),s("option",{value:'"Helvetica Neue", Helvetica, Arial, sans-serif',children:"Helvetica"})]})]}),o("div",{className:"space-y-2",children:[o("label",{className:`text-xs font-medium ${g?"text-slate-300":"text-slate-600"}`,children:["",T.fontSize,"px"]}),s("input",{type:"range",min:14,max:28,value:T.fontSize,onChange:k=>Ss({fontSize:Number(k.target.value)}),className:"w-full accent-blue-600"})]}),o("div",{className:"space-y-2",children:[o("label",{className:`text-xs font-medium ${g?"text-slate-300":"text-slate-600"}`,children:["",T.lineHeight]}),s("input",{type:"range",min:1.4,max:2.2,step:.1,value:T.lineHeight,onChange:k=>Ss({lineHeight:Number(k.target.value)}),className:"w-full accent-blue-600"})]})]})})]}),o("div",{children:[o("button",{onClick:()=>Ne(k=>({...k,color:!k.color})),className:`flex items-center justify-between w-full text-left py-2 ${g?"text-slate-200":"text-slate-700"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(ub,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"text-sm font-medium",children:""})]}),s(Ln,{className:`w-4 h-4 transition-transform ${de.color?"rotate-180":""}`,stroke:1.8})]}),!de.color&&o("div",{className:"space-y-4 mt-2 pl-6",children:[o("div",{children:[o("div",{className:`flex items-center gap-2 mb-3 ${g?"text-slate-200":"text-slate-700"}`,children:[g?s(pi,{className:"w-4 h-4",stroke:1.8}):s(xi,{className:"w-4 h-4",stroke:1.8}),o("span",{className:"text-xs font-semibold",children:[g?"":""," ()"]})]}),o("div",{className:"grid grid-cols-2 gap-3",children:[o("div",{className:"space-y-2",children:[s("label",{className:`text-xs font-medium ${g?"text-slate-300":"text-slate-600"}`,children:""}),o("div",{className:"flex items-center gap-2",children:[s("input",{type:"color",value:T.backgroundColor,onChange:k=>Ss({backgroundColor:k.target.value}),className:"w-8 h-6 rounded border border-slate-300"}),s("span",{className:`text-xs flex-1 truncate ${g?"text-slate-400":"text-slate-500"}`,children:T.backgroundColor})]})]}),o("div",{className:"space-y-2",children:[s("label",{className:`text-xs font-medium ${g?"text-slate-300":"text-slate-600"}`,children:""}),o("div",{className:"flex items-center gap-2",children:[s("input",{type:"color",value:T.textColor,onChange:k=>Ss({textColor:k.target.value}),className:"w-8 h-6 rounded border border-slate-300"}),s("span",{className:`text-xs flex-1 truncate ${g?"text-slate-400":"text-slate-500"}`,children:T.textColor})]})]})]})]}),o("div",{className:`pt-3 border-t ${g?"border-slate-700":"border-slate-200"}`,children:[o("div",{className:`flex items-center gap-2 mb-3 ${g?"text-slate-300":"text-slate-600"}`,children:[g?s(xi,{className:"w-4 h-4",stroke:1.8}):s(pi,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"text-xs font-semibold",children:g?"":""})]}),o("div",{className:"grid grid-cols-2 gap-3",children:[o("div",{className:"space-y-2",children:[s("label",{className:`text-xs font-medium ${g?"text-slate-400":"text-slate-500"}`,children:""}),o("div",{className:"flex items-center gap-2",children:[s("input",{type:"color",value:(()=>{const k=g?hn:fn,P=localStorage.getItem(k);if(P)try{return JSON.parse(P).backgroundColor}catch{}return g?Vt.backgroundColor:pn.backgroundColor})(),onChange:k=>{const P=g?hn:fn,F=localStorage.getItem(P);let J=g?Vt:pn;if(F)try{J=JSON.parse(F)}catch{}localStorage.setItem(P,JSON.stringify({...J,backgroundColor:k.target.value}))},className:"w-8 h-6 rounded border border-slate-300 opacity-75"}),s("span",{className:`text-xs flex-1 truncate ${g?"text-slate-500":"text-slate-400"}`,children:(()=>{const k=g?hn:fn,P=localStorage.getItem(k);if(P)try{return JSON.parse(P).backgroundColor}catch{}return g?Vt.backgroundColor:pn.backgroundColor})()})]})]}),o("div",{className:"space-y-2",children:[s("label",{className:`text-xs font-medium ${g?"text-slate-400":"text-slate-500"}`,children:""}),o("div",{className:"flex items-center gap-2",children:[s("input",{type:"color",value:(()=>{const k=g?hn:fn,P=localStorage.getItem(k);if(P)try{return JSON.parse(P).textColor}catch{}return g?Vt.textColor:pn.textColor})(),onChange:k=>{const P=g?hn:fn,F=localStorage.getItem(P);let J=g?Vt:pn;if(F)try{J=JSON.parse(F)}catch{}localStorage.setItem(P,JSON.stringify({...J,textColor:k.target.value}))},className:"w-8 h-6 rounded border border-slate-300 opacity-75"}),s("span",{className:`text-xs flex-1 truncate ${g?"text-slate-500":"text-slate-400"}`,children:(()=>{const k=g?hn:fn,P=localStorage.getItem(k);if(P)try{return JSON.parse(P).textColor}catch{}return g?Vt.textColor:pn.textColor})()})]})]})]})]})]})]}),i&&i.novel_type!=="traditional"&&o("div",{children:[o("button",{onClick:()=>Ne(k=>({...k,readingPath:!k.readingPath})),className:`flex items-center justify-between w-full text-left py-2 ${g?"text-slate-200":"text-slate-700"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(If,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"text-sm font-medium",children:""}),s("span",{className:`text-xs px-2 py-0.5 rounded-full ${g?"bg-slate-700 text-slate-300":"bg-slate-100 text-slate-600"}`,children:be==="ask"?"":be==="custom"?"":be==="author_recommended"?"":""})]}),s(Ln,{className:`w-4 h-4 transition-transform ${de.readingPath?"rotate-180":""}`,stroke:1.8})]}),!de.readingPath&&o("div",{className:"space-y-2 mt-2 pl-6",children:[o("div",{className:"grid grid-cols-1 gap-2",children:[o("button",{onClick:()=>jl("ask",null),className:`flex items-center justify-between w-full p-2 text-sm rounded-lg transition-colors ${be==="ask"?"bg-blue-600 text-white":g?"bg-slate-800 text-slate-300 hover:bg-slate-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(Cm,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]}),s("span",{className:"text-xs opacity-75",children:""})]}),r&&o("button",{onClick:async()=>{const k=H.find(P=>P.path_type==="custom"&&P.is_mine);k?await jl("custom",k):n(`/novel/${e}/custom-reading-path`)},className:`flex items-center justify-between w-full p-2 text-sm rounded-lg transition-colors ${be==="custom"?"bg-blue-600 text-white":g?"bg-slate-800 text-slate-300 hover:bg-slate-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(Za,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]}),s("span",{className:"text-xs opacity-75",children:H.find(k=>k.path_type==="custom"&&k.is_mine)?"":""})]}),H.find(k=>k.path_type==="author_recommended")&&o("button",{onClick:async()=>{const k=H.find(P=>P.path_type==="author_recommended");await jl("author_recommended",k)},className:`flex items-center justify-between w-full p-2 text-sm rounded-lg transition-colors ${be==="author_recommended"?"bg-blue-600 text-white":g?"bg-slate-800 text-slate-300 hover:bg-slate-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(bl,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]}),s("span",{className:"text-xs opacity-75",children:""})]}),o("button",{onClick:()=>jl("random",null),className:`flex items-center justify-between w-full p-2 text-sm rounded-lg transition-colors ${be==="random"?"bg-blue-600 text-white":g?"bg-slate-800 text-slate-300 hover:bg-slate-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(Nn,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]}),s("span",{className:"text-xs opacity-75",children:""})]})]}),ue&&o("div",{className:`mt-3 p-2 rounded-lg text-xs ${g?"bg-slate-800 text-slate-400":"bg-slate-100 text-slate-600"}`,children:[s("div",{className:"font-medium",children:ue.name}),ue.description&&s("div",{className:"mt-1 opacity-75",children:ue.description}),o("div",{className:"mt-1 opacity-60",children:[ue.total_chapters,"   ",(ue.total_words||0).toLocaleString()," "]})]})]})]}),o("div",{children:[o("button",{onClick:()=>Ne(k=>({...k,pagination:!k.pagination})),className:`flex items-center justify-between w-full text-left py-2 ${g?"text-slate-200":"text-slate-700"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(Me,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"text-sm font-medium",children:""}),s("span",{className:`text-xs px-2 py-0.5 rounded-full ${g?"bg-slate-700 text-slate-300":"bg-slate-100 text-slate-600"}`,children:$e==="scroll"?"":""})]}),s(Ln,{className:`w-4 h-4 transition-transform ${de.pagination?"rotate-180":""}`,stroke:1.8})]}),!de.pagination&&o("div",{className:"space-y-2 mt-2 pl-6",children:[o("div",{className:"grid grid-cols-1 gap-2",children:[o("button",{onClick:()=>Io("scroll"),className:`flex items-center justify-between w-full p-2 text-sm rounded-lg transition-colors ${$e==="scroll"?"bg-blue-600 text-white":g?"bg-slate-800 text-slate-300 hover:bg-slate-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(Rf,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]}),s("span",{className:"text-xs opacity-75",children:""})]}),o("button",{onClick:()=>Io("horizontal"),className:`flex items-center justify-between w-full p-2 text-sm rounded-lg transition-colors ${$e==="horizontal"?"bg-blue-600 text-white":g?"bg-slate-800 text-slate-300 hover:bg-slate-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(Br,{className:"w-4 h-4",stroke:1.8}),s("span",{children:""})]}),s("span",{className:"text-xs opacity-75",children:""})]})]}),$e==="horizontal"&&s("div",{className:`mt-3 p-2 rounded-lg text-xs ${g?"bg-slate-800 text-slate-400":"bg-slate-100 text-slate-600"}`,children:Od?o("div",{className:"flex items-center gap-2",children:[s("div",{className:"w-3 h-3 border border-gray-300 border-t-blue-600 rounded-full animate-spin"}),s("span",{children:"..."})]}):Ke>0?o("div",{children:[o("div",{className:"font-medium",children:[" ",me+1,"  /  ",Ke," "]}),s("div",{className:"mt-1 opacity-75",children:((Hd=we[me])==null?void 0:Hd.type)==="comments"?"":""})]}):s("div",{className:"opacity-75",children:"..."})})]})]}),o("div",{children:[o("button",{onClick:()=>Ne(k=>({...k,navigation:!k.navigation})),className:`flex items-center justify-between w-full text-left py-2 ${g?"text-slate-200":"text-slate-700"}`,children:[o("div",{className:"flex items-center gap-2",children:[s(cb,{className:"w-4 h-4",stroke:1.8}),s("span",{className:"text-sm font-medium",children:""}),o("span",{className:`text-xs px-2 py-0.5 rounded-full ${g?"bg-slate-700 text-slate-300":"bg-slate-100 text-slate-600"}`,children:[Ao+1,"/",d.length]})]}),s(Ln,{className:`w-4 h-4 transition-transform ${de.navigation?"rotate-180":""}`,stroke:1.8})]}),!de.navigation&&o("div",{className:"space-y-2 mt-3 pl-6",children:[$e==="horizontal"&&Ke>0&&o("div",{className:"flex items-center justify-center gap-2 mb-3 select-none",children:[s("button",{onClick:ws,disabled:me===0,className:`px-2 py-1 rounded-lg transition-colors ${me===0?"opacity-50 cursor-not-allowed":g?"text-slate-300 hover:text-slate-100 hover:bg-slate-800":"text-slate-600 hover:text-slate-800 hover:bg-slate-100"}`,title:"",children:s(_c,{className:"w-3 h-3",stroke:2})}),o("span",{className:`text-sm px-3 py-1 rounded-md ${g?"bg-slate-700 text-slate-300":"bg-slate-100 text-slate-600"}`,children:[me+1," / ",Ke]}),s("button",{onClick:ks,disabled:me===Ke-1,className:`px-2 py-1 rounded-lg transition-colors ${me===Ke-1?"opacity-50 cursor-not-allowed":g?"text-slate-300 hover:text-slate-100 hover:bg-slate-800":"text-slate-600 hover:text-slate-800 hover:bg-slate-100"}`,title:"",children:s(Br,{className:"w-3 h-3",stroke:2})})]}),o("div",{className:"flex items-center justify-center gap-3 select-none",children:[s("button",{onClick:()=>Il("prev"),className:`px-2 py-1 rounded-lg transition-colors ${g?"text-slate-300 hover:text-slate-100 hover:bg-slate-800":"text-slate-600 hover:text-slate-800 hover:bg-slate-100"}`,title:"",children:s(_c,{className:"w-3 h-3",stroke:2})}),s("button",{onClick:()=>Il("next"),className:`px-2 py-1 rounded-lg transition-colors ${g?"text-slate-300 hover:text-slate-100 hover:bg-slate-800":"text-slate-600 hover:text-slate-800 hover:bg-slate-100"}`,title:"",children:s(Br,{className:"w-3 h-3",stroke:2})})]})]})]})]})})]})})}),Z&&o("div",{className:"fixed inset-0 z-50",children:[s("div",{className:`absolute inset-0 ${Al}`,onClick:()=>se(!1)}),o("div",{className:`absolute right-0 top-0 bottom-0 w-full max-w-xl ${jo} shadow-2xl border-l flex flex-col`,style:Oo,children:[o("div",{className:"px-6 py-4 border-b flex items-center justify-between",style:g?{borderColor:"#1a2223"}:{borderColor:"#e2e8f0"},children:[o("div",{className:"flex items-center gap-4",children:[s("div",{className:"flex items-center gap-2",children:s("h3",{className:`font-semibold text-lg ${g?"text-slate-100":"text-slate-800"}`,children:""})}),o("div",{className:"flex rounded-lg overflow-hidden border-2",style:g?{borderColor:"#1a2223"}:{borderColor:"#e2e8f0"},children:[s("button",{onClick:()=>X("list"),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors ${G==="list"?"bg-blue-600 text-white":g?"text-slate-300 hover:text-slate-100":"text-slate-600 hover:text-slate-800"}`,style:G!=="list"&&g?{backgroundColor:"#1a2223"}:{},children:""}),s("button",{onClick:()=>X("view"),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors ${G==="view"?"bg-blue-600 text-white":g?"text-slate-300 hover:text-slate-100":"text-slate-600 hover:text-slate-800"}`,style:G!=="view"&&g?{backgroundColor:"#1a2223"}:{},children:""})]})]}),s("button",{onClick:()=>se(!1),className:`flex items-center justify-center w-8 h-8 rounded-lg transition-colors ${g?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-slate-500 hover:text-slate-800 hover:bg-slate-100"}`,children:s(Et,{className:"w-5 h-5",stroke:1.8})})]}),s("div",{className:"flex-1 overflow-auto p-6",children:G==="list"?s("div",{className:"space-y-3",children:d.map((k,P)=>s("button",{onClick:()=>{se(!1),n(`/novel/${e}/read/${k.id}`)},className:`w-full text-left px-4 py-3 rounded-xl border-2 transition-all duration-200 group ${k.id===l.id?g?"border-blue-500 shadow-lg":"bg-blue-50 border-blue-300 shadow-md":g?"border-transparent hover:border-slate-600 hover:shadow-md":"bg-white border-slate-200 hover:border-slate-300 hover:shadow-md"}`,style:k.id===l.id&&g?{backgroundColor:"rgba(37, 99, 235, 0.15)"}:k.id!==l.id&&g?{backgroundColor:"#1a2223"}:{},children:o("div",{className:"flex items-center justify-between",children:[o("div",{className:"flex-1 min-w-0",children:[o("div",{className:"flex items-center gap-2 mb-1",children:[s("span",{className:`inline-flex items-center justify-center w-6 h-6 text-xs font-medium rounded-full ${k.id===l.id?"bg-blue-600 text-white":g?"bg-slate-700 text-slate-300":"bg-slate-100 text-slate-600"}`,children:P+1}),s("h4",{className:`font-medium text-sm truncate ${k.id===l.id?g?"text-blue-300":"text-blue-800":g?"text-slate-200":"text-slate-800"}`,children:k.title})]}),k.author_username&&o("p",{className:`text-xs truncate ${g?"text-slate-400":"text-slate-500"}`,children:["",k.author_id?s(ee,{to:`/profile/${k.author_id}`,className:`${g?"text-slate-300":"text-slate-700"} hover:underline`,onClick:F=>F.stopPropagation(),children:k.author_username}):k.author_username]})]}),k.id===l.id&&s("div",{className:"flex-shrink-0 ml-2",children:o("div",{className:"flex items-center gap-1",children:[s("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),s("span",{className:`text-xs font-medium ${g?"text-blue-300":"text-blue-700"}`,children:""})]})})]})},k.id))}):s("div",{className:"h-[70vh]",children:s(Id,{novel:i||{id:e},chapters:d,linkMode:"read",currentChapterId:l.id,isDark:g,viewCentered:A,setViewCentered:te})})})]})]}),U&&o("div",{className:"fixed inset-0 z-50",children:[s("div",{className:`absolute inset-0 ${Al}`,onClick:()=>V(!1)}),o("div",{className:`absolute right-0 top-0 bottom-0 w-full max-w-md ${jo} shadow-2xl border-l flex flex-col`,style:Oo,children:[o("div",{className:"px-6 py-4 border-b flex items-center justify-between",style:g?{borderColor:"#1a2223"}:{borderColor:"#e2e8f0"},children:[o("div",{className:"flex items-center gap-2",children:[s(ls,{className:"w-5 h-5"}),s("h3",{className:`font-semibold text-lg ${g?"text-slate-100":"text-slate-800"}`,children:""})]}),s("button",{onClick:()=>V(!1),className:`flex items-center justify-center w-8 h-8 rounded-lg transition-colors ${g?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-slate-500 hover:text-slate-800 hover:bg-slate-100"}`,children:s(Et,{className:"w-5 h-5",stroke:1.8})})]}),o("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[o("div",{children:[s("div",{className:"text-sm font-medium mb-2",children:""}),s(O,{items:W,emptyText:"",onJump:k=>{V(!1),n(`/novel/${e}/read/${k}`)}})]}),o("div",{children:[s("div",{className:"text-sm font-medium mb-2",children:""}),s(O,{items:oe,emptyText:"",onJump:(k,P)=>{V(!1),n(`/novel/${P}/read/${k}`)}})]}),o("div",{children:[s("div",{className:"text-sm font-medium mb-2",children:""}),s(O,{items:j,emptyText:"",onJump:(k,P)=>{V(!1),n(`/novel/${P}/read/${k}`)}})]}),s("div",{children:s("button",{onClick:async()=>{if(!l)return;const k=await yi(l.id,null,!1);k&&k.success&&await Ir()},className:"w-full px-3 py-2 rounded bg-blue-600 hover:bg-blue-500 text-white",children:""})})]})]})]}),w.open&&o("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s("div",{className:`${Al} absolute inset-0`,onClick:()=>I({open:!1,title:"",message:"",onConfirm:null})}),o("div",{className:`relative w-full max-w-sm mx-auto rounded-2xl shadow-2xl border ${jo}`,style:Oo,children:[s("div",{className:"p-5 border-b",style:g?{borderColor:"#1a2223"}:{borderColor:"#e2e8f0"},children:s("h3",{className:`text-lg font-semibold ${g?"text-slate-100":"text-slate-800"}`,children:w.title||""})}),s("div",{className:"p-5 text-sm",children:s("p",{className:`${g?"text-slate-300":"text-slate-700"}`,children:w.message||""})}),o("div",{className:"p-4 flex items-center justify-end gap-2 border-t",style:g?{borderColor:"#1a2223"}:{borderColor:"#e2e8f0"},children:[s("button",{onClick:()=>I({open:!1,title:"",message:"",onConfirm:null}),className:`px-3 py-1.5 rounded ${g?"bg-slate-800 text-slate-200 hover:bg-slate-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:""}),s("button",{onClick:async()=>{try{typeof w.onConfirm=="function"&&await w.onConfirm()}finally{I({open:!1,title:"",message:"",onConfirm:null})}},className:"px-3 py-1.5 rounded bg-red-600 hover:bg-red-700 text-white",children:""})]})]})]}),re&&re.length>1&&o("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s("div",{className:`absolute inset-0 ${Al}`,onClick:()=>ae(null)}),o("div",{className:`relative ${g?"text-slate-100":"bg-white text-slate-800 border-slate-200"} rounded-2xl shadow-2xl w-full max-w-md mx-auto border`,style:g?{backgroundColor:"#0e1516",borderColor:"#1a2223"}:{},children:[o("div",{className:"flex items-center justify-between p-6 border-b",style:g?{borderColor:"#1a2223"}:{borderColor:"#e2e8f0"},children:[o("div",{className:"flex items-center gap-3",children:[s("div",{className:"flex items-center justify-center w-8 h-8 bg-amber-500 text-white rounded-lg",children:s(Cm,{className:"w-5 h-5",stroke:1.8})}),o("div",{children:[s("h4",{className:`text-lg font-semibold ${g?"text-slate-100":"text-slate-800"}`,children:""}),s("p",{className:`text-sm ${g?"text-slate-400":"text-slate-600"}`,children:""})]})]}),s("button",{onClick:()=>ae(null),className:`flex items-center justify-center w-8 h-8 rounded-lg transition-colors ${g?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-slate-500 hover:text-slate-800 hover:bg-slate-100"}`,children:s(Et,{className:"w-5 h-5",stroke:1.8})})]}),s("div",{className:"p-6 space-y-3 max-h-96 overflow-y-auto",children:re.map((k,P)=>s("button",{onClick:()=>{ae(null),n(`/novel/${e}/read/${k.id}`)},className:`w-full text-left px-4 py-3 rounded-xl border-2 transition-all duration-200 ${g?"border-transparent hover:border-slate-600 hover:shadow-md":"bg-white hover:bg-slate-50 border-slate-200 hover:border-slate-300 hover:shadow-md"}`,style:g?{backgroundColor:"#1a2223"}:{},children:o("div",{className:"flex items-center gap-3",children:[s("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg font-medium text-sm ${g?"bg-slate-700 text-slate-300":"bg-slate-100 text-slate-600"}`,children:P+1}),o("div",{className:"flex-1 min-w-0",children:[s("div",{className:`font-medium text-sm truncate ${g?"text-slate-200":"text-slate-800"}`,children:k.title}),k.author_username&&o("div",{className:`text-xs truncate mt-1 ${g?"text-slate-400":"text-slate-500"}`,children:["",k.author_id?s(ee,{to:`/profile/${k.author_id}`,className:`${g?"text-slate-300":"text-slate-700"} hover:underline`,onClick:F=>F.stopPropagation(),children:k.author_username}):k.author_username]})]}),s(Br,{className:"w-5 h-5 flex-shrink-0 text-slate-400",stroke:1.8})]})},k.id))})]})]}),zr&&s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",style:g?{backgroundColor:"#0e1516",borderColor:"#1a2223"}:{},children:[s("h3",{className:`text-lg font-semibold mb-4 ${g?"text-slate-100":"text-gray-900"}`,children:""}),o("form",{onSubmit:k=>{k.preventDefault();const P=new FormData(k.target),F=P.get("reason"),J=P.get("description");qf(F,J)},children:[o("div",{className:"mb-4",children:[s("label",{className:`block text-sm font-medium mb-2 ${g?"text-slate-300":"text-gray-700"}`,children:" *"}),o("select",{name:"reason",className:`w-full p-2 border rounded-md ${g?"text-slate-100 border-slate-600":"border-gray-300"}`,style:g?{backgroundColor:"#1a2223",borderColor:"#374151"}:{},required:!0,children:[s("option",{value:"",children:""}),s("option",{value:"",children:""}),s("option",{value:"",children:""}),s("option",{value:"",children:""}),s("option",{value:"",children:""}),s("option",{value:"",children:""}),s("option",{value:"",children:""})]})]}),o("div",{className:"mb-4",children:[s("label",{className:`block text-sm font-medium mb-2 ${g?"text-slate-300":"text-gray-700"}`,children:""}),s("textarea",{name:"description",className:`w-full p-2 border rounded-md ${g?"text-slate-100 border-slate-600":"border-gray-300"}`,style:g?{backgroundColor:"#1a2223",borderColor:"#374151"}:{},rows:"3",placeholder:"...",maxLength:"500"})]}),o("div",{className:"flex space-x-3",children:[s("button",{type:"button",onClick:()=>Ze(!1),className:`flex-1 px-4 py-2 border rounded-md ${g?"border-slate-600 text-slate-300 hover:bg-slate-700":"border-gray-300 hover:bg-gray-50"}`,style:g?{backgroundColor:"#1a2223"}:{},children:""}),s("button",{type:"submit",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:""})]})]})]})})]})},zN=()=>{const{id:e}=Rr(),t=ot(),{user:n,isAuthenticated:r}=it(),[l,a]=h.useState(null),[i,c]=h.useState([]),[d,u]=h.useState(null),[v,y]=h.useState(!0),[b,C]=h.useState(""),[f,N]=h.useState(!1),[_,x]=h.useState({name:"",description:"",selectedPath:[]}),[m,p]=h.useState({show:!1,success:!1,message:""}),[S,R]=h.useState(null);h.useEffect(()=>{e&&g()},[e]);const g=async()=>{try{y(!0),C("");const[U,V,G]=await Promise.all([bs(e),Df(e),nN(e)]);if(!U.success){C(U.message||"");return}if(!V.success){C(V.message||"");return}if(a(U.novel),c(V.chapterTree||[]),G.success&&G.customPath){u(G.customPath);const X=await fr(e,G.customPath.id);X.success&&x({name:X.readingPath.name||"",description:X.readingPath.description||"",selectedPath:X.readingPath.chapters?X.readingPath.chapters.map(A=>({id:A.chapter_id,title:A.chapter_title,reason:A.branch_choice_reason||""})):[]})}}catch{C("")}finally{y(!1)}},$=U=>{const{name:V,value:G}=U.target;x(X=>({...X,[V]:G}))},T=(U,V="")=>{x(G=>{if(G.selectedPath.length===0)return{...G,selectedPath:[{id:U.id,title:U.title,reason:V||""}]};{const X=G.selectedPath[G.selectedPath.length-1],A=B(i,X.id);return A&&A.children.some(te=>te.id===U.id)?{...G,selectedPath:[...G.selectedPath,{id:U.id,title:U.title,reason:V||""}]}:(alert(""),G)}}),R(null)},q=()=>{x(U=>({...U,selectedPath:U.selectedPath.slice(0,-1)}))},L=(U,V)=>{x(G=>({...G,selectedPath:G.selectedPath.map(X=>X.id===U?{...X,reason:V}:X)}))},B=(U,V)=>{for(const G of U){if(G.id===V)return G;if(G.children&&G.children.length>0){const X=B(G.children,V);if(X)return X}}return null},Z=()=>{if(_.selectedPath.length===0)return i;{const U=_.selectedPath[_.selectedPath.length-1],V=B(i,U.id);return V?V.children:[]}},se=async()=>{try{if(N(!0),_.selectedPath.length===0){p({show:!0,success:!1,message:""}),N(!1);return}const U={name:_.name,description:_.description,pathType:"custom",chapters:_.selectedPath.map(G=>({chapterId:G.id,reason:G.reason}))};let V;d?V=await Ff(e,d.id,U):V=await Bf(e,U),V.success?(p({show:!0,success:!0,message:""}),await g()):p({show:!0,success:!1,message:V.message||""})}catch{p({show:!0,success:!1,message:""})}finally{N(!1)}setTimeout(()=>{p(U=>({...U,show:!1}))},3e3)};return r?v?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-700"}),s("p",{className:"mt-2 text-slate-600",children:"..."})]})})]}):b||!l?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:s(_n,{className:"w-12 h-12 text-red-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:b||""}),s("button",{onClick:()=>t(`/novel/${e}`),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:""})]})})]}):l.novel_type==="traditional"?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center",children:s(vl,{className:"w-12 h-12 text-slate-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:""}),s("button",{onClick:()=>t(`/novel/${e}`),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:""})]})})]}):o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),o("div",{className:"container mx-auto px-4 py-8",children:[s("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 mb-8",children:s("div",{className:"p-6 border-b border-slate-200",children:o("div",{className:"flex items-center justify-between",children:[o("div",{children:[o("nav",{className:"flex items-center space-x-2 text-sm text-slate-500 mb-2",children:[s(ee,{to:"/",className:"hover:text-slate-700",children:""}),s("span",{children:"/"}),s(ee,{to:`/novel/${e}`,className:"hover:text-slate-700",children:l.title}),s("span",{children:"/"}),s("span",{className:"text-slate-700",children:""})]}),s("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:d?"":""}),o("p",{className:"text-slate-600",children:["",l.title,""]})]}),o(ee,{to:`/novel/${e}`,className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:[s(Ld,{className:"w-5 h-5",stroke:1.8}),s("span",{children:""})]})]})})}),m.show&&s("div",{className:`mb-6 p-4 rounded-lg border ${m.success?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:o("div",{className:"flex items-center space-x-2",children:[m.success?s(hs,{className:"w-5 h-5",stroke:1.8}):s(Et,{className:"w-5 h-5",stroke:1.8}),s("span",{children:m.message})]})}),s("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:o("div",{className:"flex items-start space-x-3",children:[s(Me,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",stroke:1.8}),o("div",{children:[s("h3",{className:"text-blue-800 font-medium mb-1",children:""}),s("p",{className:"text-blue-700 text-sm",children:" "})]})]})}),s("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200",children:o("div",{className:"p-6",children:[o("div",{className:"space-y-4 mb-8",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("input",{type:"text",name:"name",value:_.name,onChange:$,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s("textarea",{name:"description",value:_.description,onChange:$,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]})]}),o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o("div",{children:[o("h3",{className:"text-lg font-medium text-slate-700 mb-4",children:[" (",_.selectedPath.length," )"]}),s("div",{className:"border border-slate-200 rounded-lg max-h-96 overflow-y-auto",children:_.selectedPath.length>0?s("div",{className:"space-y-2 p-2",children:_.selectedPath.map((U,V)=>o("div",{className:"border border-slate-200 rounded-lg p-3 bg-white",children:[o("div",{className:"flex items-center justify-between mb-2",children:[o("div",{className:"flex items-center space-x-2",children:[s("span",{className:"w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-medium",children:V+1}),s("span",{className:"font-medium text-slate-800",children:U.title})]}),V===_.selectedPath.length-1&&s("button",{onClick:q,className:"p-1 text-red-400 hover:text-red-600",title:"",children:s(Et,{className:"w-4 h-4",stroke:1.8})})]}),s("input",{type:"text",value:U.reason,onChange:G=>L(U.id,G.target.value),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:""})]},U.id))}):s("div",{className:"text-center py-8 text-slate-500",children:""})})]}),o("div",{children:[s("h3",{className:"text-lg font-medium text-slate-700 mb-4",children:_.selectedPath.length===0?"":""}),s("div",{className:"border border-slate-200 rounded-lg max-h-96 overflow-y-auto",children:(()=>{const U=Z();return U.length>0?s("div",{className:"space-y-1 p-2",children:U.map(V=>o("div",{className:"flex items-center justify-between p-3 hover:bg-slate-50 rounded-lg border border-transparent hover:border-blue-200",children:[o("div",{className:"flex-1",children:[s("p",{className:"font-medium text-slate-800",children:V.title}),o("p",{className:"text-sm text-slate-500",children:[V.word_count||0,"   ",V.author_username||""]}),V.children&&V.children.length>0&&o("p",{className:"text-xs text-blue-600 mt-1",children:["+",V.children.length," "]})]}),s("button",{onClick:()=>T(V),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:""})]},V.id))}):s("div",{className:"text-center py-8 text-slate-500",children:_.selectedPath.length===0?"":""})})()})]})]}),o("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-slate-200",children:[s(ee,{to:`/novel/${e}`,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:""}),s("button",{onClick:se,disabled:f||_.selectedPath.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:f?"...":""})]})]})})]}),s(mt,{})]}):o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-8",children:o("div",{className:"text-center py-12",children:[s("div",{className:"w-24 h-24 mx-auto mb-4 bg-amber-100 rounded-full flex items-center justify-center",children:s(w1,{className:"w-12 h-12 text-amber-400",stroke:1.8})}),s("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-4",children:""}),s(ee,{to:"/login",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:""})]})})]})},Mr="/api/community",LN=async()=>{try{return(await ce.get(`${Mr}/home`)).data}catch(e){return e.response?e.response.data:{success:!1,message:""}}},IN=async({title:e,content:t,tags:n=[]})=>{try{const r=localStorage.getItem("token");return(await ce.post(`${Mr}/articles`,{title:e,content:t,tags:n},{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},jN=async e=>{try{const t=localStorage.getItem("token"),n=t?{Authorization:`Bearer ${t}`}:{};return(await ce.get(`${Mr}/articles/${e}`,{headers:n})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},ON=async(e,t=1,n=20)=>{try{const r=localStorage.getItem("token"),l=r?{Authorization:`Bearer ${r}`}:{};return(await ce.get(`${Mr}/articles/${e}/comments?page=${t}&limit=${n}`,{headers:l})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},Ni=async(e,t,n=null)=>{try{const r=localStorage.getItem("token");return(await ce.post(`${Mr}/articles/${e}/comments`,{content:t,parentCommentId:n},{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},AN=async e=>{try{const t=localStorage.getItem("token");return(await ce.post(`${Mr}/articles/${e}/like`,{},{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},UN=async e=>{try{const t=localStorage.getItem("token");return(await ce.post(`${Mr}/articles/${e}/favorite`,{},{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},BN=async(e,t="other",n="")=>{try{const r=localStorage.getItem("token");return(await ce.post(`/api/community/articles/${e}/report`,{reason:t,description:n},{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},FN=async e=>{try{const t=localStorage.getItem("token");return(await ce.post(`/api/community/comments/${e}/like`,{},{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){return t.response?t.response.data:{success:!1,message:""}}},DN=async(e,t="other",n="")=>{try{const r=localStorage.getItem("token");return(await ce.post(`/api/community/comments/${e}/report`,{reason:t,description:n},{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){return r.response?r.response.data:{success:!1,message:""}}},aa=({title:e,items:t,icon:n,gradient:r})=>!t||t.length===0?o("div",{className:`relative overflow-hidden bg-gradient-to-br ${r} rounded-xl border border-slate-200 shadow-sm`,children:[s("div",{className:"absolute top-0 right-0 w-24 h-24 md:w-32 md:h-32 bg-white/10 rounded-full -translate-y-12 md:-translate-y-16 translate-x-12 md:translate-x-16"}),o("div",{className:"relative p-4 md:p-6",children:[o("div",{className:"flex items-center gap-2 md:gap-3 mb-3 md:mb-4",children:[s("div",{className:"p-1.5 md:p-2 bg-white/60 backdrop-blur-sm rounded-lg",children:n}),s("h3",{className:"text-base md:text-lg font-bold text-slate-800",children:e})]}),s("div",{className:"text-center py-6 md:py-8",children:s("div",{className:"text-slate-600 text-xs md:text-sm",children:""})})]})]}):o("div",{className:`relative overflow-hidden bg-gradient-to-br ${r} rounded-xl border border-slate-200 shadow-sm hover:shadow-lg transition-all duration-300`,children:[s("div",{className:"absolute top-0 right-0 w-24 h-24 md:w-32 md:h-32 bg-white/10 rounded-full -translate-y-12 md:-translate-y-16 translate-x-12 md:translate-x-16"}),s("div",{className:"absolute bottom-0 left-0 w-20 h-20 md:w-24 md:h-24 bg-white/5 rounded-full translate-y-8 md:translate-y-12 -translate-x-8 md:-translate-x-12"}),o("div",{className:"relative p-4 md:p-6",children:[o("div",{className:"flex items-center gap-2 md:gap-3 mb-4 md:mb-6",children:[s("div",{className:"p-1.5 md:p-2 bg-white/60 backdrop-blur-sm rounded-lg",children:n}),s("h3",{className:"text-base md:text-lg font-bold text-slate-800",children:e}),s("div",{className:"ml-auto",children:o("div",{className:"text-slate-600 text-xs bg-white/60 px-2 py-1 rounded-full",children:[t.length," "]})})]}),s("div",{className:"space-y-3 md:space-y-4",children:t.map((l,a)=>s(ee,{to:`/community/articles/${l.id}`,className:"block group",children:s("div",{className:"bg-white/95 backdrop-blur-sm rounded-lg p-3 md:p-4 hover:bg-white hover:shadow-md transition-all duration-200 border border-white/20",children:o("div",{className:"flex gap-2 md:gap-4",children:[o("div",{className:"flex-shrink-0 flex items-start gap-1.5 md:gap-3",children:[s("div",{className:"w-5 h-5 md:w-6 md:h-6 bg-gradient-to-br from-slate-500 to-slate-600 text-white text-xs font-bold rounded-full flex items-center justify-center",children:a+1}),l.cover_image_url&&o("div",{className:"relative",children:[s("img",{src:l.cover_image_url,alt:l.title,className:"w-16 h-11 md:w-28 md:h-20 object-cover rounded-md border border-slate-200 shadow-sm"}),s("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-md"})]})]}),o("div",{className:"flex-1 min-w-0",children:[o("div",{className:"flex justify-between items-start mb-2",children:[s("h4",{className:"text-slate-800 font-semibold group-hover:text-blue-600 line-clamp-2 text-xs md:text-sm leading-4 md:leading-5 flex-1 mr-2",children:l.title}),o("div",{className:"text-xs text-slate-400 whitespace-nowrap flex items-center gap-1 flex-shrink-0",children:[s(vl,{className:"w-3 h-3",stroke:1.5}),new Date(l.created_at).toLocaleDateString("zh-CN",{month:"short",day:"numeric"})]})]}),s("div",{className:"text-xs text-slate-600 mb-2 md:mb-3 line-clamp-2 leading-4",children:l.excerpt}),l.author_username&&o("div",{className:"flex items-center justify-between",children:[o(ee,{to:`/profile/${l.author_id}`,className:"text-xs text-slate-600 hover:text-slate-800 font-medium flex items-center gap-1.5 md:gap-2",onClick:i=>i.stopPropagation(),children:[s(Gn,{user:{id:l.author_id,username:l.author_username,avatar_url:l.author_avatar_url},size:"xs"}),s("span",{className:"truncate",children:l.author_username})]}),o("div",{className:"flex items-center gap-2 md:gap-3 text-xs text-slate-500",children:[o("span",{className:"flex items-center gap-1",children:[s(Nn,{className:"w-3 h-3",stroke:1.5}),l.likes]}),o("span",{className:"flex items-center gap-1",children:[s(qs,{className:"w-3 h-3",stroke:1.5}),l.comments]}),o("span",{className:"flex items-center gap-1",children:[s(ls,{className:"w-3 h-3",stroke:1.5}),l.favorites]})]})]})]})]})})},l.id))}),t.length>=5&&s("div",{className:"mt-3 md:mt-4 text-center",children:s("button",{className:"text-slate-600 hover:text-slate-800 text-xs md:text-sm font-medium py-1.5 md:py-2 px-3 md:px-4 bg-white/60 hover:bg-white/80 rounded-lg transition-colors duration-200",children:""})})]})]}),HN=()=>{const[e,t]=h.useState(!0),[n,r]=h.useState(""),[l,a]=h.useState({recent:[],popular:[],most_favorited:[],most_liked:[]});return h.useEffect(()=>{(async()=>{t(!0);const i=await LN();i.success?a(i.sections):r(i.message||""),t(!1)})()},[]),o("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/30",children:[s(_e,{}),o("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-100 via-indigo-100 to-blue-200",children:[s("div",{className:"absolute inset-0 bg-white/40"}),s("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-blue-200/30 rounded-full blur-3xl"}),s("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-indigo-200/20 rounded-full blur-3xl"}),s("div",{className:"relative container mx-auto px-4 py-8 md:py-12",children:o("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6 md:gap-8",children:[o("div",{className:"text-center lg:text-left",children:[o("div",{className:"flex items-center justify-center lg:justify-start gap-2 md:gap-3 mb-3 md:mb-4",children:[s("div",{className:"p-2 md:p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:s(gi,{className:"w-6 h-6 md:w-8 md:h-8 text-slate-600",stroke:1.5})}),s("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold",children:""})]}),s("p",{className:"text-slate-600 text-base md:text-lg mb-4 md:mb-6 max-w-2xl",children:""}),o("div",{className:"flex flex-wrap items-center justify-center lg:justify-start gap-4 md:gap-6 text-slate-600 text-xs md:text-sm",children:[o("div",{className:"flex items-center gap-1 md:gap-2",children:[s(vl,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.5}),s("span",{children:""})]}),o("div",{className:"flex items-center gap-1 md:gap-2",children:[s(Ec,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.5}),s("span",{children:""})]}),o("div",{className:"flex items-center gap-1 md:gap-2",children:[s(Nn,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.5}),s("span",{children:""})]})]})]}),s("div",{className:"flex-shrink-0",children:o(ee,{to:"/community/create",className:"group relative inline-flex items-center gap-2 md:gap-3 px-6 md:px-8 py-3 md:py-4 bg-white text-blue-600 rounded-xl font-semibold hover:bg-blue-50 transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base",children:[s(Lf,{className:"w-4 h-4 md:w-5 md:h-5 group-hover:rotate-90 transition-transform duration-300",stroke:2}),s("span",{children:""}),s("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl opacity-0 group-hover:opacity-10 transition-opacity duration-300"})]})})]})})]}),o("div",{className:"container mx-auto px-4 py-6 md:py-8",children:[n&&s("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-400 text-red-700 rounded-lg shadow-sm",children:o("div",{className:"flex items-center gap-2",children:[s("div",{className:"w-5 h-5 bg-red-100 rounded-full flex items-center justify-center",children:s("span",{className:"text-red-600 text-xs font-bold",children:"!"})}),s("span",{className:"font-medium",children:n})]})}),e?o("div",{className:"text-center py-16 md:py-20",children:[o("div",{className:"relative inline-block",children:[s("div",{className:"w-12 h-12 md:w-16 md:h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),s("div",{className:"absolute inset-0 flex items-center justify-center",children:s(gi,{className:"w-4 h-4 md:w-6 md:h-6 text-blue-600 animate-pulse",stroke:1.5})})]}),s("p",{className:"mt-3 md:mt-4 text-slate-600 font-medium text-sm md:text-base",children:"..."})]}):o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8",children:[s(aa,{title:"",items:l.recent||[],icon:s(vl,{className:"w-5 h-5 text-slate-700",stroke:1.5}),gradient:"from-emerald-100 to-teal-200"}),s(aa,{title:"",items:l.popular||[],icon:s(Ec,{className:"w-5 h-5 text-slate-700",stroke:1.5}),gradient:"from-orange-100 to-red-200"}),s(aa,{title:"",items:l.most_favorited||[],icon:s(ls,{className:"w-5 h-5 text-slate-700",stroke:1.5}),gradient:"from-purple-100 to-pink-200"}),s(aa,{title:"",items:l.most_liked||[],icon:s(Nn,{className:"w-5 h-5 text-slate-700",stroke:1.5}),gradient:"from-blue-100 to-cyan-200"})]}),s("div",{className:"mt-12 md:mt-16 text-center",children:o("div",{className:"inline-flex items-center gap-1.5 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-white/80 backdrop-blur-sm rounded-full border border-slate-200 text-slate-600 text-xs md:text-sm",children:[s(gi,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.5}),s("span",{children:""})]})})]}),s(mt,{})]})},VN=()=>{var Ce,M,W;const{id:e}=Rr(),{isAuthenticated:t}=it(),[n,r]=h.useState(!0),[l,a]=h.useState(""),[i,c]=h.useState(null),[d,u]=h.useState({likes:0,comments:0,favorites:0,shares:0}),[v,y]=h.useState({liked:!1,favorited:!1}),[b,C]=h.useState([]),[f,N]=h.useState(""),[_,x]=h.useState(null),[m,p]=h.useState("");h.useState(!1);const[S,R]=h.useState(!1),[g,$]=h.useState("article"),[T,q]=h.useState(null),[L,B]=h.useState("inappropriate"),[Z,se]=h.useState(""),[U,V]=h.useState(!1),G=async()=>{r(!0);const Y=await jN(e);if(!Y.success){a(Y.message||""),r(!1);return}c(Y.article),u(Y.metrics),y(Y.userState||{liked:!1,favorited:!1});const oe=await ON(e,1,50);C(oe.success?oe.comments||[]:[]),r(!1)};h.useEffect(()=>{G()},[e]);const X=async()=>{if(!t)return;const Y=f.trim();if(!Y)return;(await Ni(e,Y)).success&&(N(""),G())},A=async()=>{if(!t)return;const Y=await AN(e);Y.success&&(y(oe=>({...oe,liked:Y.liked})),u(oe=>({...oe,likes:Y.likeCount})))},te=async()=>{if(!t)return;const Y=await UN(e);Y.success&&(y(oe=>({...oe,favorited:Y.favorited})),u(oe=>({...oe,favorites:Y.favoriteCount})))},re=()=>{t&&($("article"),q(e),B("inappropriate"),se(""),R(!0))},ae=async Y=>{if(!t)return;const oe=await FN(Y);oe.success&&C(pe=>pe.map(j=>j.id===Y?{...j,like_count:oe.likeCount,liked:oe.liked}:j))},de=Y=>{t&&($("comment"),q(Y),B("inappropriate"),se(""),R(!0))},Ne=async()=>{if(!t||!S||!T)return;V(!0);let Y;g==="article"?Y=await BN(T,L,Z):Y=await DN(T,L,Z),V(!1),Y.success?R(!1):alert(Y.message||"")};return o("div",{className:"min-h-screen bg-white",children:[s(_e,{}),s("div",{className:"container mx-auto px-4 py-4 md:py-6 min-h-[calc(100vh-200px)]",children:n?s("div",{className:"text-center py-8 md:py-12 text-slate-500 text-sm md:text-base",children:"..."}):l?s("div",{className:"text-center py-8 md:py-12 text-red-600 text-sm md:text-base",children:l}):o("div",{className:"max-w-3xl mx-auto min-h-[60vh]",children:[o("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4 mb-4",children:[o("div",{className:"flex items-center gap-2 md:gap-3",children:[s(Gn,{user:i.author,size:"md"}),o("div",{children:[s(ee,{to:`/profile/${(Ce=i.author)==null?void 0:Ce.id}`,className:"text-slate-800 font-medium hover:text-slate-600 transition-colors text-sm md:text-base",children:((M=i.author)==null?void 0:M.username)||""}),s("div",{className:"text-xs text-slate-500",children:new Date(i.created_at).toLocaleString()})]}),s("div",{className:"ml-2",children:s(Rl,{targetUserId:(W=i.author)==null?void 0:W.id,size:"sm"})})]}),o("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs md:text-sm",children:[o("button",{onClick:A,className:`px-2 md:px-3 py-1 rounded border inline-flex items-center gap-1 ${v.liked?"bg-blue-600 text-white":"border-slate-300 text-slate-700"}`,children:[s(Gs,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.8})," ",d.likes]}),o("button",{onClick:te,className:`px-2 md:px-3 py-1 rounded border inline-flex items-center gap-1 ${v.favorited?"bg-amber-500 text-white":"border-slate-300 text-slate-700"}`,children:[s(bl,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.8})," ",d.favorites]}),o("button",{onClick:re,className:"px-2 md:px-3 py-1 rounded border inline-flex items-center gap-1 border-slate-300 text-slate-700",children:[s(Sm,{className:"w-3 h-3 md:w-4 md:h-4",stroke:1.8})," "]})]})]}),i.cover_image_url&&s("div",{className:"mb-4 md:mb-6",children:s("img",{src:i.cover_image_url,alt:i.title,className:"w-full max-h-64 md:max-h-96 object-cover rounded-lg border border-slate-200"})}),s("h1",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-3 md:mb-4",children:i.title}),s("div",{className:"prose max-w-none text-slate-800 whitespace-pre-wrap leading-relaxed text-sm md:text-base",children:i.content}),o("div",{className:"mt-8 md:mt-10",children:[o("h3",{className:"text-base md:text-lg font-semibold text-slate-800 mb-3",children:["",d.comments,""]}),t&&o("div",{className:"mb-4",children:[s("textarea",{value:f,onChange:Y=>N(Y.target.value),rows:4,placeholder:"...",className:"w-full border border-slate-300 rounded-lg p-2 md:p-3 outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"}),s("div",{className:"text-right mt-2",children:s("button",{onClick:X,className:"px-3 md:px-4 py-1.5 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm md:text-base",children:""})})]}),s("div",{className:"space-y-4",children:(()=>{const Y=new Map;b.forEach(w=>Y.set(w.id,w));const oe=b.filter(w=>!w.parent_comment_id),pe=w=>{let I=w;for(;I&&I.parent_comment_id&&Y.has(I.parent_comment_id);)I=Y.get(I.parent_comment_id);return I?I.id:w.id},j=new Map;b.forEach(w=>{if(!w.parent_comment_id)return;const I=pe(w);j.has(I)||j.set(I,[]),j.get(I).push(w)});const E=({c:w})=>o("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[o("button",{onClick:()=>ae(w.id),className:`px-1.5 md:px-2 py-1 rounded-lg border inline-flex items-center gap-1 ${w.liked?"bg-blue-600 text-white":"border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:[s(Gs,{className:"w-3 h-3",stroke:1.8})," ",w.like_count]}),o("button",{onClick:()=>x(_===w.id?null:w.id),className:"px-1.5 md:px-2 py-1 rounded-lg border inline-flex items-center gap-1 border-slate-300 text-slate-700 hover:bg-slate-50",children:[s(qs,{className:"w-3 h-3",stroke:1.8})," "]}),o("button",{onClick:()=>de(w.id),className:"px-1.5 md:px-2 py-1 rounded-lg border inline-flex items-center gap-1 border-slate-300 text-slate-700 hover:bg-slate-50",children:[s(Sm,{className:"w-3 h-3",stroke:1.8})," "]})]});return oe.map(w=>o("div",{children:[o("div",{className:"flex items-start gap-2 md:gap-3",children:[s(Gn,{user:w,size:"sm"}),o("div",{className:"flex-1 rounded-2xl border bg-white border-slate-200 p-2.5 md:p-3 shadow-sm",children:[o("div",{className:"md:flex md:items-center md:justify-between",children:[o("div",{className:"text-xs md:text-sm mb-2 md:mb-0",children:[s(ee,{to:`/profile/${w.user_id}`,className:"font-medium text-slate-800 mr-2 hover:text-slate-600 transition-colors",children:w.username}),s("span",{className:"text-slate-400",children:new Date(w.created_at).toLocaleString()})]}),s("div",{className:"hidden md:block",children:s(E,{c:w})})]}),s("div",{className:"text-slate-800 whitespace-pre-wrap mt-2 leading-relaxed text-xs md:text-sm",children:w.content}),s("div",{className:"md:hidden mt-3 pt-2 border-t border-slate-100",children:s(E,{c:w})}),_===w.id&&o("div",{className:"mt-3",children:[s("textarea",{value:m,onChange:I=>p(I.target.value),rows:3,placeholder:"...",className:"w-full border border-slate-300 rounded-xl p-2 md:p-3 outline-none focus:ring-2 focus:ring-blue-500 bg-white text-xs md:text-sm"}),o("div",{className:"flex justify-end gap-2 mt-2",children:[s("button",{onClick:()=>{x(null),p("")},className:"px-2 md:px-3 py-1 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 text-xs md:text-sm",children:""}),s("button",{onClick:async()=>{if(!m.trim())return;(await Ni(e,m.trim(),w.id)).success&&(p(""),x(null),G())},className:"px-2 md:px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs md:text-sm",children:""})]})]})]})]}),s("div",{className:"ml-6 md:ml-8 mt-2 md:mt-3 space-y-2 md:space-y-3",children:(j.get(w.id)||[]).map(I=>{const O=Y.get(I.parent_comment_id),H=O&&O.id!==w.id?` @${O.username}`:"";return o("div",{className:"flex items-start gap-2 md:gap-3",children:[s(Gn,{user:I,size:"xs"}),o("div",{className:"flex-1 rounded-2xl border bg-slate-50 border-slate-200 p-2.5 md:p-3",children:[o("div",{className:"md:flex md:items-center md:justify-between",children:[o("div",{className:"text-xs mb-2 md:mb-0",children:[s(ee,{to:`/profile/${I.user_id}`,className:"font-medium text-slate-800 mr-2 hover:text-slate-600 transition-colors",children:I.username}),s("span",{className:"text-slate-400",children:new Date(I.created_at).toLocaleString()})]}),s("div",{className:"hidden md:block",children:s(E,{c:I})})]}),o("div",{className:"text-slate-800 whitespace-pre-wrap mt-2 leading-relaxed text-xs",children:[H,I.content]}),s("div",{className:"md:hidden mt-3 pt-2 border-t border-slate-100",children:s(E,{c:I})}),_===I.id&&o("div",{className:"mt-3",children:[s("textarea",{value:m,onChange:K=>p(K.target.value),rows:3,placeholder:"...",className:"w-full border border-slate-300 rounded-xl p-2 md:p-3 outline-none focus:ring-2 focus:ring-blue-500 bg-white text-xs md:text-sm"}),o("div",{className:"flex justify-end gap-2 mt-2",children:[s("button",{onClick:()=>{x(null),p("")},className:"px-2 md:px-3 py-1 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 text-xs md:text-sm",children:""}),s("button",{onClick:async()=>{if(!m.trim())return;(await Ni(e,m.trim(),I.id)).success&&(p(""),x(null),G())},className:"px-2 md:px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs md:text-sm",children:""})]})]})]})]},I.id)})})]},w.id))})()})]})]})}),s(mt,{}),S&&s("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:o("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[s("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:g==="article"?"":""}),o("div",{className:"space-y-3",children:[o("select",{value:L,onChange:Y=>B(Y.target.value),className:"w-full border border-slate-300 rounded-lg p-2",children:[s("option",{value:"inappropriate",children:""}),s("option",{value:"spam",children:""}),s("option",{value:"abuse",children:"/"}),s("option",{value:"copyright",children:""}),s("option",{value:"other",children:""})]}),s("textarea",{value:Z,onChange:Y=>se(Y.target.value),rows:5,placeholder:"...",className:"w-full border border-slate-300 rounded-lg p-3 outline-none focus:ring-2 focus:ring-blue-500"})]}),o("div",{className:"flex justify-end gap-2 mt-4",children:[s("button",{onClick:()=>R(!1),className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:""}),s("button",{onClick:Ne,disabled:U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:U?"...":""})]})]})})]})},WN=()=>{const e=ot(),{isAuthenticated:t}=it(),[n,r]=h.useState(""),[l,a]=h.useState(""),[i,c]=h.useState(null),[d,u]=h.useState(null),[v,y]=h.useState(!1),[b,C]=h.useState(""),[f,N]=h.useState(""),_=h.useRef(null),x=g=>{if(N(""),!g.type.startsWith("image/")){N("");return}if(g.size>5*1024*1024){N("5MB");return}c(g);const $=new FileReader;$.onload=T=>{u(T.target.result)},$.readAsDataURL(g)},m=g=>{g.preventDefault(),g.stopPropagation()};return o("div",{className:"min-h-screen bg-white",children:[s(_e,{}),o("div",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[s("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:""}),b&&s("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:b}),o("div",{className:"bg-white border border-slate-200 rounded-lg p-6 mb-6",children:[s("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:""}),d?o("div",{className:"flex items-center gap-4",children:[o("div",{className:"relative",children:[s("img",{src:d,alt:"",className:"w-32 h-24 object-cover rounded-lg border border-slate-200"}),s("button",{type:"button",onClick:()=>{c(null),u(null),N("")},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:s(Et,{className:"w-4 h-4",stroke:2})})]}),o("div",{className:"flex-1",children:[s("p",{className:"text-sm text-slate-600 mb-2",children:""}),s("p",{className:"text-xs text-slate-500",children:" JPGPNG  5MB"})]})]}):o("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-8 text-center hover:border-slate-400 transition-colors cursor-pointer",onDragEnter:m,onDragOver:m,onDrop:g=>{g.preventDefault(),g.stopPropagation();const $=g.dataTransfer.files;$.length>0&&x($[0])},onClick:()=>{var g;return(g=_.current)==null?void 0:g.click()},children:[s(zf,{className:"w-12 h-12 text-slate-400 mx-auto mb-3",stroke:1.5}),s("p",{className:"text-slate-600 mb-2",children:""}),s("p",{className:"text-sm text-slate-500",children:""}),s("p",{className:"text-xs text-slate-400 mt-2",children:" JPGPNG  5MB"})]}),s("input",{ref:_,type:"file",accept:"image/*",onChange:g=>{var $;return(($=g.target.files)==null?void 0:$[0])&&x(g.target.files[0])},className:"hidden"}),f&&o("div",{className:"flex items-center gap-2 mt-3 p-2 bg-red-50 border border-red-200 rounded text-red-600",children:[s(_n,{className:"w-4 h-4 flex-shrink-0"}),s("span",{className:"text-sm",children:f})]})]}),o("div",{className:"bg-white border border-slate-200 rounded-lg",children:[s("div",{className:"p-4 border-b border-slate-200",children:s("input",{type:"text",value:n,onChange:g=>r(g.target.value),placeholder:"",className:"w-full text-2xl font-bold text-slate-800 border-none outline-none focus:ring-0 placeholder-slate-400"})}),s("div",{className:"p-4",children:s("textarea",{value:l,onChange:g=>a(g.target.value),placeholder:"...",rows:20,className:"w-full text-slate-700 border-none outline-none focus:ring-0 placeholder-slate-400 resize-none text-lg leading-relaxed"})})]}),o("div",{className:"mt-6 flex justify-end gap-3",children:[s("button",{onClick:()=>e("/community"),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:""}),s("button",{onClick:async()=>{if(!t){C("");return}if(!n.trim()||!l.trim()){C("");return}C(""),y(!0);try{const g=await IN({title:n.trim(),content:l.trim()});if(g.success){if(i)try{const $=new FormData;$.append("cover",i),(await fetch(`/api/community/articles/${g.articleId}/cover`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:$})).ok||console.warn("")}catch($){console.warn(":",$)}e(`/community/articles/${g.articleId}`)}else C(g.message||"")}catch{C("")}finally{y(!1)}},disabled:v,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:v?"...":""})]})]}),s(mt,{})]})},zm={uploadAvatar:async e=>{const t=new FormData;return t.append("avatar",e),await Oe.post("/upload/avatar",t,{headers:{"Content-Type":"multipart/form-data"}})},deleteAvatar:async()=>await Oe.delete("/upload/avatar"),getUploadConfig:async()=>await Oe.get("/upload/config")},XN=({isOpen:e,onClose:t,onSuccess:n})=>{const{user:r,updateUser:l}=it(),[a,i]=h.useState(null),[c,d]=h.useState(null),[u,v]=h.useState(!1),[y,b]=h.useState(""),C=h.useRef(null),f=m=>{const p=m.target.files[0];if(!p)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(p.type)){b(" JPG, PNG, GIF, WebP ");return}if(p.size>10*1024*1024){b(" 10MB");return}i(p),b("");const R=new FileReader;R.onload=g=>{d(g.target.result)},R.readAsDataURL(p)},N=async()=>{var m,p;if(a){v(!0),b("");try{const S=await zm.uploadAvatar(a);S.success?(l(S.data.user),n&&n(S.data.avatar_url),t()):b(S.message||"")}catch(S){console.error(":",S),b(((p=(m=S.response)==null?void 0:m.data)==null?void 0:p.message)||"")}finally{v(!1)}}},_=async()=>{var m,p;v(!0),b("");try{const S=await zm.deleteAvatar();S.success?(l(S.data.user),n&&n("none"),t()):b(S.message||"")}catch(S){console.error(":",S),b(((p=(m=S.response)==null?void 0:m.data)==null?void 0:p.message)||"")}finally{v(!1)}},x=()=>{i(null),d(null),b(""),C.current&&(C.current.value="")};return e?s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[o("div",{className:"flex justify-between items-center mb-4",children:[s("h3",{className:"text-lg font-semibold",children:""}),s("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),o("div",{className:"mb-4 text-center",children:[s("p",{className:"text-sm text-gray-600 mb-2",children:""}),s("div",{className:"w-20 h-20 mx-auto rounded-full overflow-hidden bg-gray-200",children:r!=null&&r.avatar_url&&r.avatar_url!=="none"?s("img",{src:r.avatar_url,alt:"",className:"w-full h-full object-cover"}):s("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:s("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})})]}),o("div",{className:"mb-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s("input",{ref:C,type:"file",accept:"image/*",onChange:f,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),c&&o("div",{className:"mb-4 text-center",children:[s("p",{className:"text-sm text-gray-600 mb-2",children:""}),s("div",{className:"w-20 h-20 mx-auto rounded-full overflow-hidden border-2 border-blue-300",children:s("img",{src:c,alt:"",className:"w-full h-full object-cover"})})]}),y&&s("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s("p",{className:"text-sm text-red-600",children:y})}),o("div",{className:"flex gap-3",children:[a?o(wt,{children:[s("button",{onClick:N,disabled:u,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"...":""}),s("button",{onClick:x,disabled:u,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}):s("button",{onClick:()=>{var m;return(m=C.current)==null?void 0:m.click()},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:""}),(r==null?void 0:r.avatar_url)&&r.avatar_url!=="none"&&s("button",{onClick:_,disabled:u,className:"px-4 py-2 border border-red-300 text-red-600 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),o("div",{className:"mt-4 text-xs text-gray-500",children:[s("p",{children:" JPG, PNG, GIF, WebP "}),s("p",{children:" 10MB"})]})]})}):null},zn={getUserInfo:async e=>await Oe.get(`/users/${e}`),getUserProfile:async e=>await Oe.get(`/users/${e}/profile`),getUserNovels:async(e,t=1,n=10)=>await Oe.get(`/users/${e}/novels?page=${t}&limit=${n}`),getUserArticles:async(e,t=1,n=10)=>await Oe.get(`/users/${e}/articles?page=${t}&limit=${n}`),getUserFavorites:async(e,t=1,n=10,r="all")=>await Oe.get(`/users/${e}/favorites?page=${t}&limit=${n}&type=${r}`),getUserBookmarks:async(e,t=1,n=10)=>await Oe.get(`/users/${e}/bookmarks?page=${t}&limit=${n}`),getUserReadingHistory:async(e,t=1,n=10)=>await Oe.get(`/users/${e}/reading-history?page=${t}&limit=${n}`),getUserReadingPaths:async(e,t=1,n=10)=>await Oe.get(`/users/${e}/reading-paths?page=${t}&limit=${n}`),getUserComments:async(e,t=1,n=10)=>await Oe.get(`/users/${e}/comments?page=${t}&limit=${n}`)},YN=()=>{const{userId:e}=Rr(),t=ot(),{user:n,isAuthenticated:r}=it(),[l,a]=h.useState(null),[i,c]=h.useState(null),[d,u]=h.useState("novels"),[v,y]=h.useState(!0),[b,C]=h.useState(null),[f,N]=h.useState([]),[_,x]=h.useState([]),[m,p]=h.useState([]),[S,R]=h.useState([]),[g,$]=h.useState([]),[T,q]=h.useState([]),[L,B]=h.useState([]),[Z,se]=h.useState({}),[U,V]=h.useState(!1),[G,X]=h.useState(!1),A=r&&(n==null?void 0:n.id)===e;h.useEffect(()=>{te()},[e]),h.useEffect(()=>{l&&re(d)},[d,l]);const te=async()=>{try{y(!0);const w=await zn.getUserProfile(e);w.success?(a(w.user),c(w.stats),C(null)):C(w.message||"")}catch(w){console.error(":",w),C("")}finally{y(!1)}},re=async(w,I=1)=>{try{V(!0);let O={};switch(w){case"novels":O=await zn.getUserNovels(e,I),O.success&&(N(O.novels||[]),se(O.pagination||{}));break;case"articles":O=await zn.getUserArticles(e,I),O.success&&(x(O.articles||[]),se(O.pagination||{}));break;case"favorites":if(!A)return;O=await zn.getUserFavorites(e,I),O.success&&(p(O.favorites||[]),se(O.pagination||{}));break;case"bookmarks":if(!A)return;O=await zn.getUserBookmarks(e,I),O.success&&(R(O.bookmarks||[]),se(O.pagination||{}));break;case"history":if(!A)return;O=await zn.getUserReadingHistory(e,I),O.success&&($(O.history||[]),se(O.pagination||{}));break;case"paths":if(!A)return;O=await zn.getUserReadingPaths(e,I),O.success&&(q(O.readingPaths||[]),se(O.pagination||{}));break;case"comments":if(!A)return;O=await zn.getUserComments(e,I),O.success&&(B(O.comments||[]),se(O.pagination||{}));break}}catch(O){console.error(":",O)}finally{V(!1)}},ae=w=>new Date(w).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),de=w=>({author_original:"",mountain_beyond_mountain:"",infinite_point:"",traditional:""})[w]||w,Ne=()=>{var I,O;const w=l!=null&&l.avatar_url&&l.avatar_url!=="none"?s("img",{src:l.avatar_url,alt:l.username,className:"w-24 h-24 rounded-full object-cover"}):s("div",{className:"w-24 h-24 bg-slate-300 rounded-full flex items-center justify-center",children:s("span",{className:"text-2xl text-slate-600",children:((O=(I=l==null?void 0:l.username)==null?void 0:I.charAt(0))==null?void 0:O.toUpperCase())||"U"})});return A?o("button",{onClick:()=>X(!0),className:"group relative cursor-pointer transition-transform hover:scale-105",title:"",children:[w,s("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 rounded-full transition-all duration-200 flex items-center justify-center",children:s("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s(Za,{className:"w-8 h-8 text-white",stroke:2})})})]}):w},Ce=()=>{if(U)return s("div",{className:"flex justify-center py-12",children:s(_m,{className:"w-8 h-8 animate-spin text-slate-400",stroke:1.8})});switch(d){case"novels":return M();case"articles":return W();case"favorites":return Y();case"bookmarks":return oe();case"history":return pe();case"paths":return j();case"comments":return E();default:return null}},M=()=>f.length===0?o("div",{className:"text-center py-12",children:[s(Cc,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(w=>s(ee,{to:`/novel/${w.id}`,className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-shadow",children:o("div",{className:"flex",children:[s("div",{className:"flex-shrink-0 p-3",children:s(Er,{title:w.title,author:(l==null?void 0:l.username)||"",theme:"default",coverUrl:w.cover_image_url,className:"w-20 h-40"})}),o("div",{className:"flex-1 p-4",children:[o("div",{className:"flex items-center justify-between mb-2",children:[s("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:de(w.novel_type)}),o("span",{className:"text-xs text-slate-500",children:[w.total_chapters||0,""]})]}),s("h3",{className:"font-medium text-slate-700 mb-2 line-clamp-1",children:w.title}),s("p",{className:"text-sm text-slate-600 line-clamp-2 mb-3",children:w.description||"..."}),o("div",{className:"flex items-center text-xs text-slate-500 space-x-4",children:[o("span",{className:"flex items-center gap-1",children:[s(Ja,{className:"w-3 h-3",stroke:1.8}),w.total_views||0]}),o("span",{className:"flex items-center gap-1",children:[s(Gs,{className:"w-3 h-3",stroke:1.8}),w.total_likes||0]}),o("span",{className:"flex items-center gap-1",children:[s(bl,{className:"w-3 h-3",stroke:1.8}),w.total_favorites||0]})]})]})]})},w.id))}),W=()=>_.length===0?o("div",{className:"text-center py-12",children:[s(Me,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"space-y-4",children:_.map(w=>o(ee,{to:`/community/articles/${w.id}`,className:"block bg-white rounded-xl p-6 shadow-sm hover:shadow-lg transition-shadow",children:[o("div",{className:"flex items-start justify-between mb-3",children:[s("h3",{className:"font-medium text-slate-700 line-clamp-1 flex-1",children:w.title}),s("span",{className:"text-sm text-slate-500 ml-4",children:ae(w.created_at)})]}),o("p",{className:"text-slate-600 text-sm line-clamp-2 mb-4",children:[w.excerpt,"..."]}),o("div",{className:"flex items-center text-sm text-slate-500 space-x-4",children:[o("span",{className:"flex items-center gap-1",children:[s(Gs,{className:"w-4 h-4",stroke:1.8}),w.like_count||0]}),o("span",{className:"flex items-center gap-1",children:[s(qs,{className:"w-4 h-4",stroke:1.8}),w.comment_count||0]}),o("span",{className:"flex items-center gap-1",children:[s(bl,{className:"w-4 h-4",stroke:1.8}),w.favorite_count||0]})]})]},w.id))}),Y=()=>m.length===0?o("div",{className:"text-center py-12",children:[s(Nn,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"space-y-4",children:m.map(w=>o(ee,{to:w.type==="novel"?`/novel/${w.id}`:`/community/articles/${w.id}`,className:"block bg-white rounded-xl p-6 shadow-sm hover:shadow-lg transition-shadow",children:[o("div",{className:"flex items-start justify-between mb-3",children:[o("div",{className:"flex items-center gap-2",children:[s("span",{className:`text-xs px-2 py-1 rounded-full ${w.type==="novel"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:w.type==="novel"?"":""}),s("h3",{className:"font-medium text-slate-700 line-clamp-1",children:w.title})]}),o("span",{className:"text-sm text-slate-500",children:[" ",ae(w.favorited_at)]})]}),s("p",{className:"text-slate-600 text-sm line-clamp-2 mb-3",children:w.description||"..."}),o("div",{className:"text-sm text-slate-500",children:["",w.author_name]})]},`${w.type}-${w.id}`))}),oe=()=>S.length===0?o("div",{className:"text-center py-12",children:[s(ls,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"space-y-4",children:S.map(w=>o(ee,{to:`/novel/${w.novel_id}/read/${w.chapter_id}`,className:"block bg-white rounded-xl p-6 shadow-sm hover:shadow-lg transition-shadow",children:[o("div",{className:"flex items-start justify-between mb-3",children:[s("h3",{className:"font-medium text-slate-700 line-clamp-1 flex-1",children:w.novel_title}),s("span",{className:"text-sm text-slate-500 ml-4",children:ae(w.bookmarked_at)})]}),s("div",{className:"flex items-center gap-2 mb-2",children:o("span",{className:"text-sm text-slate-600",children:["",w.chapter_order,"",w.chapter_title]})}),w.note&&o("p",{className:"text-sm text-slate-600 italic",children:["",w.note]}),o("div",{className:"text-sm text-slate-500 mt-2",children:["",w.author_name]})]},w.bookmark_id))}),pe=()=>g.length===0?o("div",{className:"text-center py-12",children:[s(q1,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"space-y-4",children:g.map((w,I)=>o(ee,{to:`/novel/${w.novel_id}/read/${w.chapter_id}`,className:"block bg-white rounded-xl p-6 shadow-sm hover:shadow-lg transition-shadow",children:[o("div",{className:"flex items-start justify-between mb-3",children:[s("h3",{className:"font-medium text-slate-700 line-clamp-1 flex-1",children:w.novel_title}),s("span",{className:"text-sm text-slate-500 ml-4",children:ae(w.read_at)})]}),s("div",{className:"flex items-center gap-2 mb-2",children:o("span",{className:"text-sm text-slate-600",children:["",w.chapter_order,"",w.chapter_title]})}),o("div",{className:"flex items-center justify-between text-sm text-slate-500",children:[o("span",{children:["",w.author_name]}),w.reading_duration&&o("span",{children:["",Math.floor(w.reading_duration/60),""]})]})]},`${w.novel_id}-${w.chapter_id}-${I}`))}),j=()=>T.length===0?o("div",{className:"text-center py-12",children:[s(If,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"space-y-4",children:T.map(w=>o("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[o("div",{className:"flex items-start justify-between mb-3",children:[o("div",{className:"flex items-center gap-2",children:[s("span",{className:`text-xs px-2 py-1 rounded-full ${w.is_public?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.is_public?"":""}),s("h3",{className:"font-medium text-slate-700",children:w.name})]}),s("span",{className:"text-sm text-slate-500",children:ae(w.updated_at)})]}),s("p",{className:"text-slate-600 text-sm mb-3",children:w.description||""}),o("div",{className:"text-sm text-slate-600 mb-3",children:["",w.novel_title," - ",w.author_name]}),o("div",{className:"flex items-center text-sm text-slate-500 space-x-4",children:[o("span",{children:[w.total_chapters||0,""]}),o("span",{children:[Math.floor((w.total_words||0)/1e3),"k"]}),o("span",{children:[w.follower_count||0,""]})]})]},w.id))}),E=()=>L.length===0?o("div",{className:"text-center py-12",children:[s(qs,{className:"w-12 h-12 text-slate-400 mx-auto mb-4",stroke:1.8}),s("p",{className:"text-slate-500",children:""})]}):s("div",{className:"space-y-4",children:L.map(w=>o("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-100",children:[s("div",{className:"mb-4",children:o("div",{className:"flex items-start gap-3",children:[s("div",{className:"flex-shrink-0",children:s(Gn,{user:{id:w.user_id,username:w.user_username,avatar_url:w.user_avatar_url},size:"sm",className:"w-10 h-10"})}),o("div",{className:"flex-1",children:[o("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2",children:[s("span",{className:"font-medium",children:w.user_username}),s("span",{className:"text-xs text-slate-500",children:ae(w.created_at)})]}),s("p",{className:"text-slate-700 text-sm leading-relaxed",children:w.content})]})]})}),o("div",{className:"bg-slate-50 rounded-lg p-3",children:[o("div",{className:"flex items-center justify-between",children:[o("div",{className:"flex items-center gap-2",children:[s("span",{className:`text-xs px-2 py-1 rounded-full ${w.target_type==="novel"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:w.target_type==="novel"?"":""}),s("span",{className:"text-sm text-slate-600",children:w.target_title})]}),s(ee,{to:w.target_type==="novel"?`/novel/${w.novel_id}/read/${w.chapter_id}`:`/community/articles/${w.article_id}`,className:"text-xs text-blue-600 hover:text-blue-800 hover:underline",children:""})]}),w.target_type==="novel"&&w.chapter_title&&o("div",{className:"text-xs text-slate-500 mt-1",children:["",w.chapter_order,"",w.chapter_title]}),w.parent_comment_id&&o("div",{className:"text-xs text-slate-500 mt-1",children:[" @",w.parent_username," "]})]}),o("div",{className:"flex items-center gap-4 mt-3 text-xs text-slate-500",children:[o("span",{className:"flex items-center gap-1",children:[s(Gs,{className:"w-3 h-3",stroke:1.8}),w.like_count||0]}),o("span",{className:"flex items-center gap-1",children:[s(qs,{className:"w-3 h-3",stroke:1.8}),w.reply_count||0]})]})]},w.id))});return v?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"flex justify-center items-center min-h-[60vh]",children:s(_m,{className:"w-8 h-8 animate-spin text-slate-400",stroke:1.8})}),s(mt,{})]}):b?o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),s("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o("div",{className:"text-center",children:[s(Za,{className:"w-16 h-16 text-slate-300 mx-auto mb-4",stroke:1.8}),s("h1",{className:"text-2xl font-bold text-slate-700 mb-2",children:""}),s("p",{className:"text-slate-500 mb-6",children:b}),s("button",{onClick:()=>t("/"),className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:""})]})}),s(mt,{})]}):o("div",{className:"min-h-screen bg-slate-50",children:[s(_e,{}),o("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s("div",{className:"bg-white rounded-xl shadow-sm p-8 mb-8",children:o("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[s("div",{className:"flex-shrink-0",children:Ne()}),o("div",{className:"flex-1 min-w-0",children:[o("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[o("div",{children:[s("h1",{className:"text-2xl font-bold text-slate-700 mb-1",children:l==null?void 0:l.username}),o("p",{className:"text-slate-500 text-sm",children:["ID: ",l==null?void 0:l.id]})]}),!A&&r&&s("div",{className:"mt-4 sm:mt-0",children:s(Rl,{targetUserId:e})})]}),o("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(l==null?void 0:l.bio)&&s("div",{className:"sm:col-span-2",children:s("p",{className:"text-slate-600",children:l.bio})}),A&&(l==null?void 0:l.email)&&o("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s(tb,{className:"w-4 h-4",stroke:1.8}),s("span",{children:l.email})]}),o("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s(Tf,{className:"w-4 h-4",stroke:1.8}),o("span",{children:[" ",ae(l==null?void 0:l.created_at)]})]}),o("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s(Pb,{className:"w-4 h-4",stroke:1.8}),o("span",{children:[" ",(l==null?void 0:l.reputation)||0]})]})]}),i&&o("div",{className:"flex flex-wrap gap-6 text-sm",children:[o("div",{className:"flex items-center gap-1",children:[s(Lb,{className:"w-4 h-4 text-slate-500",stroke:1.8}),o("span",{className:"text-slate-600",children:[" ",s("span",{className:"font-medium text-slate-700",children:i.following})]})]}),o("div",{className:"flex items-center gap-1",children:[s(Nn,{className:"w-4 h-4 text-slate-500",stroke:1.8}),o("span",{className:"text-slate-600",children:[" ",s("span",{className:"font-medium text-slate-700",children:i.followers})]})]}),o("div",{className:"flex items-center gap-1",children:[s(Pf,{className:"w-4 h-4 text-slate-500",stroke:1.8}),o("span",{className:"text-slate-600",children:[" ",s("span",{className:"font-medium text-slate-700",children:i.novels})]})]}),o("div",{className:"flex items-center gap-1",children:[s(Me,{className:"w-4 h-4 text-slate-500",stroke:1.8}),o("span",{className:"text-slate-600",children:[" ",s("span",{className:"font-medium text-slate-700",children:i.articles})]})]})]})]})]})}),o("div",{className:"bg-white rounded-xl shadow-sm",children:[s("div",{className:"border-b border-slate-200",children:o("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[s("button",{onClick:()=>u("novels"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="novels"?"border-slate-500 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""}),s("button",{onClick:()=>u("articles"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="articles"?"border-slate-500 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:A?"":""}),A&&o(wt,{children:[s("button",{onClick:()=>u("favorites"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="favorites"?"border-slate-500 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""}),s("button",{onClick:()=>u("bookmarks"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="bookmarks"?"border-slate-500 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""}),s("button",{onClick:()=>u("history"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="history"?"border-slate-500 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""}),s("button",{onClick:()=>u("paths"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="paths"?"border-slate-500 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""}),s("button",{onClick:()=>u("comments"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="comments"?"border-slate-500 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:""})]})]})}),s("div",{className:"p-6 min-h-[400px]",children:Ce()}),(Z==null?void 0:Z.pages)>1&&s("div",{className:"border-t border-slate-200 px-6 py-4",children:s("div",{className:"flex justify-center",children:s("nav",{className:"flex space-x-2",children:Array.from({length:Z.pages},(w,I)=>I+1).map(w=>s("button",{onClick:()=>re(d,w),className:`px-3 py-1 rounded text-sm ${w===Z.page?"bg-slate-700 text-white":"text-slate-600 hover:bg-slate-100"}`,children:w},w))})})})]})]}),s(mt,{}),s(XN,{isOpen:G,onClose:()=>X(!1),onSuccess:w=>{l&&a({...l,avatar_url:w})}})]})};function KN(){return s(v1,{children:s(Iv,{children:s("div",{className:"App",children:o(Ev,{children:[s(Qe,{path:"/",element:s(gN,{})}),s(Qe,{path:"/login",element:s(xN,{})}),s(Qe,{path:"/register",element:s(vN,{})}),s(Qe,{path:"/dashboard",element:s(yN,{})}),s(Qe,{path:"/novel/:id",element:s(bN,{})}),s(Qe,{path:"/novel/:novelId/create-chapter",element:s(NN,{})}),s(Qe,{path:"/novel/:novelId/edit",element:s($N,{})}),s(Qe,{path:"/novel/:id/custom-reading-path",element:s(zN,{})}),s(Qe,{path:"/novel/:novelId/read/:chapterId",element:s(MN,{})}),s(Qe,{path:"/explore",element:s(PN,{})}),s(Qe,{path:"/search",element:s(TN,{})}),s(Qe,{path:"/about",element:s(RN,{})}),s(Qe,{path:"/community",element:s(HN,{})}),s(Qe,{path:"/community/create",element:s(WN,{})}),s(Qe,{path:"/community/articles/:id",element:s(VN,{})}),s(Qe,{path:"/profile/:userId",element:s(YN,{})})]})})})})}wi.createRoot(document.getElementById("root")).render(s(KN,{}));
